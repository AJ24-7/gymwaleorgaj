<!DOCTYPE html>
<html lang="en">
<head>
  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gym-Wale | Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="gymadmin.css">
    <link rel="stylesheet" href="attendance.css">
    <link rel="stylesheet" href="membertab.css">
    <link rel="stylesheet" href="payment.css">
    <link rel="stylesheet" href="member-payments.css">
    <link rel="stylesheet" href="equipment.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script defer src="gymadmin.js"></script>
    <script defer src="settings.js"></script>
    <script defer src="gym-profile.js"></script>
    <script defer src="notification-modal.js"></script>
    <script defer src="notification-system.js"></script>
    <script defer src="support-reviews.js"></script>
    <script defer src="attendance.js"></script>
    <script defer src="attendance-stats.js"></script>
    <script defer src="payment.js"></script>
    <script defer src="equipment.js"></script>
</head>
<body>
<!-- Hamburger Menu for Mobile (move outside sidebar, just after <body>) -->
<button id="hamburgerMenuBtn" class="hamburger-menu" aria-label="Open menu">
  <span></span>
  <span></span>
  <span></span>
</button>
<!-- Backdrop for mobile sidebar -->
<div id="mobileSidebarBackdrop" class="mobile-sidebar-backdrop"></div>
<div class="dashboard">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-dumbbell"></i>
            </div>
            <div class="logo-text">Gym-Wale</div>
        </div>
        <ul class="menu">
            <li class="menu-item">
                <a href="#" class="menu-link active">
                    <span class="menu-icon"><i class="fas fa-tachometer-alt"></i></span>
                    <span class="menu-text">Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-users"></i></span>
                    <span class="menu-text">Members</span>
                </a>
            </li>
             <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-user-tie"></i></span>
                    <span class="menu-text">Trainers</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-calendar-check"></i></span>
                    <span class="menu-text">Attendance</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-credit-card"></i></span>
                    <span class="menu-text">Payments</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-dumbbell"></i></span>
                    <span class="menu-text">Equipment</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-headset"></i></span>
                    <span class="menu-text">Support & Reviews</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-cog"></i></span>
                    <span class="menu-text">Settings</span>
                </a>
            </li>
        </ul>
        <div class="toggle-btn" id="toggleBtn">
            <i class="fas fa-chevron-left"></i>
        </div>
        
    </div>
    <!-- Mobile Sidebar Dropdown -->
    <div id="mobileSidebarDropdown" class="mobile-sidebar-dropdown">
      <div style="display:flex; justify-content:flex-end; padding:18px;">
        <button id="closeMobileSidebar" aria-label="Close menu" style="background:none; border:none; font-size:2rem; cursor:pointer;">&times;</button>
      </div>
      <ul class="menu" style="padding:0 24px;">
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-tachometer-alt"></i></span> <span class="menu-text">Dashboard</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-users"></i></span> <span class="menu-text">Members</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-calendar-check"></i></span> <span class="menu-text">Attendance</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-credit-card"></i></span> <span class="menu-text">Payments</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-user-tie"></i></span> <span class="menu-text">Trainers</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-dumbbell"></i></span> <span class="menu-text">Equipment</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-headset"></i></span> <span class="menu-text">Support & Reviews</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-cog"></i></span> <span class="menu-text">Settings</span></a></li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Top Nav -->
        <div class="top-nav" id="topNav">
            <div class="user-actions">
                <!-- Interactive animated user box -->
                <div class="user-profile user-profile-animated" id="userProfileToggle">
                  <div class="user-profile-box">
                    <div class="user-avatar">
                      <img id="adminAvatar" src="https://via.placeholder.com/40" alt="Admin">
                    </div>
                    <span class="user-name" id="adminName">Admin</span>
                  </div>
                  <i class="fas fa-chevron-down"></i>
                </div>
                <div class="profile-dropdown-menu" id="profileDropdownMenu">
                  <button class="dropdown-item" id="gymProfileLink" type="button"><i class="fas fa-building"></i> Gym Profile</button>
                  <div class="dropdown-divider"></div>
                  <button class="dropdown-item" id="changePasswordLink" type="button"><i class="fas fa-lock"></i> Change Password</button>
                  <div class="dropdown-divider"></div>
                  <button class="dropdown-item" id="logoutLink" type="button"><i class="fas fa-sign-out-alt"></i> Logout</button>
                </div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div class="content">
                <div class="page-header">
                    <h1 class="page-title">Dashboard Overview</h1>
                    <div class="page-actions">
                        <button id="openNotificationModalBtn">
                            <i class="fas fa-bell"></i> Send Notification
                        </button>
                        <!-- Admin notification system will be inserted here automatically -->
                    </div>
                </div>


                <!-- Stats Cards -->
                <div class="stats-cards">
                    <div class="stat-card new-users" id="membersStatCard" style="cursor:pointer;">
                        <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 10px; margin-bottom:8px;">
                            <div class="stat-icon-dashboard" style="font-size:2rem;color:#2563eb;display:flex;align-items:center;justify-content:center;">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-title" style="text-align:left;">Members</div>
                        </div>
                        <div class="stat-value"></div>
                        <div class="stat-change"></div>
                    </div>

                    <div class="stat-card payments">
                        <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 10px; margin-bottom:8px;">
                            <div class="stat-icon-dashboard" style="font-size:2rem;color:#43a047;display:flex;align-items:center;justify-content:center;">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div class="stat-title" style="text-align:left;">Total Payments</div>
                        </div>
                        <div class="stat-value"></div>
                        <div class="stat-change"></div>
                    </div>
                    <div class="stat-card attendance" id="attendanceStatCard" style="cursor:pointer;">
                        <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 10px; margin-bottom:8px;">
                            <div class="stat-icon-dashboard" style="font-size:2rem;color:#ffa726;display:flex;align-items:center;justify-content:center;">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-title" style="text-align:left;">Overall Attendance</div>
                        </div>
                        <div class="stat-value" id="overallAttendanceValue">Loading...</div>
                        <div class="stat-change" id="overallAttendanceChange">Calculating...</div>
                    </div>
                    <div class="stat-card trainers">
                        <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 10px; margin-bottom:8px;">
                            <div class="stat-icon-dashboard" style="font-size:2rem;color:#7c3aed;display:flex;align-items:center;justify-content:center;">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="stat-title" style="text-align:left;">Active Trainers</div>
                        </div>
                        <div class="stat-value"></div>
                        <div class="stat-change"></div>
                    </div>
                </div>
                <!-- Quick Actions -->
                <div class="dashboard-row">
                  <div class="card quick-action-card">
                    <div class="card-header">
                      <h2 class="card-title">Quick Actions</h2>
                    </div>
                    <div class="quick-action-list">
                      <button class="quick-action-btn" id="addMemberBtn" type="button">
                        <i class="fas fa-user-plus"></i>
                        <span class="quick-action-title">Add Member</span>
                      </button>
                      <button class="quick-action-btn" id="recordPaymentBtn" type="button">
                        <i class="fas fa-money-bill-wave"></i>
                        <span class="quick-action-title">Record Payment</span>
                      </button>
                      <button class="quick-action-btn" id="addTrainerBtn" type="button">
                        <i class="fas fa-user-tie"></i>
                        <span class="quick-action-title">Add Trainer</span>
                      </button>
                      <button class="quick-action-btn" id="uploadEquipmentBtn" type="button">
                        <i class="fas fa-dumbbell"></i>
                        <span class="quick-action-title">Add Equipment</span>
                      </button>
                      <button class="quick-action-btn" id="generateQRCodeBtn" type="button">
                        <i class="fas fa-qrcode"></i>
                        <span class="quick-action-title">Generate QR Code</span>
                      </button>
                    </div>
                  </div>
                  <div class="card activities-offered-card">
                    <div class="card-header" style="display:flex;align-items:center;justify-content:space-between;">
                      <h2 class="card-title">Activities Offered</h2>
                      <button id="addActivitiesBtn" class="upload-photo-btn" type="button" style="display:flex;align-items:center;gap:8px;font-size:1rem;padding:8px 18px;background:#1976d2;color:#fff;border:none;border-radius:6px;box-shadow:0 2px 8px rgba(25,118,210,0.08);cursor:pointer;">
                        <i class="fas fa-plus-circle"></i> Add Activities
                      </button>
                    </div>
                    <div class="activities-list" id="activitiesList">
                      <!-- Activities will be rendered dynamically here -->
                    </div>
                    <!-- Add Activities Modal -->
                    <div class="modal" id="addActivitiesModal" style="display:none;z-index:10001;align-items:flex-start;">
                      <div class="modal-content" style="max-width:700px;margin-top:48px; max-height:80vh; overflow-y:auto;">
                        <div style="display:flex;align-items:center;justify-content:space-between;">
                          <h3 style="margin:0;display:flex;align-items:center;gap:10px;"><i class="fas fa-plus-circle" style="color:var(--primary);"></i> Add Activities</h3>
                          <button class="modal-close" id="closeAddActivitiesModal" style="font-size:1.5rem;">&times;</button>
                        </div>
                        <div id="allActivitiesGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:18px;margin-top:18px;"></div>
                        <div style="display:flex;justify-content:flex-end;gap:10px;margin-top:24px;">
                          <button type="button" class="btn btn-secondary" id="cancelAddActivitiesBtn">Cancel</button>
                          <button type="button" class="btn btn-primary" id="saveActivitiesBtn">Save</button>
                        </div>
                      </div>
                    </div>
                    <!-- Save Confirmation Dialog -->
                    <div class="modal" id="saveActivitiesConfirmDialog" style="display:none;z-index:10002;align-items:center;">
                      <div class="modal-content" style="max-width:350px;text-align:center;">
                        <span class="modal-close" id="closeSaveActivitiesConfirmDialog" style="float:right;cursor:pointer;">&times;</span>
                        <h3 style="margin-bottom:18px;">Save Activities</h3>
                        <p>Are you sure you want to save the selected activities?</p>
                        <div style="margin-top:18px;">
                          <button id="confirmSaveActivitiesBtn" class="btn btn-primary" style="margin-right:10px;">Save</button>
                          <button id="cancelSaveActivitiesConfirmBtn" class="btn btn-secondary">Cancel</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                 <!-- Interactive Gym Photos Grid -->
                <section id="photoGridSection" class="card" style="margin-top: 24px;">
                  <div class="card-header">
                    <h1 class="card-title">Previously Uploaded Gym Photos</h1>
                    <button class="upload-photo-btn" id="uploadPhotoBtn">
                            <i class="fas fa-camera"></i> Upload Photo
                        </button>
                  </div>
                  <div class="card-body">
                    <div id="photoGrid" class="photo-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 18px;"></div>
                  </div>
                </section>
                 <!-- Membership Plans Section -->
                        <div class="card" id="membershipPlansSection" style="margin-top:18px;">
                          <div class="card-header" style="display:flex;align-items:center;justify-content:space-between;">
                            <h2 class="card-title"><i class="fas fa-crown" style="color:#ffbe0b;margin-right:8px;"></i>Membership Plans</h2>
                            <button id="editPlansBtn" class="btn btn-primary" style="font-size:1em;padding:6px 18px;"><i class="fas fa-edit"></i> Edit Plans</button>
                          </div>
<div class="plans-list" id="plansList"></div>
                        </div>
                        <!-- Membership Plan Editor Modal -->
                        <div class="modal" id="planEditorModal" style="display:none;z-index:10001;align-items:flex-start;">
                          <div class="modal-content" style="max-width:700px;margin-top:48px;">
                            <div style="display:flex;align-items:center;justify-content:space-between;">
                              <h3 style="margin:0;display:flex;align-items:center;gap:10px;"><i class="fas fa-crown" style="color:#ffbe0b;"></i> Edit Membership Plans</h3>
                              <button class="modal-close" id="closePlanEditorModal" style="font-size:1.5rem;">&times;</button>
                            </div>
                            <form id="planEditorForm" style="margin-top:18px;">
                          <div id="planEditorCards" style="display:flex;gap:18px;flex-wrap:wrap;justify-content:center;"></div>
                        
                         
                              <div style="display:flex;justify-content:flex-end;gap:10px;margin-top:24px;">
                                <button type="button" class="btn btn-secondary" id="cancelPlanEditBtn">Cancel</button>
                                <button type="submit" class="btn btn-primary">Save All</button>
                              </div>
                            </form>
                          </div>
                        </div>
                <!-- Rush Hour Indicator -->
                <div class="rush-hour">
                    <div class="rush-hour-info">
                        <div class="rush-hour-icon pulse">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="rush-hour-text">
                            <h4>Rush Hour Active</h4>
                            <p>Extra staff deployed during peak hours (5PM-8PM)</p>
                        </div>
                    </div>
                    <label class="rush-hour-toggle">
                        <input type="checkbox" checked>
                        <span class="rush-hour-slider"></span>
                    </label>
                </div>

                <!-- Main Grid -->
                <div class="main-grid">
                    <!-- Left Column -->
                    <div class="left-column">
                        <!-- New Members Card (Dynamic) -->
                        <div class="card" id="newMembersCard">
                            <div class="card-header">
                                <h2 class="card-title">New Members</h2>
                                <div class="card-actions">
                                    <button id="viewAllMembersBtn">View All</button>
                                    <button id="exportMembersBtn">Export</button>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Profile</th>
                                            <th>Name</th>
                                            <th>Join Date</th>
                                            <th>Plan</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="newMembersTableBody">
                                        <tr><td colspan="5" style="text-align:center;">Loading...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Attendance Chart -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Attendance Trend</h2>
                                <div class="card-actions" style="display:flex;gap:10px;align-items:center;">
                                    <label for="dashboardChartMonth" style="font-size:0.95rem;color:#555;margin-right:4px;">Month:</label>
                                    <select id="dashboardChartMonth" style="padding:4px 8px;border-radius:4px;border:1px solid #ccc;font-size:0.95rem;">
                                        <option value="0">Jan</option>
                                        <option value="1">Feb</option>
                                        <option value="2">Mar</option>
                                        <option value="3">Apr</option>
                                        <option value="4">May</option>
                                        <option value="5">Jun</option>
                                        <option value="6">Jul</option>
                                        <option value="7">Aug</option>
                                        <option value="8">Sep</option>
                                        <option value="9">Oct</option>
                                        <option value="10">Nov</option>
                                        <option value="11">Dec</option>
                                    </select>
                                    <label for="dashboardChartYear" style="font-size:0.95rem;color:#555;margin-left:8px;margin-right:4px;">Year:</label>
                                    <select id="dashboardChartYear" style="padding:4px 8px;border-radius:4px;border:1px solid #ccc;font-size:0.95rem;"></select>
                                </div>
                            </div>
                            <div class="chart-container">
                                <!-- Chart will be rendered here -->
                                <canvas id="dashboardAttendanceChart" style="width: 100%; height: 350px;"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="right-column">
                        

                        <!-- Recent Activity -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Recent Activity</h2>
                                <div class="card-actions">
                                    <button>View All</button>
                                </div>
                            </div>
                            <ul class="activity-list">
                                <li class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-user-plus"></i>
                                    </div>
                                    <div class="activity-content">
                                        <div class="activity-title">New member registered - John Smith</div>
                                        <div class="activity-time">10 minutes ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-credit-card"></i>
                                    </div>
                                    <div class="activity-content">
                                        <div class="activity-title">Payment received from Emily Davis</div>
                                        <div class="activity-time">1 hour ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-dumbbell"></i>
                                    </div>
                                    <div class="activity-content">
                                        <div class="activity-title">New equipment added - Treadmill X200</div>
                                        <div class="activity-time">3 hours ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-bell"></i>
                                    </div>
                                    <div class="activity-content">
                                        <div class="activity-title">New notification sent to all members</div>
                                        <div class="activity-time">Yesterday</div>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <!-- Equipment Gallery -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Equipment Gallery</h2>
                                <div class="card-actions">
                                    <button>View All</button>
                                </div>
                            </div>
                            <div class="equipment-gallery">
                                <div class="equipment-item">
                                    <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Treadmill">
                                    <div class="equipment-overlay">Treadmill X200</div>
                                </div>
                                <div class="equipment-item">
                                    <img src="https://images.unsplash.com/photo-1571019614245-c5f2ba9806b1?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Dumbbells">
                                    <div class="equipment-overlay">Dumbbell Set</div>
                                </div>
                                <div class="equipment-item">
                                    <img src="https://images.unsplash.com/photo-1534258936925-c58bed479fcb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Bench Press">
                                    <div class="equipment-overlay">Bench Press</div>
                                </div>
                                <div class="equipment-item">
                                    <img src="https://images.unsplash.com/photo-1576678927484-cc907957088c?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Rowing Machine">
                                    <div class="equipment-overlay">Rowing Machine</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Tab (Initially Hidden) -->
            <div id="paymentTab" class="payment-tab">
                <div class="page-header">
                    <h1 class="page-title">Payment Management</h1>
                    <div class="page-actions">
                        <button id="addPaymentBtn" class="add-payment-btn">
                            <i class="fas fa-plus"></i> Add Payment
                        </button>
                    </div>
                </div>

                <!-- Payment Statistics Cards -->
                <div class="payment-stats-grid">

                    <div class="payment-stat-card received" id="receivedAmountStatCard" style="cursor:pointer;">
                        <div class="payment-stat-header">
                            <div class="payment-stat-title">Amount Received</div>
                            <div class="payment-stat-icon received">
                                <i class="fas fa-arrow-up"></i>
                            </div>
                        </div>
                        <div class="payment-stat-value">₹0</div>
                        <div class="payment-stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                    </div>

                    <!-- Received Payments Details Modal -->
                    <div class="modal" id="receivedPaymentsModal" style="display:none;z-index:10010;align-items:flex-start;">
                      <div class="modal-content" style="max-width:520px;margin-top:48px;">
                        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;">
                          <h3 style="margin:0;color:#22c55e;font-weight:600;"><i class="fas fa-wallet"></i> Amount Received Breakdown</h3>
                          <button class="modal-close" id="closeReceivedPaymentsModal" style="font-size:1.5rem;">&times;</button>
                        </div>
                        <div id="receivedPaymentsDetailsContainer" style="min-height:120px;"></div>
                      </div>
                    </div>

                    <div class="payment-stat-card paid">
                        <div class="payment-stat-header">
                            <div class="payment-stat-title">Amount Paid</div>
                            <div class="payment-stat-icon paid">
                                <i class="fas fa-arrow-down"></i>
                            </div>
                        </div>
                        <div class="payment-stat-value">₹0</div>
                        <div class="payment-stat-change negative">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                    </div>

                    <div class="payment-stat-card pending" id="pendingPaymentsStatCard" style="cursor:pointer;">
                        <div class="payment-stat-header">
                            <div class="payment-stat-title">Pending Payments</div>
                            <div class="payment-stat-icon pending">
                                <i class="fas fa-clock"></i>
                            </div>
                        </div>
                        <div class="payment-stat-value">₹0</div>
                    </div>

                    <!-- Pending Payments Details Modal -->
                    <div class="modal" id="pendingPaymentsModal" style="display:none;z-index:10010;align-items:flex-start;">
                      <div class="modal-content" style="max-width:700px;margin-top:48px;">
                        <div style="display:flex;align-items:center;justify-content:space-between;">
                          <h3 style="margin:0;display:flex;align-items:center;gap:10px;"><i class="fas fa-clock" style="color:#ffbe0b;"></i> Pending Payment Details</h3>
                          <button class="modal-close" id="closePendingPaymentsModal" style="font-size:1.5rem;">&times;</button>
                        </div>
                        <div id="pendingPaymentsDetailsContainer" style="margin-top:18px;min-height:120px;max-height:420px;overflow-y:auto;"></div>
                      </div>
                    </div>

                    <div class="payment-stat-card due">
                        <div class="payment-stat-header">
                            <div class="payment-stat-title">Due Payments</div>
                            <div class="payment-stat-icon due">
                                <i class="fas fa-calendar-times"></i>
                            </div>
                        </div>
                        <div class="payment-stat-value">₹0</div>
                        <div class="payment-stat-change negative">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                    </div>

                    <div class="payment-stat-card profit">
                        <div class="payment-stat-header">
                            <div class="payment-stat-title">Profit/Loss</div>
                            <div class="payment-stat-icon profit">
                                <i class="fas fa-chart-line"></i>
                            </div>
                        </div>
                        <div class="payment-stat-value">₹0</div>
                        <div class="payment-stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                    </div>
                </div>

                <!-- Payment Chart -->
                <div class="payment-chart-section">
                    <div class="payment-chart-header">
                        <h2 class="payment-chart-title">
                            <i class="fas fa-chart-area"></i> Payment Trends
                        </h2>
                        <div class="payment-chart-controls">
                            <select id="paymentChartMonth">
                                <option value="0">January</option>
                                <option value="1">February</option>
                                <option value="2">March</option>
                                <option value="3">April</option>
                                <option value="4">May</option>
                                <option value="5">June</option>
                                <option value="6">July</option>
                                <option value="7">August</option>
                                <option value="8">September</option>
                                <option value="9">October</option>
                                <option value="10">November</option>
                                <option value="11">December</option>
                            </select>
                            <select id="paymentChartYear">
                                <!-- Years will be populated by JavaScript -->
                            </select>
                        </div>
                    </div>
                    <div class="payment-chart-container">
                        <canvas id="paymentChart"></canvas>
                    </div>
                </div>

                <!-- Payment Content Grid -->
                <div class="payment-content-grid">
                    <!-- Recurring Payments -->
                    <div class="recurring-payments-section">
                        <div class="recurring-payments-header">
                            <h2 class="recurring-payments-title">
                                <i class="fas fa-calendar-alt"></i> Monthly Recurring Payments
                            </h2>
                            <div class="recurring-payments-filters">
                                <button class="filter-btn active" data-filter="all">All</button>
                                <button class="filter-btn" data-filter="pending">Pending</button>
                                <button class="filter-btn" data-filter="overdue">Overdue</button>
                                <button class="filter-btn" data-filter="completed">Completed</button>
                            </div>
                        </div>
                        <div class="recurring-payments-list" id="recurringPaymentsList">
                            <div class="payment-loading">
                                <i class="fas fa-spinner"></i> Loading payments...
                            </div>
                        </div>
                    </div>

                    <!-- Pending Payments Section (Unified) -->
                    <div class="pending-payments-section">
                        <div class="pending-payments-header">
                            <h2 class="pending-payments-title">
                                <i class="fas fa-clock"></i> Pending Payments
                            </h2>
                            <div class="pending-payments-stats">
                                <span class="pending-count">0 pending</span>
                                <span class="pending-amount">₹0 pending</span>
                            </div>
                        </div>
                        <div class="pending-payments-list" id="pendingPaymentsList">
                            <div class="payment-loading">
                                <i class="fas fa-spinner"></i> Loading pending payments...
                            </div>
                        </div>
                    </div>

                    <!-- Recent Payments -->
                    <div class="recent-payments-section">
                        <div class="recent-payments-header">
                            <h2 class="recent-payments-title">
                                <i class="fas fa-history"></i> Recent Payments
                            </h2>
                        </div>
                        <div class="recent-payments-list" id="recentPaymentsList">
                            <div class="payment-loading">
                                <i class="fas fa-spinner"></i> Loading payments...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Notification Modal -->
    <div class="modal" id="notificationModal" style="display: none;">
        <div class="modal-content" style="max-width: 650px;">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-paper-plane"></i> Send Notification
                </h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
               <!-- Recipient Filter -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-filter"></i> Send To
                    </label>
                    <select class="form-control" id="notificationSendTo">
                        <option value="all-members">All Members</option>
                        <option value="active-members">Active Membership Members Only</option>
                        <option value="expiring-members">Members with Expiring Membership (7 days)</option>
                        <option value="expired-members">Members with Expired Membership</option>
                        <option value="premium-members">Premium Members</option>
                        <option value="standard-members">Standard Members</option>
                        <option value="basic-members">Basic Members</option>
                        <option value="trainers">Trainers Only</option>
                        <option value="admin">Admin Only</option>
                        <option value="new-members">New Members (Last 30 days)</option>
                        <option value="custom">Custom Selection</option>
                    </select>
                </div>

                <!-- Quick Message Templates -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-bolt"></i> Quick Message Templates
                    </label>
                    <div class="quick-message-grid">
                        <button type="button" class="quick-msg-btn" data-template="membership-expiry">
                            <i class="fas fa-calendar-times"></i> Membership Expiry
                        </button>
                        <button type="button" class="quick-msg-btn" data-template="payment-reminder">
                            <i class="fas fa-credit-card"></i> Payment Reminder
                        </button>
                        <button type="button" class="quick-msg-btn" data-template="new-class">
                            <i class="fas fa-plus-circle"></i> New Class
                        </button>
                        <button type="button" class="quick-msg-btn" data-template="holiday-notice">
                            <i class="fas fa-calendar-alt"></i> Holiday Notice
                        </button>
                        <button type="button" class="quick-msg-btn" data-template="maintenance">
                            <i class="fas fa-tools"></i> Maintenance
                        </button>
                        <button type="button" class="quick-msg-btn" data-template="achievement">
                            <i class="fas fa-trophy"></i> Achievement
                        </button>
                    </div>
                </div>

               
                <!-- Custom Selection Area (hidden by default) -->
                <div class="form-group" id="customSelectionArea" style="display: none;">
                    <label class="form-label">Select Recipients</label>
                    <div class="custom-selection-container">
                        <div class="selection-search">
                            <input type="text" id="recipientSearch" placeholder="Search members..." class="form-control">
                        </div>
                        <div class="selection-list" id="customRecipientList">
                            <!-- Dynamic content will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Notification Channels -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-share-alt"></i> Notification Channels
                    </label>
                    <div class="channel-options">
                        <label class="channel-option">
                            <input type="checkbox" id="systemNotification" checked>
                            <span class="channel-icon"><i class="fas fa-bell"></i></span>
                            <span class="channel-label">Notification sytem</span>
                        </label>
                        <label class="channel-option">
                            <input type="checkbox" id="emailNotification">
                            <span class="channel-icon"><i class="fas fa-envelope"></i></span>
                            <span class="channel-label">Email</span>
                        </label>
                        <label class="channel-option">
                            <input type="checkbox" id="whatsappNotification">
                            <span class="channel-icon"><i class="fab fa-whatsapp"></i></span>
                            <span class="channel-label">WhatsApp</span>
                        </label>
                        <label class="channel-option">
    <input type="checkbox" id="mainAdminNotification">
    <span class="channel-icon"><i class="fas fa-user-shield"></i></span>
    <span class="channel-label">Send to Main Admin</span>
</label>
                    </div>
                </div>

                <!-- Message Content -->
                <div class="form-group">
                    <label class="form-label" for="notificationTitle">
                        <i class="fas fa-heading"></i> Notification Title
                    </label>
                    <input type="text" class="form-control" id="notificationTitle" placeholder="Enter notification title" maxlength="100">
                    <small class="char-count">0/100</small>
                </div>

                <div class="form-group">
                    <label class="form-label" for="notificationMessage">
                        <i class="fas fa-comment"></i> Message
                    </label>
                    <textarea class="form-control" id="notificationMessage" placeholder="Enter your message" rows="4" maxlength="500"></textarea>
                    <small class="char-count">0/500</small>
                </div>

                <!-- Message Preview -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-eye"></i> Message Preview
                    </label>
                    <div class="message-preview" id="messagePreview">
                        <div class="preview-title">Preview Title</div>
                        <div class="preview-message">Preview message will appear here...</div>
                    </div>
                </div>

                <!-- Delivery Options -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-clock"></i> Delivery Options
                    </label>
                    <div class="delivery-options">
                        <label class="delivery-option">
                            <input type="radio" name="deliveryTime" value="now" checked>
                            <span>Send Now</span>
                        </label>
                        <label class="delivery-option">
                            <input type="radio" name="deliveryTime" value="schedule">
                            <span>Schedule for Later</span>
                        </label>
                    </div>
                    <div class="schedule-container" id="scheduleContainer" style="display: none;">
                        <input type="datetime-local" id="scheduleTime" class="form-control">
                    </div>
                </div>

                <!-- Send Status -->
                <div class="send-status" id="sendStatus" style="display: none;">
                    <div class="status-item">
                        <i class="fas fa-bell"></i>
                        <span>System: </span>
                        <span class="status-text" id="systemStatus">Pending</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-envelope"></i>
                        <span>Email: </span>
                        <span class="status-text" id="emailStatus">Pending</span>
                    </div>
                    <div class="status-item">
                        <i class="fab fa-whatsapp"></i>
                        <span>WhatsApp: </span>
                        <span class="status-text" id="whatsappStatus">Pending</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="sendNotificationBtn">
                    <i class="fas fa-paper-plane"></i> Send Notification
                </button>
            </div>
        </div>
    </div>

    <!-- Attendance Statistics Modal -->
    <div class="modal" id="attendanceStatsModal" style="display: none;">
        <div class="modal-content" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 20px; border-bottom: 1px solid #eee;">
                <h3 class="modal-title" style="margin: 0; color: var(--primary);">
                    <i class="fas fa-chart-line"></i> Attendance Statistics
                </h3>
                <button class="modal-close" id="closeAttendanceStats" style="background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <!-- Today's Summary -->
                <div class="attendance-summary-section" style="margin-bottom: 30px;">
                    <h4 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-calendar-day"></i> Today's Attendance Summary
                    </h4>
                    <div class="attendance-summary-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <div class="summary-card" style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; border-left: 4px solid var(--success);">
                            <div class="summary-icon" style="font-size: 2rem; color: var(--success); margin-bottom: 10px;">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="summary-number" id="totalMembersPresent" style="font-size: 2rem; font-weight: bold; color: var(--success);">0</div>
                            <div class="summary-label" style="color: var(--text-secondary); font-size: 0.9rem;">Members Present</div>
                        </div>
                        <div class="summary-card" style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; border-left: 4px solid var(--primary);">
                            <div class="summary-icon" style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="summary-number" id="totalTrainersPresent" style="font-size: 2rem; font-weight: bold; color: var(--primary);">0</div>
                            <div class="summary-label" style="color: var(--text-secondary); font-size: 0.9rem;">Trainers Present</div>
                        </div>
                        <div class="summary-card" style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; border-left: 4px solid var(--warning);">
                            <div class="summary-icon" style="font-size: 2rem; color: var(--warning); margin-bottom: 10px;">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="summary-number" id="overallAttendancePercentage" style="font-size: 2rem; font-weight: bold; color: var(--warning);">0%</div>
                            <div class="summary-label" style="color: var(--text-secondary); font-size: 0.9rem;">Overall Attendance</div>
                        </div>
                    </div>
                </div>

                <!-- Monthly Chart Section -->
                <div class="monthly-chart-section" style="margin-bottom: 30px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                        <h4 style="color: var(--primary); margin: 0; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-chart-bar"></i> Monthly Attendance Trend
                        </h4>
                        <div class="chart-controls" style="display: flex; gap: 10px;">
                            <select id="attendanceChartMonth" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="0">January</option>
                                <option value="1">February</option>
                                <option value="2">March</option>
                                <option value="3">April</option>
                                <option value="4">May</option>
                                <option value="5">June</option>
                                <option value="6">July</option>
                                <option value="7">August</option>
                                <option value="8">September</option>
                                <option value="9">October</option>
                                <option value="10">November</option>
                                <option value="11">December</option>
                            </select>
                            <select id="attendanceChartYear" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="2025">2025</option>
                                <option value="2024">2024</option>
                                <option value="2023">2023</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-container" style="background: #f8f9fa; padding: 20px; border-radius: 8px; min-height: 400px;">
                        <canvas id="attendanceChart" style="width: 100%; height: 350px;"></canvas>
                    </div>
                </div>

                <!-- Detailed Statistics -->
                <div class="detailed-stats-section">
                    <h4 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-list"></i> Detailed Statistics
                    </h4>
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div class="stat-item" style="background: #f8f9fa; padding: 15px; border-radius: 8px; color: #222;">
                            <div class="stat-header" style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                <i class="fas fa-users" style="color: var(--success);"></i>
                                <span style="font-weight: bold;">Members</span>
                            </div>
                            <div class="stat-details">
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Total Members:</span>
                                    <span id="totalMembersCount">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Present Today:</span>
                                    <span id="membersPresentToday">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Absent Today:</span>
                                    <span id="membersAbsentToday">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; color: #222;">
                                    <span>Attendance Rate:</span>
                                    <span id="membersAttendanceRate">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-item" style="background: #f8f9fa; padding: 15px; border-radius: 8px; color: #222;">
                            <div class="stat-header" style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                <i class="fas fa-user-tie" style="color: var(--primary);"></i>
                                <span style="font-weight: bold;">Trainers</span>
                            </div>
                            <div class="stat-details">
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Total Trainers:</span>
                                    <span id="totalTrainersCount">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Present Today:</span>
                                    <span id="trainersPresentToday">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Absent Today:</span>
                                    <span id="trainersAbsentToday">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; color: #222;">
                                    <span>Attendance Rate:</span>
                                    <span id="trainersAttendanceRate">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Photo Modal -->
    <div class="modal" id="uploadPhotoModal">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">Upload Gym Photo</h3>
            <!-- Removed the X close button -->
          </div>
          <form id="uploadGymPhotoForm" enctype="multipart/form-data" data-field="gymPhotos">
            <div class="modal-body">
              <div class="form-group">
                <label class="form-label" for="photoTitle">Photo Title</label>
                <input type="text" class="form-control" id="photoTitle" name="title" placeholder="Enter photo title" required>
              </div>
              <div class="form-group">
                <label class="form-label" for="photoDescription">Description</label>
                <textarea class="form-control" id="photoDescription" name="description" placeholder="Enter photo description" required></textarea>
              </div>
              <div class="form-group">
                <label class="form-label" for="photoFile">Upload Photo</label>
                <input type="file" id="photoFile" name="photo" accept="image/*" required>
              </div>
              <div class="form-group">
                <label class="form-label" for="photoCategory">Category</label>
                <select class="form-control" id="photoCategory" name="category" required>
                  <option>Gym Facility</option>
                  <option>Equipment</option>
                  <option>Classes</option>
                  <option>Events</option>
                </select>
              </div>
            </div>
            <div id="uploadPhotoMsg" style="margin-bottom: 10px; color: green; text-align: center;"></div>
              <div class="modal-footer">
              <button class="btn btn-secondary" id="cancelUploadPhotoBtn" type="button" style="margin-right:8px;">Cancel</button>
              <button class="btn btn-primary" type="submit">Upload Photo</button>
            </div>
          </form>
        </div>
      </div>
       <!-- Edit Gym Photo Modal -->
    <div class="modal" id="editPhotoModal" style="display:none;">
      <div class="modal-content">
        <span class="modal-close" id="closeEditPhotoModal">&times;</span>
        <form id="editPhotoForm" enctype="multipart/form-data">
          <input type="hidden" name="photoId" id="editPhotoId">
          <label for="editPhotoTitle">Title</label>
          <input type="text" name="title" id="editPhotoTitle" required>
          <label for="editPhotoDescription">Description</label>
          <textarea name="description" id="editPhotoDescription" required></textarea>
          <label for="editPhotoFile">Change Image (optional)</label>
          <input type="file" name="photo" id="editPhotoFile" accept="image/*">
          <div id="editPhotoPreview" style="margin: 10px 0;"></div>
          <div id="editPhotoMsg" style="margin-bottom: 10px; color: green; text-align: center;"></div>
           <button type="submit" style="background:#1976d2; color:#fff; border:none; padding:8px 20px; border-radius:4px; margin-right:8px;">Save</button>
          <button type="button" id="cancelEditPhotoBtn" class="btn btn-secondary" style="margin-right:8px;">Cancel</button>
        </form>
      </div>
    </div>

    <!-- Gym Profile Modal -->
    <div class="modal" id="gymProfileModal" style="display:none;">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 20px; border-bottom: 1px solid #eee;">
                <h2 style="margin: 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-building" style="color: var(--primary);"></i>
                    Gym Profile
                </h2>
                <span class="modal-close" id="closeGymProfileModal" style="font-size: 24px; cursor: pointer;">&times;</span>
            </div>
            
            <div style="padding: 20px;">
                <!-- View Mode / Edit Mode Toggle -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div class="mode-indicator" id="modeIndicator">
                        <span class="view-mode active" id="viewModeTab">
                            <i class="fas fa-eye"></i> View Mode
                        </span>
                        <span class="edit-mode" id="editModeTab">
                            <i class="fas fa-edit"></i> Edit Mode
                        </span>
                    </div>
                    <button id="toggleEditModeBtn" class="btn btn-primary">
                        <i class="fas fa-edit"></i> Enable Edit Mode
                    </button>
                </div>

                <!-- Gym Logo Section -->
                <div class="gym-logo-section" style="text-align: center; margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
                    <div class="logo-container" style="position: relative; display: inline-block;">
                        <div class="gym-logo-display" style="width: 120px; height: 120px; border-radius: 12px; background: white; display: flex; align-items: center; justify-content: center; border: 3px solid #dee2e6; margin: 0 auto;">
                            <img id="gymLogoImage" src="https://via.placeholder.com/120?text=GYM+LOGO" alt="Gym Logo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="logo-upload-overlay" id="logoUploadOverlay" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); border-radius: 12px; align-items: center; justify-content: center; cursor: pointer;">
                            <i class="fas fa-camera" style="color: white; font-size: 24px;"></i>
                        </div>
                    </div>
                    <input type="file" id="gymLogoInput" accept="image/*" style="display: none;">
                    <p style="margin-top: 10px; color: #6c757d; font-size: 14px;">Click to change gym logo (Edit Mode)</p>
                </div>

                <!-- Gym Information Form -->
                <form id="gymProfileForm">
                    <!-- Basic Information -->
                    <div class="info-section" style="margin-bottom: 30px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-info-circle"></i> Basic Information
                        </h3>
                        <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="gymName">Gym Name</label>
                                <input type="text" id="gymName" name="gymName" readonly>
                            </div>
                            <div class="form-group">
                                <label for="ownerName">Owner/Contact Person</label>
                                <input type="text" id="ownerName" name="contactPerson" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymEmail">Email</label>
                                <input type="email" id="gymEmail" name="email" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymPhone">Phone</label>
                                <input type="text" id="gymPhone" name="phone" readonly>
                            </div>
                            <div class="form-group">
                                <label for="supportEmail">Support Email</label>
                                <input type="email" id="supportEmail" name="supportEmail" readonly>
                            </div>
                            <div class="form-group">
                                <label for="supportPhone">Support Phone</label>
                                <input type="text" id="supportPhone" name="supportPhone" readonly>
                            </div>
                        </div>
                    </div>

                    <!-- Location Information -->
                    <div class="info-section" style="margin-bottom: 30px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-map-marker-alt"></i> Location
                        </h3>
                        <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group" style="grid-column: 1 / -1;">
                                <label for="gymAddress">Address</label>
                                <input type="text" id="gymAddress" name="address" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymCity">City</label>
                                <input type="text" id="gymCity" name="city" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymState">State</label>
                                <input type="text" id="gymState" name="state" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymPincode">Pincode</label>
                                <input type="text" id="gymPincode" name="pincode" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymLandmark">Landmark</label>
                                <input type="text" id="gymLandmark" name="landmark" readonly>
                            </div>
                        </div>
                    </div>

                    <!-- Operational Information -->
                    <div class="info-section" style="margin-bottom: 30px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-clock"></i> Operations
                        </h3>
                        <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="openingTime">Opening Time</label>
                                <input type="time" id="openingTime" name="openingTime" readonly>
                            </div>
                            <div class="form-group">
                                <label for="closingTime">Closing Time</label>
                                <input type="time" id="closingTime" name="closingTime" readonly>
                            </div>
                            <div class="form-group">
                                <label for="currentMembers">Current Members</label>
                                <input type="number" id="currentMembers" name="membersCount" readonly>
                            </div>
                           
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="info-section" style="margin-bottom: 30px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-align-left"></i> Description
                        </h3>
                        <div class="form-group">
                            <textarea id="gymDescription" name="description" rows="4" readonly style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"></textarea>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="modal-actions" style="display: flex; justify-content: flex-end; gap: 10px; padding-top: 20px; border-top: 1px solid #eee;">
                        <button type="button" id="cancelGymProfileBtn" class="btn btn-secondary" style="display: none;">Cancel</button>
                        <button type="submit" id="saveGymProfileBtn" class="btn btn-primary" style="display: none;">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal" id="changePasswordModal" style="display:none;">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 20px; border-bottom: 1px solid #eee;">
                <h2 style="margin: 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-lock" style="color: var(--primary);"></i>
                    Change Password
                </h2>
                <span class="modal-close" id="closeChangePasswordModal" style="font-size: 24px; cursor: pointer;">&times;</span>
            </div>
            
            <div style="padding: 20px;">
                <form id="changePasswordForm">
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label for="currentPassword">Current Password</label>
                        <div style="position: relative;">
                            <input type="password" id="currentPassword" name="currentPassword" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; padding-right: 40px;">
                            <i class="fas fa-eye toggle-password" data-target="currentPassword" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #6c757d;"></i>
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label for="newPassword">New Password</label>
                        <div style="position: relative;">
                            <input type="password" id="newPassword" name="newPassword" required minlength="8" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; padding-right: 40px;">
                            <i class="fas fa-eye toggle-password" data-target="newPassword" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #6c757d;"></i>
                        </div>
                        <small style="color: #6c757d;">Password must be at least 8 characters long</small>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label for="confirmPassword">Confirm New Password</label>
                        <div style="position: relative;">
                            <input type="password" id="confirmPassword" name="confirmPassword" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; padding-right: 40px;">
                            <i class="fas fa-eye toggle-password" data-target="confirmPassword" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #6c757d;"></i>
                        </div>
                    </div>

                    <!-- Password Strength Indicator -->
                    <div id="passwordStrength" style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span style="font-size: 14px; color: #6c757d;">Password Strength:</span>
                            <span id="strengthText" style="font-size: 14px; font-weight: bold;">Weak</span>
                        </div>
                        <div style="height: 4px; background: #eee; border-radius: 2px; overflow: hidden;">
                            <div id="strengthBar" style="height: 100%; width: 0%; background: #dc3545; transition: all 0.3s ease;"></div>
                        </div>
                    </div>

                    <div class="modal-actions" style="display: flex; justify-content: flex-end; gap: 10px; padding-top: 15px;">
                        <button type="button" id="cancelPasswordChangeBtn" class="btn btn-secondary">Cancel</button>
                        <button type="submit" id="savePasswordBtn" class="btn btn-primary">
                            <i class="fas fa-save"></i> Change Password
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

   >
   <!-- Password Confirmation Dialog -->
<div id="passwordConfirmDialog" class="modal" style="display:none;">
  <div class="modal-content" style="max-width:350px;">
    <span class="modal-close" id="closePasswordConfirmDialog">&times;</span>
    <form id="passwordConfirmForm">
      <label for="currentPassword">Please enter your current password to confirm changes:</label>
      <input type="password" id="currentPassword" name="currentPassword" required autocomplete="current-password">
      <button type="submit" class="btn btn-primary" style="margin-top:1rem;">Confirm</button>
    </form>
  </div>
</div>
   <!-- Delete Photo Confirmation Modal -->
<div class="modal" id="deletePhotoConfirmModal" style="display:none;">
  <div class="modal-content" style="max-width:340px; text-align:center;">
    <span class="modal-close" id="closeDeletePhotoConfirmModal" style="float:right;cursor:pointer;">&times;</span>
    <h3 style="margin-bottom:18px;">Delete Photo</h3>
    <p>Are you sure you want to delete this photo?</p>
    <div style="margin-top:18px;">
      <button id="confirmDeletePhotoBtn" class="btn btn-danger" style="margin-right:10px;">Delete</button>
      <button id="cancelDeletePhotoBtn" class="btn btn-secondary">Cancel</button>
    </div>
  </div>
</div>
<!-- Add Member Modal -->
<div class="modal" id="addMemberModal" style="display:none;">
  <div class="modal-content">
    <span class="modal-close" id="closeAddMemberModal">&times;</span>
    <h2>Add New Member</h2>
    <form id="addMemberForm" enctype="multipart/form-data">
      <div class="form-group" style="display: flex; flex-direction: column; align-items: center;">
        <label for="memberProfileImage" style="margin-bottom: 0.5rem;">Profile Image</label>
        <div id="memberImagePreview" style="width: 96px; height: 96px; border-radius: 50%; background: #f0f0f0; overflow: hidden; display: flex; align-items: center; justify-content: center; margin-bottom: 0.5rem;">
          <img src="https://via.placeholder.com/96?text=Photo" alt="Preview" style="width: 96px; height: 96px; object-fit: cover; border-radius: 50%;" id="memberImageTag">
        </div>
        <input type="file" id="memberProfileImage" name="profileImage" accept="image/*" style="display:none;">
        <button type="button" id="uploadMemberImageBtn" style="margin-bottom: 0.5rem;">Choose Image</button>
      </div>
      <div class="form-group">
        <label for="memberName">Name</label>
        <input type="text" id="memberName" name="memberName" required>
      </div>
      <div class="form-group">
        <label for="memberAge">Age</label>
        <input type="number" id="memberAge" name="memberAge" min="10" max="100" required>
      </div>
      <div class="form-group">
        <label for="memberGender">Gender</label>
        <select id="memberGender" name="memberGender" required>
          <option value="">Select</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
      </div>
      <div class="form-group">
        <label for="memberPhone">Phone No.</label>
        <input type="tel" id="memberPhone" name="memberPhone" pattern="[0-9]{10}" required>
      </div>
      <div class="form-group">
        <label for="memberEmail">Email</label>
        <input type="email" id="memberEmail" name="memberEmail" required>
      </div>
      <div class="form-group">
        <label for="memberAddress">Address</label>
        <input type="text" id="memberAddress" name="memberAddress" placeholder="Street, City, State" required>
      </div>
      <div class="form-group">
        <label for="paymentMode">Payment Mode</label>
        <select id="paymentMode" name="paymentMode" required>
          <option value="">Select</option>
          <option value="Cash">Cash</option>
          <option value="Card">Card</option>
          <option value="UPI">UPI</option>
          <option value="Online">Online</option>
        </select>
      </div>
      <div class="form-group">
        <label for="planSelected">Plan Selected</label>
        <select id="planSelected" name="planSelected" required>
          <option value="">Select</option>
          <option value="Basic">Basic</option>
          <option value="Standard">Standard</option>
          <option value="Premium">Premium</option>
        </select>
      </div>
      <div class="form-group">
        <label for="monthlyPlan">Monthly Plan</label>
        <select id="monthlyPlan" name="monthlyPlan" required>
          <option value="">Select</option>
          <option value="1 Month">1 Month</option>
          <option value="3 Months">3 Months</option>
          <option value="6 Months">6 Months</option>
          <option value="12 Months">12 Months</option>
        </select>
      </div>
       <div class="form-group">
        <label for="paymentAmount">Payment Amount</label>
        <input type="number" id="paymentAmount" name="paymentAmount" min="0" required>
        <div id="discountInfo" style="margin-top: 8px; padding: 8px; border-radius: 4px; font-size: 0.9em; display: none;">
          <i class="fas fa-tag"></i> <span id="discountText">No discount applied</span>
        </div>
      </div>
      <div class="form-group">
        <label for="activityPreference">Activity Preference</label>
        <select id="activityPreference" name="activityPreference" required>
          <option value="">Select Activity</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">Add Member</button>
      <div id="addMemberSuccessMsg" style="display:none;"></div>
    </form>
  </div>
</div>

<!-- Renew Membership Modal -->
<div class="modal" id="renewMembershipModal" style="display:none;">
  <div class="modal-content" style="max-width:600px;">
    <span class="modal-close" id="closeRenewMembershipModal">&times;</span>
    <h2 style="text-align:center;color:#1976d2;margin-bottom:1.5rem;">🔄 Renew Membership</h2>
    
    <!-- Member Info Display -->
    <div id="renewMemberInfo" style="background:#f8f9fa;padding:1rem;border-radius:8px;margin-bottom:1.5rem;border-left:4px solid #1976d2;">
      <h4 style="margin:0 0 0.5rem 0;color:#333;">Member Details</h4>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.5rem;font-size:0.9rem;">
        <div><strong>Name:</strong> <span id="renewMemberName"></span></div>
        <div><strong>ID:</strong> <span id="renewMembershipId"></span></div>
        <div><strong>Current Plan:</strong> <span id="renewCurrentPlan"></span></div>
        <div><strong>Expires:</strong> <span id="renewExpiryDate"></span></div>
      </div>
    </div>

    <form id="renewMembershipForm">
      <input type="hidden" id="renewMemberId" name="memberId">
      
      <div class="form-group">
        <label for="renewPlanSelected">New Plan</label>
        <select id="renewPlanSelected" name="planSelected" required>
          <option value="">Select Plan</option>
          <option value="Basic">Basic</option>
          <option value="Standard">Standard</option>
          <option value="Premium">Premium</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="renewMonthlyPlan">Duration</label>
        <select id="renewMonthlyPlan" name="monthlyPlan" required>
          <option value="">Select Duration</option>
          <option value="1 Month">1 Month</option>
          <option value="3 Months">3 Months</option>
          <option value="6 Months">6 Months</option>
          <option value="12 Months">12 Months</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="renewPaymentAmount">Payment Amount</label>
        <input type="number" id="renewPaymentAmount" name="paymentAmount" min="0" required readonly style="background:#f5f5f5;">
        <small style="color:#666;font-size:0.85em;">Amount calculated automatically based on plan and duration</small>
        <div id="renewDiscountInfo" style="margin-top: 8px; padding: 8px; border-radius: 4px; font-size: 0.9em; display: none;">
          <i class="fas fa-tag"></i> <span id="renewDiscountText">No discount applied</span>
        </div>
      </div>
      
      <div class="form-group">
        <label for="renewPaymentMode">Payment Mode</label>
        <select id="renewPaymentMode" name="paymentMode" required>
          <option value="">Select Payment Mode</option>
          <option value="Cash">Cash</option>
          <option value="Card">Card</option>
          <option value="UPI">UPI</option>
          <option value="Online">Online</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="renewActivityPreference">Activity Preference</label>
        <input type="text" id="renewActivityPreference" name="activityPreference" placeholder="e.g. Yoga, Cardio, Zumba" required>
      </div>
      
      <div style="display:flex;gap:1rem;justify-content:center;margin-top:1.5rem;">
        <button type="button" id="cancelRenewMembership" class="btn btn-secondary">Cancel</button>
        <button type="submit" class="btn btn-primary" id="renewMembershipBtn" style="display:flex;align-items:center;gap:8px;transition:color .2s;">
          <i class="fas fa-redo-alt" style="transition:transform .2s;"></i>
          <span>Renew Membership</span>
        </button>
      </div>
    </form>
  </div>
</div>

<!-- QR Code Generator Modal -->
<div class="modal" id="qrCodeGeneratorModal" style="display:none;z-index:10003;">
  <div class="modal-content" style="max-width:600px; max-height:90vh; overflow-y:auto;">
    <div class="modal-header" style="display:flex;align-items:center;justify-content:space-between;padding:20px;border-bottom:1px solid #eee;">
      <h3 style="margin:0;color:var(--primary);display:flex;align-items:center;gap:12px;">
        <i class="fas fa-qrcode"></i> QR Code Generator - Member Registration
      </h3>
      <button class="modal-close" id="closeQRCodeModal" style="background:none;border:none;font-size:24px;cursor:pointer;">&times;</button>
    </div>
    <div class="modal-body" style="padding:20px;">
      
      <!-- QR Code Configuration -->
      <div class="qr-config-section" style="margin-bottom:25px;">
        <h4 style="color:#333;margin-bottom:15px;display:flex;align-items:center;gap:8px;">
          <i class="fas fa-cog"></i> QR Code Configuration
        </h4>
        
        <div class="form-group" style="margin-bottom:15px;">
          <label style="display:block;font-weight:600;margin-bottom:5px;">Registration Type:</label>
          <select id="qrRegistrationType" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;">
            <option value="standard">Standard Registration</option>
            <option value="trial">Trial Membership (3 Days)</option>
            <option value="premium">Premium Registration</option>
          </select>
        </div>
        
        <div class="form-group" style="margin-bottom:15px;">
          <label style="display:block;font-weight:600;margin-bottom:5px;">Default Plan:</label>
          <select id="qrDefaultPlan" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;">
            <option value="">Let User Choose</option>
            <option value="basic">Basic Plan</option>
            <option value="standard">Standard Plan</option>
            <option value="premium">Premium Plan</option>
          </select>
        </div>
        
        <div class="form-group" style="margin-bottom:15px;">
          <label style="display:block;font-weight:600;margin-bottom:5px;">Usage Limit:</label>
          <select id="qrUsageLimit" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;">
            <option value="1">One-Time Use</option>
            <option value="5">5 Uses</option>
            <option value="10">10 Uses</option>
            <option value="unlimited">Unlimited</option>
          </select>
        </div>
        
        <div class="form-group" style="margin-bottom:15px;">
          <label style="display:block;font-weight:600;margin-bottom:5px;">Expiry Date:</label>
          <input type="datetime-local" id="qrExpiryDate" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;">
        </div>
        
        <div class="form-group" style="margin-bottom:15px;">
          <label style="display:block;font-weight:600;margin-bottom:5px;">Special Offer/Discount:</label>
          <input type="text" id="qrSpecialOffer" placeholder="e.g., 20% off first month" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;">
        </div>
      </div>
      
      <!-- Generate Button -->
      <div style="text-align:center;margin-bottom:25px;">
        <button id="generateQRBtn" class="btn btn-primary" style="padding:12px 30px;font-size:16px;display:flex;align-items:center;gap:10px;margin:0 auto;">
          <i class="fas fa-magic"></i> Generate QR Code
        </button>
      </div>
      
      <!-- QR Code Display -->
      <div id="qrCodeDisplay" style="display:none;">
        <div class="qr-code-section" style="background:#f8f9fa;padding:25px;border-radius:12px;text-align:center;margin-bottom:20px;">
          <h4 style="color:#333;margin-bottom:20px;display:flex;align-items:center;justify-content:center;gap:8px;">
            <i class="fas fa-qrcode"></i> Generated QR Code
          </h4>
          
          <!-- QR Code Canvas -->
          <div id="qrCodeCanvas" style="margin:0 auto 20px;padding:20px;background:white;border-radius:8px;display:inline-block;box-shadow:0 4px 12px rgba(0,0,0,0.1);"></div>
          
          <!-- QR Code Info -->
          <div class="qr-info-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin:20px 0;">
            <div class="qr-info-item" style="background:white;padding:15px;border-radius:8px;text-align:center;">
              <i class="fas fa-link" style="color:#3b82f6;font-size:24px;margin-bottom:8px;"></i>
              <div style="font-weight:600;color:#333;margin-bottom:5px;">Registration URL</div>
              <div id="qrUrl" style="font-size:12px;color:#666;word-break:break-all;"></div>
            </div>
            <div class="qr-info-item" style="background:white;padding:15px;border-radius:8px;text-align:center;">
              <i class="fas fa-clock" style="color:#f59e0b;font-size:24px;margin-bottom:8px;"></i>
              <div style="font-weight:600;color:#333;margin-bottom:5px;">Expires On</div>
              <div id="qrExpiryDisplay" style="font-size:14px;color:#666;"></div>
            </div>
            <div class="qr-info-item" style="background:white;padding:15px;border-radius:8px;text-align:center;">
              <i class="fas fa-users" style="color:#10b981;font-size:24px;margin-bottom:8px;"></i>
              <div style="font-weight:600;color:#333;margin-bottom:5px;">Usage Limit</div>
              <div id="qrUsageDisplay" style="font-size:14px;color:#666;"></div>
            </div>
            <div class="qr-info-item" style="background:white;padding:15px;border-radius:8px;text-align:center;">
              <i class="fas fa-chart-line" style="color:#8b5cf6;font-size:24px;margin-bottom:8px;"></i>
              <div style="font-weight:600;color:#333;margin-bottom:5px;">Usage Count</div>
              <div id="qrUsageCount" style="font-size:14px;color:#666;">0 times used</div>
            </div>
          </div>
          
          <!-- Action Buttons -->
          <div style="display:flex;gap:10px;justify-content:center;margin-top:20px;flex-wrap:wrap;">
            <button id="downloadQRBtn" class="btn btn-success" style="display:flex;align-items:center;gap:8px;">
              <i class="fas fa-download"></i> Download QR Code
            </button>
            <button id="copyQRUrlBtn" class="btn btn-secondary" style="display:flex;align-items:center;gap:8px;">
              <i class="fas fa-copy"></i> Copy URL
            </button>
            <button id="shareQRBtn" class="btn btn-info" style="display:flex;align-items:center;gap:8px;">
              <i class="fas fa-share"></i> Share
            </button>
            <button id="printQRBtn" class="btn btn-warning" style="display:flex;align-items:center;gap:8px;">
              <i class="fas fa-print"></i> Print
            </button>
          </div>
        </div>
        
        <!-- Usage Statistics -->
        <div class="qr-stats-section" style="background:#f8f9fa;padding:20px;border-radius:12px;">
          <h4 style="color:#333;margin-bottom:15px;display:flex;align-items:center;gap:8px;">
            <i class="fas fa-chart-bar"></i> Usage Statistics
          </h4>
          <div id="qrStatsContent">
            <p style="color:#666;text-align:center;margin:0;">Statistics will appear here once the QR code is used.</p>
          </div>
        </div>
      </div>
      
      <!-- Active QR Codes List -->
      <div class="active-qr-section" style="margin-top:25px;">
        <h4 style="color:#333;margin-bottom:15px;display:flex;align-items:center;gap:8px;">
          <i class="fas fa-list"></i> Active QR Codes
        </h4>
        <div id="activeQRList" style="max-height:200px;overflow-y:auto;">
          <!-- Active QR codes will be listed here -->
        </div>
      </div>
      
    </div>
  </div>
</div>

 <!-- Trainer Registration Modal (Quick Action) -->
    <div class="modal" id="trainerRegistrationModal" style="display:none;">
      <div class="modal-content">
        <span class="modal-close" id="closeTrainerRegistrationModal">&times;</span>
        <h2 style="text-align:center;">Trainer Registration</h2>
        <!-- Profile Image Upload at Top Center -->
        <div class="form-group" style="display: flex; flex-direction: column; align-items: center; margin-bottom: 1.5rem; margin-top: 1rem;">
          <label for="trainerProfileImage" style="margin-bottom: 0.5rem;">Profile Image</label>
          <div id="trainerImagePreview" style="width: 96px; height: 96px; border-radius: 50%; background: #f0f0f0; overflow: hidden; display: flex; align-items: center; justify-content: center; margin-bottom: 0.5rem;">
            <img src="https://via.placeholder.com/96?text=Photo" alt="Preview" style="width: 96px; height: 96px; object-fit: cover; border-radius: 50%;" id="trainerImageTag">
          </div>
          <input type="file" id="trainerProfileImage" name="profileImage" accept="image/*" style="display:none;">
          <button type="button" id="uploadTrainerImageBtn" style="margin-bottom: 0.5rem;">Choose Image</button>
        </div>
        <form class="registration-form" id="trainerRegistrationForm" enctype="multipart/form-data" action="javascript:void(0);">
          <div class="form-row">
            <div class="form-col">
              <label for="trainerFirstName">First Name</label>
              <input type="text" id="trainerFirstName" name="firstName" required>
            </div>
            <div class="form-col">
              <label for="trainerLastName">Last Name</label>
              <input type="text" id="trainerLastName" name="lastName" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerEmail">Email Address</label>
              <input type="email" id="trainerEmail" name="email" required>
            </div>
            <div class="form-col">
              <label for="trainerPhone">Phone Number</label>
              <input type="tel" id="trainerPhone" name="phone" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerSpecialty">Primary Specialty</label>
              <select id="trainerSpecialty" name="specialty" required>
                <option value="">Select specialty of Trainer</option>
                <option value="Weight Loss">Weight Loss</option>
                <option value="Bodybuilding">Bodybuilding</option>
                <option value="Functional Training">Functional Training</option>
                <option value="Sports Performance">Sports Performance</option>
                <option value="Rehabilitation">Rehabilitation</option>
              </select>
            </div>
            <div class="form-col">
              <label for="trainerExperience">Years of Experience</label>
              <input type="number" id="trainerExperience" min="0" name="experience" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerAvailability">Availability</label>
              <div id="availabilityFieldset" style="display:flex;flex-direction:column;gap:8px;">
                <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap;">
                  <span style="font-weight:400;">Quick:</span>
                  <button type="button" class="btn btn-secondary" id="setAllMorning">All Mornings</button>
                  <button type="button" class="btn btn-secondary" id="setAllAfternoon">All Afternoons</button>
                  <button type="button" class="btn btn-secondary" id="setAllEvening">All Evenings</button>
                  <button type="button" class="btn btn-secondary" id="clearAllAvailability">Clear</button>
                </div>
                <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px;">
                  <div><label for="availMonday">Monday</label><input type="text" id="availMonday" class="day-availability" data-day="Monday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availTuesday">Tuesday</label><input type="text" id="availTuesday" class="day-availability" data-day="Tuesday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availWednesday">Wednesday</label><input type="text" id="availWednesday" class="day-availability" data-day="Wednesday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availThursday">Thursday</label><input type="text" id="availThursday" class="day-availability" data-day="Thursday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availFriday">Friday</label><input type="text" id="availFriday" class="day-availability" data-day="Friday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availSaturday">Saturday</label><input type="text" id="availSaturday" class="day-availability" data-day="Saturday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availSunday">Sunday</label><input type="text" id="availSunday" class="day-availability" data-day="Sunday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                </div>
                <textarea id="trainerAvailability" name="availability" style="margin-top:8px;" placeholder="Or describe your typical availability (optional)"></textarea>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerCertifications">Certifications</label>
              <div class="certification-upload">
                <p>Upload copies of certifications (PDF, JPG, or PNG)</p>
                <input type="file" id="trainerCertifications" multiple accept=".pdf,.jpg,.jpeg,.png" name="certifications" />
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerBio">Professional Bio</label>
              <textarea id="trainerBio" placeholder="write training philosophy and approach" name="bio"></textarea>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerRate">Hourly Rate (₹)</label>
              <input type="number" id="trainerRate" min="0" step="5" name="rate" required>
            </div>
          </div>
          <div id="trainerFormResponseMessage" style="display: none; margin-top: 15px; padding: 10px; border-radius: 5px;"></div>
          <div class="form-actions" style="margin-top: 20px; text-align: right;">
            <button type="submit" class="btn btn-primary" id="submitTrainerRegistrationBtn">Register Profile</button>
          </div>
        </form>
        <div id="trainer-registration-success-message" style="display: none; margin-top: 20px; padding: 15px; border-radius: 8px; text-align: center; background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;">
          <h4 style="margin-top: 0; margin-bottom: 10px;">🎉 Registration Submitted!</h4>
          <p style="margin-bottom: 5px;">Your application is now awaiting admin approval.</p>
          <p>You'll receive an email soon with the status.</p>
        </div>
      </div>
    </div>
<!-- Member Display Tab (hidden by default) -->
<div id="memberDisplayTab" style="display:none; padding: 24px;">
  <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 18px;">
    <h2 style="color: var(--primary); margin: 0;">All Members</h2>
    <div class="member-action-btn-group">
      <button id="addMemberBtnTab" class="member-action-btn add-member-action-btn">
        <i class="fas fa-user-plus"></i><span class="btn-text"> Add Member</span>
      </button>
      <button id="removeMemberBtnTab" class="member-action-btn remove-member-action-btn">
        <i class="fas fa-user-minus"></i><span class="btn-text"> Remove Members</span>
      </button>
      <!-- Remove Member dropdown and modal will be created and managed by JS only -->
    </div>
  </div>
  <div class="search-bar" style="display:flex;align-items:center;gap:12px;margin-bottom:18px;background:#f8f9fa;padding:10px 18px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.04);">
    <span class="search-icon" style="color:var(--primary);font-size:1.2rem;margin-right:6px;"><i class="fas fa-search"></i></span>
    <input type="text" id="memberSearchInput" placeholder="Search by Name, Email, Phone, Membership ID..." style="flex:1;padding:8px 12px;border:1px solid #d0d7de;border-radius:6px;font-size:1rem;outline:none;transition:border 0.2s;">
    <select id="membershipExpiryFilter" style="padding:8px 12px;border:1px solid #d0d7de;border-radius:6px;font-size:1rem;background:#fff;">
      <option value="">All Members</option>
      <option value="3days">Expiring in 3 Days</option>
      <option value="1day">Expiring in 1 Day</option>
    </select>
  </div>
  <div id="membersTableContainer">
    <table id="membersTable" style="width:100%; border-collapse:collapse;">
      <thead>
        <tr>
          <th>Profile</th>
          <th>Name</th>
          <th>Membership ID</th>
          <th>Age</th>
          <th>Gender</th>
          <th>Phone</th>
          <th>Email</th>
          <th>Address</th>
          <th>Plan</th>
          <th>Monthly</th>
          <th>Activity</th>
          <th>Join Date</th>
          <th>Valid Until</th>
          <th>Amount Paid</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="membersTableBody">
        <!-- Members will be loaded here -->
       
      </tbody>
    </table>
  </div>
</div>
<!-- Interactive Members Detail Card (hidden by default) -->
<div id="membersDetailCard" class="modal">
  <div class="modal-content member-detail-modal">
    <div class="member-detail-header" style="position:relative;">
      <button id="editMemberDetailBtn" title="Edit Member" style="position:absolute;left:18px;top:16px;background:none;border:none;cursor:pointer;font-size:1.25rem;color:#fff;z-index:3;transition:color 0.2s;"><i class="fas fa-edit"></i></button>
      <h2 class="member-detail-title" style="margin-left:32px;">
        <i class="fas fa-id-card-alt"></i> Member Details
      </h2>
      <button id="closeMembersDetailCard" class="modal-close" title="Close">&times;</button>
    </div>
    <div id="memberDetailDynamicContent">
      <!-- Dynamic content injected by JS -->
    </div>
  </div>
</div>
<!-- Trainer Tab -->
<div id="trainerTab" style="display:none; padding: 24px;">
  <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 18px;">
    <h2 style="color: var(--primary); margin: 0;">Trainers</h2>
  </div>
  <div class="trainer-tab-section" style="height:calc(100vh - 180px);display:flex;flex-direction:column;">
    <div class="trainer-tab-nav" style="display:flex;gap:18px;margin-bottom:18px;">
      <button class="trainer-tab-btn" id="approvedTrainersBtn" style="flex:1;padding:8px 18px;border-radius:6px;border:none;background:var(--success);color:#fff;font-weight:600;">Approved</button>
      <button class="trainer-tab-btn" id="pendingTrainersBtn" style="flex:1;padding:8px 18px;border-radius:6px;border:none;background:var(--warning);color:#fff;font-weight:600;">Pending Approval</button>
      <button class="trainer-tab-btn" id="rejectedTrainersBtn" style="flex:1;padding:8px 18px;border-radius:6px;border:none;background:var(--danger);color:#fff;font-weight:600;">Rejected</button>
    </div>
    <div id="trainerGridContainer" style="flex:1;display:block;width:100%;">
      <div id="pendingTrainersGrid" class="trainer-grid" style="display:none;width:100%;overflow:auto;padding:8px 0;box-sizing:border-box;"></div>
      <div id="approvedTrainersGrid" class="trainer-grid" style="display:none;width:100%;overflow:auto;padding:8px 0;box-sizing:border-box;"></div>
      <div id="rejectedTrainersGrid" class="trainer-grid" style="display:none;width:100%;overflow:auto;padding:8px 0;box-sizing:border-box;"></div>
    </div>
   
  </div>
</div>


<!-- Support & Reviews Tab -->
<div id="supportReviewsTab" style="display:none; padding: 24px;">
  <div class="support-reviews-header" style="margin-bottom: 24px;">
    <h2 style="color: var(--primary); margin: 0; display: flex; align-items: center; gap: 12px;">
      <i class="fas fa-headset"></i> Support & Reviews Center
    </h2>
    <p style="color: #666; margin: 8px 0 0 0;">Manage notifications, reviews, ratings, and member queries</p>
  </div>

  <!-- Tab Navigation -->
  <div class="support-tab-navigation" style="display: flex; gap: 8px; margin-bottom: 24px; border-bottom: 2px solid #f0f0f0; padding-bottom: 16px;">
    <button class="support-nav-btn active" data-tab="notifications" style="padding: 12px 20px; border: none; background: #1976d2; color: white; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
      <i class="fas fa-bell"></i> Notifications
    </button>
    <button class="support-nav-btn" data-tab="reviews" style="padding: 12px 20px; border: 1px solid #ddd; background: white; color: #666; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
      <i class="fas fa-star"></i> Reviews & Ratings
    </button>
    <button class="support-nav-btn" data-tab="member-queries" style="padding: 12px 20px; border: 1px solid #ddd; background: white; color: #666; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
      <i class="fas fa-question-circle"></i> Member Queries
    </button>
    <button class="support-nav-btn" data-tab="grievances" style="padding: 12px 20px; border: 1px solid #ddd; background: white; color: #666; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
      <i class="fas fa-exclamation-triangle"></i> Grievances
    </button>
  </div>

  <!-- Notifications Section -->
  <div id="notificationsSection" class="support-tab-content">
    <div class="notifications-grid" style="display: grid; grid-template-columns: 1fr 2fr; gap: 24px;">
      <!-- Notification Stats -->
      <div class="notification-stats-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.1);">
        <h3 style="margin: 0 0 16px 0; color: #333; display: flex; align-items: center; gap: 8px;">
          <i class="fas fa-chart-line" style="color: #1976d2;"></i> Notification Overview
        </h3>
        <div class="notification-stats-grid" style="display: grid; gap: 16px;">
          <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f8f9fa; border-radius: 8px;">
            <span style="font-weight: 600; color: #666;">Total Notifications</span>
            <span id="totalNotificationsCount" style="font-size: 18px; font-weight: 700; color: #1976d2;">0</span>
          </div>
          <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #fff3cd; border-radius: 8px;">
            <span style="font-weight: 600; color: #856404;">Unread</span>
            <span id="unreadNotificationsCount" style="font-size: 18px; font-weight: 700; color: #f57c00;">0</span>
          </div>
          <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #d1ecf1; border-radius: 8px;">
            <span style="font-weight: 600; color: #0c5460;">System Updates</span>
            <span id="systemNotificationsCount" style="font-size: 18px; font-weight: 700; color: #17a2b8;">0</span>
          </div>
          <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f8d7da; border-radius: 8px;">
            <span style="font-weight: 600; color: #721c24;">High Priority</span>
            <span id="highPriorityNotificationsCount" style="font-size: 18px; font-weight: 700; color: #dc3545;">0</span>
          </div>
        </div>
        <div style="margin-top: 20px;">
          <button id="markAllNotificationsRead" style="width: 100%; padding: 12px; background: #28a745; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">
            <i class="fas fa-check-double"></i> Mark All as Read
          </button>
        </div>
      </div>

      <!-- Notifications List -->
      <div class="notifications-list-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); max-height: 600px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
          <h3 style="margin: 0; color: #333; display: flex; align-items: center; gap: 8px;">
            <i class="fas fa-inbox"></i> Recent Notifications
          </h3>
          <div style="display: flex; gap: 8px;">
            <select id="notificationFilterType" style="padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
              <option value="all">All Types</option>
              <option value="system">System</option>
              <option value="membership">Membership</option>
              <option value="payment">Payment</option>
              <option value="admin">Admin</option>
            </select>
            <select id="notificationFilterStatus" style="padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
              <option value="all">All Status</option>
              <option value="unread">Unread</option>
              <option value="read">Read</option>
            </select>
          </div>
        </div>
        <div id="notificationsList" style="max-height: 480px; overflow-y: auto;">
          <!-- Notifications will be loaded here -->
          <div class="loading-state" style="text-align: center; padding: 40px; color: #666;">
            <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 12px;"></i>
            <p>Loading notifications...</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Reviews & Ratings Section -->
  <div id="reviewsSection" class="support-tab-content" style="display: none;">
    <div class="reviews-grid" style="display: grid; grid-template-columns: 1fr 2fr; gap: 24px;">
      <!-- Review Stats -->
      <div class="review-stats-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.1);">
        <h3 style="margin: 0 0 16px 0; color: #333; display: flex; align-items: center; gap: 8px;">
          <i class="fas fa-star" style="color: #ffa726;"></i> Review Overview
        </h3>
        <div class="review-overview" style="text-align: center; margin-bottom: 24px; padding: 20px; background: linear-gradient(135deg, #ffa726 0%, #ff7043 100%); border-radius: 12px; color: white;">
          <div style="font-size: 48px; font-weight: 700; margin-bottom: 8px;" id="averageRatingDisplay">0.0</div>
          <div style="font-size: 18px; margin-bottom: 8px;">
            <span id="ratingStarsDisplay">☆☆☆☆☆</span>
          </div>
          <div style="font-size: 14px; opacity: 0.9;">
            Based on <span id="totalReviewsCount">0</span> reviews
          </div>
        </div>
        <div class="rating-breakdown" style="margin-bottom: 20px;">
          <h4 style="margin: 0 0 12px 0; color: #333;">Rating Breakdown</h4>
          <div id="ratingBreakdown">
            <!-- Rating breakdown will be populated here -->
          </div>
        </div>
        <div class="review-actions" style="display: grid; gap: 12px;">
          <button id="refreshReviews" style="padding: 12px; background: #1976d2; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">
            <i class="fas fa-sync-alt"></i> Refresh Reviews
          </button>
          <button id="exportReviews" style="padding: 12px; background: #28a745; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">
            <i class="fas fa-download"></i> Export Reviews
          </button>
        </div>
      </div>

      <!-- Reviews List -->
      <div class="reviews-list-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); max-height: 600px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
          <h3 style="margin: 0; color: #333; display: flex; align-items: center; gap: 8px;">
            <i class="fas fa-comments"></i> Member Reviews
          </h3>
          <div style="display: flex; gap: 8px;">
            <select id="reviewFilterRating" style="padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
              <option value="all">All Ratings</option>
              <option value="5">5 Stars</option>
              <option value="4">4 Stars</option>
              <option value="3">3 Stars</option>
              <option value="2">2 Stars</option>
              <option value="1">1 Star</option>
            </select>
            <select id="reviewFilterReply" style="padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
              <option value="all">All Reviews</option>
              <option value="replied">Replied</option>
              <option value="pending">Pending Reply</option>
            </select>
          </div>
        </div>
        <div id="reviewsList" style="max-height: 480px; overflow-y: auto;">
          <!-- Reviews will be loaded here -->
          <div class="loading-state" style="text-align: center; padding: 40px; color: #666;">
            <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 12px;"></i>
            <p>Loading reviews...</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Member Queries Section -->
  <div id="memberQueriesSection" class="support-tab-content" style="display: none;">
    <div class="member-queries-placeholder" style="background: white; padding: 40px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); text-align: center;">
      <div style="font-size: 64px; color: #ddd; margin-bottom: 16px;">
        <i class="fas fa-tools"></i>
      </div>
      <h3 style="color: #666; margin-bottom: 12px;">Member Queries Section</h3>
      <p style="color: #999; margin-bottom: 24px;">This section will handle member support tickets, inquiries, and direct communication.</p>
      <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: left; max-width: 600px; margin: 0 auto;">
        <h4 style="color: #333; margin-bottom: 12px;">Planned Features:</h4>
        <ul style="color: #666; line-height: 1.6;">
          <li>Direct messaging system with members</li>
          <li>Support ticket management</li>
          <li>FAQ management</li>
          <li>Query categorization and prioritization</li>
          <li>Response templates and automation</li>
          <li>Member communication history</li>
        </ul>
      </div>
      <button style="margin-top: 24px; padding: 12px 24px; background: #1976d2; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;" disabled>
        <i class="fas fa-wrench"></i> Coming Soon
      </button>
    </div>
  </div>

  <!-- Grievances Section -->
  <div id="grievancesSection" class="support-tab-content" style="display: none;">
    <div class="grievances-placeholder" style="background: white; padding: 40px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); text-align: center;">
      <div style="font-size: 64px; color: #dc3545; margin-bottom: 16px;">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <h3 style="color: #666; margin-bottom: 12px;">Grievances Management</h3>
      <p style="color: #999; margin-bottom: 24px;">This section will handle member grievances, complaints, and resolution tracking.</p>
      <div style="background: #fff5f5; padding: 20px; border-radius: 8px; text-align: left; max-width: 600px; margin: 0 auto; border: 1px solid #fed7d7;">
        <h4 style="color: #333; margin-bottom: 12px;">Planned Features:</h4>
        <ul style="color: #666; line-height: 1.6;">
          <li>Grievance submission and tracking</li>
          <li>Priority-based escalation system</li>
          <li>Resolution workflow management</li>
          <li>Admin communication interface</li>
          <li>Grievance analytics and reporting</li>
          <li>Follow-up and closure tracking</li>
        </ul>
      </div>
      <button style="margin-top: 24px; padding: 12px 24px; background: #dc3545; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;" disabled>
        <i class="fas fa-wrench"></i> Implementation Pending
      </button>
    </div>
  </div>
</div>

<!-- Review Reply Modal -->
<div id="reviewReplyModal" class="modal" style="display: none;">
  <div class="modal-content" style="max-width: 600px;">
    <div class="modal-header">
      <h3 style="margin: 0; display: flex; align-items: center; gap: 8px;">
        <i class="fas fa-reply"></i> Reply to Review
      </h3>
      <span class="modal-close" id="closeReviewReplyModal">&times;</span>
    </div>
    <div class="modal-body">
      <div id="reviewDetailsDisplay" style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 20px;">
        <!-- Review details will be displayed here -->
      </div>
      <div class="form-group">
        <label for="adminReplyText" style="display: block; margin-bottom: 8px; font-weight: 600;">Your Reply:</label>
        <textarea id="adminReplyText" rows="4" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-family: inherit; resize: vertical;" placeholder="Write your professional reply to this review..."></textarea>
        <small style="color: #666; font-size: 12px;">This reply will be visible to all users viewing this review.</small>
      </div>
    </div>
    <div class="modal-footer">
      <button id="cancelReviewReply" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 4px; margin-right: 8px; cursor: pointer;">Cancel</button>
      <button id="submitReviewReply" style="padding: 10px 20px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer;">
        <i class="fas fa-paper-plane"></i> Send Reply
      </button>
    </div>
  </div>
</div>

<!-- Equipment Tab -->
<div id="equipmentTab" style="display:none; padding: 24px;">
  <div class="page-header" style="margin-bottom: 30px;">
    <h1 class="page-title">
      <i class="fas fa-dumbbell"></i> Equipment Management
    </h1>
    <div class="equipment-header-actions">
      <button id="addEquipmentBtn" class="add-equipment-btn">
        <i class="fas fa-plus"></i> Add Equipment
      </button>
      <button id="bulkImportBtn" class="bulk-import-btn">
        <i class="fas fa-upload"></i> Bulk Import
      </button>
    </div>
  </div>

  <!-- Equipment Statistics -->
  <div class="equipment-stats-grid">
    <div class="equipment-stat-card">
      <div class="stat-icon">
        <i class="fas fa-dumbbell"></i>
      </div>
      <div class="stat-content">
        <h3 id="totalEquipmentCount">0</h3>
        <p>Total Equipment</p>
      </div>
    </div>
    <div class="equipment-stat-card">
      <div class="stat-icon available">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="stat-content">
        <h3 id="availableEquipmentCount">0</h3>
        <p>Available</p>
      </div>
    </div>
    <div class="equipment-stat-card">
      <div class="stat-icon maintenance">
        <i class="fas fa-tools"></i>
      </div>
      <div class="stat-content">
        <h3 id="maintenanceEquipmentCount">0</h3>
        <p>Under Maintenance</p>
      </div>
    </div>
    <div class="equipment-stat-card">
      <div class="stat-icon out-of-order">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <div class="stat-content">
        <h3 id="outOfOrderEquipmentCount">0</h3>
        <p>Out of Order</p>
      </div>
    </div>
  </div>

  <!-- Equipment Filters and Search -->
  <div class="equipment-controls">
    <div class="equipment-search">
      <input type="text" id="equipmentSearchInput" placeholder="Search equipment by name, category, or brand...">
      <i class="fas fa-search"></i>
    </div>
    <div class="equipment-filters">
      <select id="equipmentCategoryFilter">
        <option value="">All Categories</option>
        <option value="cardio">Cardio</option>
        <option value="strength">Strength Training</option>
        <option value="functional">Functional Training</option>
        <option value="flexibility">Flexibility & Recovery</option>
        <option value="accessories">Accessories</option>
        <option value="other">Other</option>
      </select>
      <select id="equipmentStatusFilter">
        <option value="">All Status</option>
        <option value="available">Available</option>
        <option value="maintenance">Under Maintenance</option>
        <option value="out-of-order">Out of Order</option>
      </select>
      <select id="equipmentSortBy">
        <option value="name">Sort by Name</option>
        <option value="category">Sort by Category</option>
        <option value="quantity">Sort by Quantity</option>
        <option value="status">Sort by Status</option>
        <option value="date">Sort by Date Added</option>
      </select>
    </div>
  </div>

  <!-- Equipment Grid -->
  <div class="equipment-grid" id="equipmentGrid">
    <div class="equipment-loading">
      <i class="fas fa-spinner fa-spin"></i>
      <p>Loading equipment...</p>
    </div>
  </div>
</div>

<!-- Equipment Detail Modal -->
<div id="equipmentDetailModal" class="modal" style="display: none;">
  <div class="modal-content equipment-detail-modal">
    <div class="modal-header">
      <h3><i class="fas fa-dumbbell"></i> Equipment Details</h3>
      <button class="modal-close" id="closeEquipmentDetailModal">&times;</button>
    </div>
    <div class="modal-body">
      <div id="equipmentDetailContent">
        <!-- Dynamic content will be loaded here -->
      </div>
    </div>
  </div>
</div>

<!-- Add/Edit Equipment Modal -->
<div id="equipmentModal" class="modal" style="display: none;">
  <div class="modal-content equipment-form-modal">
    <div class="modal-header">
      <h3 id="equipmentModalTitle"><i class="fas fa-plus"></i> Add Equipment</h3>
      <button class="modal-close" id="closeEquipmentModal">&times;</button>
    </div>
    <div class="modal-body">
      <form id="equipmentForm" enctype="multipart/form-data">
        <input type="hidden" id="equipmentId" name="equipmentId">
        
        <!-- Equipment Photos -->
        <div class="form-group">
          <label class="form-label">Equipment Photos</label>
          <div class="equipment-photo-upload">
            <div class="photo-upload-area" id="equipmentPhotoUpload">
              <div class="upload-placeholder">
                <i class="fas fa-camera"></i>
                <p>Click to upload photos or drag & drop</p>
                <small>Supports multiple images (JPG, PNG, WebP)</small>
              </div>
              <input type="file" id="equipmentPhotos" name="photos" accept="image/*" multiple style="display: none;">
            </div>
            <div class="photo-preview-grid" id="equipmentPhotoPreview">
              <!-- Photo previews will be shown here -->
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="equipmentName">Equipment Name *</label>
            <input type="text" id="equipmentName" name="name" required>
          </div>
          <div class="form-group">
            <label class="form-label" for="equipmentBrand">Brand</label>
            <input type="text" id="equipmentBrand" name="brand">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="equipmentCategory">Category *</label>
            <select id="equipmentCategory" name="category" required>
              <option value="">Select Category</option>
              <option value="cardio">Cardio</option>
              <option value="strength">Strength Training</option>
              <option value="functional">Functional Training</option>
              <option value="flexibility">Flexibility & Recovery</option>
              <option value="accessories">Accessories</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label" for="equipmentModel">Model</label>
            <input type="text" id="equipmentModel" name="model">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="equipmentQuantity">Quantity *</label>
            <input type="number" id="equipmentQuantity" name="quantity" min="1" required>
          </div>
          <div class="form-group">
            <label class="form-label" for="equipmentStatus">Status</label>
            <select id="equipmentStatus" name="status">
              <option value="available">Available</option>
              <option value="maintenance">Under Maintenance</option>
              <option value="out-of-order">Out of Order</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="equipmentPurchaseDate">Purchase Date</label>
            <input type="date" id="equipmentPurchaseDate" name="purchaseDate">
          </div>
          <div class="form-group">
            <label class="form-label" for="equipmentPrice">Purchase Price (₹)</label>
            <input type="number" id="equipmentPrice" name="price" min="0" step="0.01">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="equipmentWarranty">Warranty Period (months)</label>
            <input type="number" id="equipmentWarranty" name="warranty" min="0">
          </div>
          <div class="form-group">
            <label class="form-label" for="equipmentLocation">Location in Gym</label>
            <input type="text" id="equipmentLocation" name="location" placeholder="e.g., Ground Floor, Zone A">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="equipmentDescription">Description</label>
          <textarea id="equipmentDescription" name="description" rows="3" placeholder="Optional description about the equipment, usage instructions, or special notes..."></textarea>
        </div>

        <div class="form-group">
          <label class="form-label" for="equipmentSpecs">Technical Specifications</label>
          <textarea id="equipmentSpecs" name="specifications" rows="2" placeholder="Weight, dimensions, power requirements, etc. (optional)"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" id="cancelEquipmentBtn">Cancel</button>
          <button type="submit" class="btn btn-primary" id="saveEquipmentBtn">
            <i class="fas fa-save"></i> Save Equipment
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Equipment Photo Gallery Modal -->
<div id="equipmentPhotoGalleryModal" class="modal" style="display: none;">
  <div class="modal-content photo-gallery-modal">
    <div class="modal-header">
      <h3 id="photoGalleryTitle">Equipment Photos</h3>
      <button class="modal-close" id="closePhotoGalleryModal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="photo-gallery-container">
        <div class="main-photo">
          <img id="mainPhotoDisplay" src="" alt="Equipment photo">
          <div class="photo-navigation">
            <button id="prevPhoto"><i class="fas fa-chevron-left"></i></button>
            <button id="nextPhoto"><i class="fas fa-chevron-right"></i></button>
          </div>
        </div>
        <div class="photo-thumbnails" id="photoThumbnails">
          <!-- Thumbnails will be loaded here -->
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Settings Tab -->
<div id="settingsTab" style="display:none; padding: 24px;">
    <div class="page-header" style="margin-bottom: 30px;">
      <h1 class="page-title">
        <i class="fas fa-cog"></i> Settings
      </h1>
      <p style="color: var(--text-secondary); margin: 8px 0 0 0;">Customize your gym dashboard experience and manage preferences</p>
    </div>

    <div class="settings-container">
      <!-- Theme Settings -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="settings-header">
            <h3><i class="fas fa-palette"></i> Theme & Appearance</h3>
            <p>Customize the look and feel of your dashboard</p>
          </div>
          <div class="settings-content">
            <div class="theme-selector">
              <div class="theme-option" data-theme="light">
                <div class="theme-preview light-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-sidebar"></div>
                    <div class="preview-main"></div>
                  </div>
                </div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="dark">
                <div class="theme-preview dark-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-sidebar"></div>
                    <div class="preview-main"></div>
                  </div>
                </div>
                <span>Dark</span>
              </div>
              <div class="theme-option" data-theme="auto">
                <div class="theme-preview auto-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-sidebar"></div>
                    <div class="preview-main"></div>
                  </div>
                </div>
                <span>Auto</span>
              </div>
            </div>
            
            <div class="color-scheme-selector" style="margin-top: 20px;">
              <h4>Color Scheme</h4>
              <div class="color-options">
                <div class="color-option active" data-color="blue"><div class="color-circle" style="background: #1976d2;"></div></div>
                <div class="color-option" data-color="green"><div class="color-circle" style="background: #388e3c;"></div></div>
                <div class="color-option" data-color="purple"><div class="color-circle" style="background: #7b1fa2;"></div></div>
                <div class="color-option" data-color="orange"><div class="color-circle" style="background: #f57c00;"></div></div>
                <div class="color-option" data-color="red"><div class="color-circle" style="background: #d32f2f;"></div></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Customize Dashboard Section in Settings Tab -->
    <div class="settings-section card" id="customizeDashboardSection" style="margin: 32px auto 0 auto; max-width: 600px; padding: 32px 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
      <h2 style="margin-bottom: 18px; color: var(--primary); display: flex; align-items: center; gap: 10px; font-size: 1.4rem;">
        <i class="fas fa-sliders-h"></i> Customize Dashboard
      </h2>
      <div class="form-group" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 18px;">
        <label for="toggleEquipmentTab" style="font-weight: 500; font-size: 1rem;">Show Equipment Tab</label>
        <label class="switch">
          <input type="checkbox" id="toggleEquipmentTab" checked>
          <span class="slider round"></span>
        </label>
      </div>
      <div class="form-group" style="display: flex; align-items: center; justify-content: space-between;">
        <label for="togglePaymentTab" style="font-weight: 500; font-size: 1rem;">Show Payment Tab</label>
        <label class="switch">
          <input type="checkbox" id="togglePaymentTab" checked>
          <span class="slider round"></span>
        </label>
      </div>
      <small style="color: #888; display: block; margin-top: 18px;">
        <i class="fas fa-info-circle" style="margin-right: 6px;"></i>
        <strong>Note:</strong> These settings are specific to your gym only. Changes will not affect other gym dashboards. Toggle to show or hide the Equipment and Payment tabs on your dashboard. Changes apply instantly.
      </small>
    </div>
      <!-- Notification Settings -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="settings-header">
            <h3><i class="fas fa-bell"></i> Notifications</h3>
            <p>Control how and when you receive notifications</p>
          </div>
          <div class="settings-content">
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">New Member Alerts</div>
                <div class="setting-description">Get notified when new members join</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="newMemberNotif" checked aria-labelledby="newMemberNotifLabel">
                <label for="newMemberNotif" id="newMemberNotifLabel" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Payment Notifications</div>
                <div class="setting-description">Alerts for payment confirmations and due dates</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="paymentNotif" checked aria-labbelledby="paymentNotifLabel">
                <label for="paymentNotif" id="paymentNotifLabel" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Trainer Updates</div>
                <div class="setting-description">Notifications about trainer applications and updates</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="trainerNotif" checked aria-labelledby="trainerNotifLabel">
                <label for="trainerNotif" id="trainerNotifLabel" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Email Notifications</div>
                <div class="setting-description">Receive notifications via email</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="emailNotif">
                <label for="emailNotif" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Membership Expiry Alerts</div>
                <div class="setting-description">Get notified when memberships are about to expire</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="membershipExpiryNotif" checked aria-labelledby="membershipExpiryNotifLabel">
                <label for="membershipExpiryNotif" id="membershipExpiryNotifLabel" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Admin Updates</div>
                <div class="setting-description">Notifications for admin-level system updates</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="adminUpdateNotif" checked aria-labelledby="adminUpdateNotifLabel">
                <label for="adminUpdateNotif" id="adminUpdateNotifLabel" class="toggle-label"></label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Services Management -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="settings-header">
            <h3><i class="fas fa-cogs"></i> Services & Features</h3>
            <p>Enable or disable gym services</p>
          </div>
          <div class="settings-content">
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Online Booking</div>
                <div class="setting-description">Allow members to book sessions online</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="onlineBooking" checked>
                <label for="onlineBooking" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Personal Training</div>
                <div class="setting-description">Offer personal training services</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="personalTraining" checked>
                <label for="personalTraining" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Group Classes</div>
                <div class="setting-description">Provide group fitness classes</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="groupClasses" checked>
                <label for="groupClasses" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Equipment Reservation</div>
                <div class="setting-description">Allow equipment booking in advance</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="equipmentReservation">
                <label for="equipmentReservation" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Member Check-in</div>
                <div class="setting-description">Digital check-in system for members</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="memberCheckin" checked>
                <label for="memberCheckin" class="toggle-label"></label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Operating Hours -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="settings-header">
            <h3><i class="fas fa-clock"></i> Operating Hours</h3>
            <p>Set your gym's operating schedule</p>
          </div>
          <div class="settings-content">
            <div class="operating-hours-grid">
              <div class="day-hours">
                <label>Monday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="monClosed">
                    <label for="monClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Tuesday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="tueClosed">
                    <label for="tueClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Wednesday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="wedClosed">
                    <label for="wedClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Thursday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="thuClosed">
                    <label for="thuClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Friday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="friClosed">
                    <label for="friClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Saturday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="satClosed">
                    <label for="satClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Sunday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="sunClosed">
                    <label for="sunClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Security Settings -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="settings-header">
            <h3><i class="fas fa-shield-alt"></i> Security & Privacy</h3>
            <p>Manage your account security settings</p>
          </div>
          <div class="settings-content">
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Two-Factor Authentication</div>
                <div class="setting-description">Add an extra layer of security to your account</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="twoFactorAuth">
                <label for="twoFactorAuth" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Login Notifications</div>
                <div class="setting-description">Get notified of new login attempts</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="loginNotifications" checked>
                <label for="loginNotifications" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Session Timeout</div>
                <div class="setting-description">Automatically log out after inactivity</div>
              </div>
              <select class="setting-select">
                <option value="30">30 minutes</option>
                <option value="60" selected>1 hour</option>
                <option value="120">2 hours</option>
                <option value="240">4 hours</option>
                <option value="0">Never</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Data Management -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="settings-header">
            <h3><i class="fas fa-database"></i> Data Management</h3>
            <p>Backup and export your gym data</p>
          </div>
          <div class="settings-content">
            <div class="data-action">
              <div class="action-info">
                <h4>Export Member Data</h4>
                <p>Download a CSV file with all member information</p>
              </div>
              <button class="action-btn secondary">
                <i class="fas fa-download"></i>
                Export CSV
              </button>
            </div>
            
            <div class="data-action">
              <div class="action-info">
                <h4>Backup Database</h4>
                <p>Create a complete backup of your gym database</p>
              </div>
              <button class="action-btn secondary">
                <i class="fas fa-save"></i>
                Create Backup
              </button>
            </div>
            
            <div class="data-action">
              <div class="action-info">
                <h4>Clear Cache</h4>
                <p>Clear temporary data to improve performance</p>
              </div>
              <button class="action-btn secondary">
                <i class="fas fa-trash"></i>
                Clear Cache
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Save Settings -->
      <div class="settings-actions">
        <button class="save-settings-btn" id="saveSettingsBtn">
          <i class="fas fa-save"></i>
          Save All Settings
        </button>
        <button class="reset-settings-btn" id="resetSettingsBtn">
          <i class="fas fa-undo"></i>
          Reset to Defaults
        </button>
      </div>
    </div>
  </div>

<!-- Attendance Tab -->
<div id="attendanceTab" style="display:none;">
  <div class="attendance-container">
    <!-- Compact Top Control Panel -->
    <div class="attendance-control-panel">
      <div class="control-panel-header">
        <h1 class="attendance-title">
          <i class="fas fa-calendar-check"></i>
          Attendance Management
        </h1>
        <div class="attendance-stats-compact">
          <div class="stat-item">
            <span class="stat-number" id="totalCount">0</span>
            <span class="stat-label">Total</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" id="presentCount">0</span>
            <span class="stat-label">Present</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" id="absentCount">0</span>
            <span class="stat-label">Absent</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" id="pendingCount">0</span>
            <span class="stat-label">Pending</span>
          </div>
        </div>
      </div>

      <div class="control-panel-actions">
        <!-- Tabs and Date Controls in one row -->
        <div class="tabs-and-date">
          <div class="attendance-tabs-compact">
            <button class="attendance-tab-btn active" data-tab="members">
              <i class="fas fa-users"></i>
              Members
            </button>
            <button class="attendance-tab-btn" data-tab="trainers">
              <i class="fas fa-user-tie"></i>
              Trainers
            </button>
          </div>
          
          <div class="date-controls-compact">
            <button class="date-nav-btn-compact" id="prevDay">
              <i class="fas fa-chevron-left"></i>
            </button>
            <input type="date" id="attendanceDate" class="date-input-compact" />
            <button class="date-nav-btn-compact" id="nextDay">
              <i class="fas fa-chevron-right"></i>
            </button>
            <button class="today-btn-compact" id="todayBtn">
              <i class="fas fa-calendar-day"></i>
              Today
            </button>
          </div>
        </div>

        <!-- Search and Filters -->
        <div class="search-and-filters">
          <div class="search-box-compact">
            <input type="text" id="attendanceSearch" placeholder="Search by name or ID...">
            <i class="fas fa-search"></i>
          </div>
          <select class="filter-select-compact" id="attendanceFilter">
            <option value="all">All</option>
            <option value="present">Present</option>
            <option value="absent">Absent</option>
            <option value="pending">Pending</option>
          </select>
          <div class="bulk-actions-compact">
            <button class="bulk-btn-compact bulk-present" id="bulkPresentBtn">
              <i class="fas fa-check-circle"></i>
              Mark All Present
            </button>
            <button class="bulk-btn-compact bulk-absent" id="bulkAbsentBtn">
              <i class="fas fa-times-circle"></i>
              Mark All Absent
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Attendance Summary (Compact) -->
    <div class="attendance-summary-compact" id="attendanceSummary">
      <!-- Summary will be populated by JavaScript -->
    </div>

    <!-- Enhanced Column View -->
    <div class="attendance-column-view">
      <div class="attendance-table-header">
        <div class="column-header photo">Photo</div>
        <div class="column-header name">Name</div>
        <div class="column-header id">ID</div>
        <div class="column-header status">Status</div>
        <div class="column-header check-in">Check-in</div>
        <div class="column-header actions">Actions</div>
      </div>
      
      <div class="attendance-table-body" id="attendanceTableBody">
        <!-- Attendance rows will be populated by JavaScript -->
        <div class="loading-row">
          <div class="spinner"></div>
          Loading attendance data...
        </div>
      </div>
    </div>
  </div>
</div>

 
 
  <!-- Add Payment Modal -->
  <div class="add-payment-modal" id="addPaymentModal">
    <div class="add-payment-modal-content">
      <div class="add-payment-modal-header">
        <h3 class="add-payment-modal-title">
          <i class="fas fa-plus-circle"></i> Add Payment
        </h3>
        <button class="modal-close-btn" id="closeAddPaymentModal">&times;</button>
      </div>
      <div class="add-payment-modal-body">
        <form id="addPaymentForm">
          <div class="payment-form-grid">
            <div class="payment-form-group">
              <label class="payment-form-label" for="paymentType">Payment Type</label>
              <select class="payment-form-select" id="paymentType" name="type" required>
                <option value="">Select Type</option>
                <option value="received">Amount Received</option>
                <option value="paid">Amount Paid</option>
                <option value="due">Payment Due</option>
                <option value="pending">Payment Pending</option>
              </select>
            </div>

            <div class="payment-form-group">
              <label class="payment-form-label" for="paymentAmount">Amount (₹)</label>
              <input type="number" class="payment-form-input" id="paymentAmount" name="amount" min="0" step="0.01" required>
            </div>

            <div class="payment-form-group full-width">
              <label class="payment-form-label" for="paymentCategory">Category</label>
              <div class="payment-category-grid fa-theme-grid" id="paymentCategoryGrid">
                <div class="payment-category-item" data-category="rent">
                  <div class="category-icon"><i class="fas fa-building"></i></div>
                  <span class="category-label">Rent</span>
                </div>
                <div class="payment-category-item" data-category="utilities">
                  <div class="category-icon"><i class="fas fa-bolt"></i></div>
                  <span class="category-label">Utilities</span>
                </div>
                <div class="payment-category-item" data-category="staff_salary">
                  <div class="category-icon"><i class="fas fa-users"></i></div>
                  <span class="category-label">Staff Salary</span>
                </div>
                <div class="payment-category-item" data-category="equipment_purchase">
                  <div class="category-icon"><i class="fas fa-dumbbell"></i></div>
                  <span class="category-label">Equipment Purchase</span>
                </div>
                <div class="payment-category-item" data-category="equipment_maintenance">
                  <div class="category-icon"><i class="fas fa-tools"></i></div>
                  <span class="category-label">Equipment Maintenance</span>
                </div>
                <div class="payment-category-item" data-category="supplies">
                  <div class="category-icon"><i class="fas fa-box"></i></div>
                  <span class="category-label">Supplies</span>
                </div>
                <div class="payment-category-item" data-category="marketing">
                  <div class="category-icon"><i class="fas fa-bullhorn"></i></div>
                  <span class="category-label">Marketing</span>
                </div>
                <div class="payment-category-item" data-category="insurance">
                  <div class="category-icon"><i class="fas fa-shield-alt"></i></div>
                  <span class="category-label">Insurance</span>
                </div>
                <div class="payment-category-item" data-category="taxes">
                  <div class="category-icon"><i class="fas fa-file-invoice-dollar"></i></div>
                  <span class="category-label">Taxes</span>
                </div>
                <div class="payment-category-item" data-category="vendor_payment">
                  <div class="category-icon"><i class="fas fa-handshake"></i></div>
                  <span class="category-label">Vendor Payment</span>
                </div>
                <div class="payment-category-item" data-category="license_fees">
                  <div class="category-icon"><i class="fas fa-scroll"></i></div>
                  <span class="category-label">License Fees</span>
                </div>
                <div class="payment-category-item" data-category="miscellaneous">
                  <div class="category-icon"><i class="fas fa-ellipsis-h"></i></div>
                  <span class="category-label">Miscellaneous</span>
                </div>
                <div class="payment-category-item" data-category="membership">
                  <div class="category-icon"><i class="fas fa-id-card"></i></div>
                  <span class="category-label">Membership</span>
                </div>
                <div class="payment-category-item" data-category="personal_training">
                  <div class="category-icon"><i class="fas fa-user-tie"></i></div>
                  <span class="category-label">Personal Training</span>
                </div>
              </div>
              <input type="hidden" id="paymentCategory" name="category" required>
              <div class="category-error" id="categoryError" style="display: none; color: #ef4444; font-size: 0.875rem; margin-top: 4px;">Please select a payment category</div>
            </div>

            <div class="payment-form-group">
              <label class="payment-form-label" for="paymentMethod">Payment Method</label>
              <select class="payment-form-select" id="paymentMethod" name="paymentMethod" required>
                <option value="cash">Cash</option>
                <option value="card">Card</option>
                <option value="upi">UPI</option>
                <option value="bank_transfer">Bank Transfer</option>
                <option value="cheque">Cheque</option>
              </select>
            </div>

            <div class="payment-form-group">
              <label class="payment-form-label" for="paymentDueDate">Due Date</label>
              <input type="date" class="payment-form-input" id="paymentDueDate" name="dueDate">
            </div>

            <div class="payment-form-group full-width">
              <label class="payment-form-label" for="paymentDescription">Description</label>
              <input type="text" class="payment-form-input" id="paymentDescription" name="description" placeholder="Enter payment description" required>
            </div>

            <div class="payment-form-group">
              <label class="payment-form-label" for="memberName">Person Name (if applicable)</label>
              <input type="text" class="payment-form-input" id="memberName" name="memberName" placeholder="Enter person name" style="display: block;">
              <select class="payment-form-input" id="memberSelect" name="memberId" style="display: none;">
                <option value="">Select Member</option>
              </select>
              <input type="hidden" id="selectedMemberId" name="memberId">
            </div>

            <div class="payment-form-group">
              <div class="payment-form-checkbox">
                <input type="checkbox" id="isRecurring" name="isRecurring">
                <label for="isRecurring">This is a recurring payment</label>
              </div>
            </div>
          </div>

          <div class="recurring-details" id="recurringDetails">
            <div class="payment-form-grid">
              <div class="payment-form-group">
                <label class="payment-form-label" for="recurringFrequency">Frequency</label>
                <select class="payment-form-select" id="recurringFrequency" name="frequency">
                  <option value="monthly">Monthly</option>
                  <option value="quarterly">Quarterly</option>
                  <option value="yearly">Yearly</option>
                </select>
              </div>

              <div class="payment-form-group">
                <label class="payment-form-label" for="nextDueDate">Next Due Date</label>
                <input type="date" class="payment-form-input" id="nextDueDate" name="nextDueDate">
              </div>
            </div>
          </div>

          <div class="payment-form-group full-width">
            <label class="payment-form-label" for="paymentNotes">Notes</label>
            <textarea class="payment-form-textarea" id="paymentNotes" name="notes" placeholder="Additional notes (optional)"></textarea>
          </div>
        </form>
      </div>
      <div class="add-payment-modal-footer">
        <button type="button" class="payment-form-btn secondary" id="cancelPaymentBtn">Cancel</button>
        <button type="submit" class="payment-form-btn primary" form="addPaymentForm">Add Payment</button>
      </div>
    </div>
  </div>

  <!-- 7-Day Allowance Modal -->
  <div class="modal" id="sevenDayAllowanceModal" style="display:none;">
    <div class="modal-content" style="max-width:600px;">
      <span class="modal-close" id="closeSevenDayAllowanceModal">&times;</span>
      <h2 style="text-align:center;color:#ff9800;margin-bottom:1.5rem;">⏰ Grant 7-Day Allowance</h2>
      
      <!-- Member Info Display -->
      <div id="allowanceMemberInfo" style="background:#fff3cd;padding:1rem;border-radius:8px;margin-bottom:1.5rem;border-left:4px solid #ff9800;">
        <h4 style="margin:0 0 0.5rem 0;color:#856404;">Member Details</h4>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.5rem;font-size:0.9rem;">
          <div><strong>Name:</strong> <span id="allowanceMemberName"></span></div>
          <div><strong>ID:</strong> <span id="allowanceMembershipId"></span></div>
          <div><strong>Current Plan:</strong> <span id="allowanceCurrentPlan"></span></div>
          <div><strong>Expires:</strong> <span id="allowanceExpiryDate"></span></div>
        </div>
      </div>

      <!-- Warning Notice -->
      <div style="background:#fff3cd;border:1px solid #ffeaa7;border-radius:8px;padding:1rem;margin-bottom:1.5rem;">
        <div style="display:flex;align-items:center;color:#856404;">
          <i class="fas fa-exclamation-triangle" style="font-size:1.2rem;margin-right:8px;"></i>
          <strong>7-Day Allowance Notice</strong>
        </div>
        <p style="margin:0.5rem 0 0 0;font-size:0.9rem;color:#856404;">
          The member will be allowed gym access for 7 days while their payment remains pending. After 7 days, access will be restricted until payment is completed.
        </p>
      </div>

      <form id="sevenDayAllowanceForm">
        <input type="hidden" id="allowanceMemberId" name="memberId">
        
        <div class="form-group">
          <label for="allowancePlanSelected">New Plan</label>
          <select id="allowancePlanSelected" name="planSelected" required>
            <option value="">Select Plan</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="allowanceMonthlyPlan">Duration</label>
          <select id="allowanceMonthlyPlan" name="monthlyPlan" required>
            <option value="">Select Duration</option>
            <option value="1 Month">1 Month</option>
            <option value="3 Months">3 Months</option>
            <option value="6 Months">6 Months</option>
            <option value="12 Months">12 Months</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="allowancePaymentAmount">Payment Amount</label>
          <input type="number" id="allowancePaymentAmount" name="paymentAmount" min="0" required readonly style="background:#f5f5f5;">
          <small style="color:#666;font-size:0.85em;">Amount calculated automatically based on plan and duration</small>
          <div id="allowanceDiscountInfo" style="margin-top: 8px; padding: 8px; border-radius: 4px; font-size: 0.9em; display: none;">
            <i class="fas fa-tag"></i> <span id="allowanceDiscountText">No discount applied</span>
          </div>
        </div>
        
        <div class="form-group">
          <label for="allowanceActivityPreference">Activity Preference</label>
          <input type="text" id="allowanceActivityPreference" name="activityPreference" placeholder="e.g. Yoga, Cardio, Zumba" required>
        </div>
        
        <div style="display:flex;gap:1rem;justify-content:center;margin-top:1.5rem;">
          <button type="button" id="cancelSevenDayAllowance" class="btn btn-secondary">Cancel</button>
          <button type="submit" class="btn" style="background:#ff9800;color:white;border:none;">⏰ Grant 7-Day Allowance</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Mark as Paid Modal -->
  <div class="modal" id="markAsPaidModal" style="display:none;">
    <div class="modal-content" style="max-width:500px;">
      <span class="modal-close" id="closeMarkAsPaidModal">&times;</span>
      <h2 style="text-align:center;color:#28a745;margin-bottom:1.5rem;">✅ Mark Payment as Paid</h2>
      
      <!-- Member Info Display -->
      <div id="paidMemberInfo" style="background:#d4edda;padding:1rem;border-radius:8px;margin-bottom:1.5rem;border-left:4px solid #28a745;">
        <h4 style="margin:0 0 0.5rem 0;color:#155724;">Member Details</h4>
        <div style="font-size:0.9rem;">
          <div><strong>Name:</strong> <span id="paidMemberName"></span></div>
          <div><strong>ID:</strong> <span id="paidMembershipId"></span></div>
          <div><strong>Pending Amount:</strong> ₹<span id="paidPendingAmount"></span></div>
        </div>
      </div>

      <form id="markAsPaidForm">
        <input type="hidden" id="paidMemberId" name="memberId">
        <input type="hidden" id="paidSource" name="source">
        
        <div style="background:#fff3cd;border:#ffeaa7 1px solid;border-radius:8px;padding:1rem;margin-bottom:1.5rem;text-align:center;">
          <p style="margin:0;color:#856404;font-weight:500;">
            <i class="fas fa-info-circle" style="margin-right:8px;"></i>
            The full pending amount will be marked as paid with today's date.
          </p>
        </div>
        
        <div style="display:flex;gap:1rem;justify-content:center;margin-top:1.5rem;">
          <button type="button" id="cancelMarkAsPaid" class="btn btn-secondary">Cancel</button>
          <button type="submit" class="btn btn-success">✅ Mark as Paid</button>
        </div>
      </form>
    </div>
  </div>
 
   <!-- 7-Day Allowance System -->
   <script src="seven-day-allowance.js"></script>
   <!-- QR Code Generator System -->
   <script src="qr-code-generator.js"></script>
   <!-- Notification integration with enhanced form handler compatibility -->
   <script src="notification-integration.js"></script>
   <!-- Notification Configuration -->
   <script src="notification-config.js"></script></body>
</html>
       