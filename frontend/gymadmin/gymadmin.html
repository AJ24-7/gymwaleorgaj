<!DOCTYPE html>
<html lang="en">
<head>
  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gym-Wale | Admin Dashboard</title>
    <!-- Tab Layout System - Controls sidebar and content positioning -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles/tab-layout.css">
    <link rel="stylesheet" href="styles/gymadmin.css">
    <link rel="stylesheet" href="styles/attendance.css">
    <link rel="stylesheet" href="styles/membertab.css">
    <link rel="stylesheet" href="styles/payment.css">
    <link rel="stylesheet" href="styles/member-payments.css">
    <link rel="stylesheet" href="styles/equipment.css">
    <link rel="stylesheet" href="styles/offers.css">
    <link rel="stylesheet" href="styles/settings.css">
    <link rel="stylesheet" href="styles/enhanced-support-styles.css">
    <link rel="stylesheet" href="styles/trainer-list.css">
    <link rel="stylesheet" href="styles/grievance-handler.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
           
    <script src="config/api-config.js"></script>
    <script defer src="core/skeleton-loading-manager.js"></script>
    <script defer src="modules/tab-switcher.js"></script>
    <script defer src="core/unified-notification-system.js"></script>
    <script defer src="gymadmin.js"></script>
    <script defer src="modules/settings.js"></script>
    <script defer src="utils/subscription-management.js"></script>
    <script defer src="modules/gym-profile.js"></script>
    <script defer src="modules/support-reviews.js"></script>
    <script defer src="enhanced-support-integration.js"></script>
    <script defer src="modules/coupon-backend-integration.js"></script>
    <script defer src="modules/grievance-handler.js"></script>
    <script defer src="modules/attendance.js"></script>
    <script defer src="modules/trial-bookings.js"></script>
    <script defer src="modules/attendance-stats.js"></script>
    <script defer src="modules/payment.js"></script>
    <script defer src="modules/equipment.js"></script>
    <script defer src="modules/offers-manager.js"></script>
    <script defer src="modules/cash-validation.js"></script>
    <script defer src="modules/cash-validation-dialog.js"></script>
    <script defer src="utils/quick-actions-customizer.js"></script>
    <script defer src="modules/trainer-management.js"></script>
    
</head>
<body>

<!-- Backdrop for mobile sidebar -->
<div id="mobileSidebarBackdrop" class="mobile-sidebar-backdrop"></div>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="logo" style="display:flex;align-items:center;padding:18px 0 18px 0;justify-content:center;">
            <div class="logo-icon" style="display:flex;align-items:center;justify-content:center;">
               <img src="../gymadmin/public/Gym-Wale.png" alt="Gym-Wale Logo" style="height:48px;width:48px;border-radius:10px;transition:transform .2s;">
            </div>
            <div class="logo-text" style="font-size:2rem;color:var(--primary);letter-spacing:1px;transition:color .2s;user-select:none;">Gym-Wale</div>
        </div>
        <ul class="menu">
            <li class="menu-item">
                <a href="#" class="menu-link active">
                    <span class="menu-icon"><i class="fas fa-tachometer-alt"></i></span>
                    <span class="menu-text">Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-users"></i></span>
                    <span class="menu-text">Members</span>
                </a>
            </li>
             <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-user-tie"></i></span>
                    <span class="menu-text">Trainers</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-calendar-check"></i></span>
                    <span class="menu-text">Attendance</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link" data-tab="paymentTab">
                    <span class="menu-icon"><i class="fas fa-credit-card"></i></span>
                    <span class="menu-text">Payments</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-dumbbell"></i></span>
                    <span class="menu-text">Equipment</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link" data-tab="offersTab">
                    <span class="menu-icon"><i class="fas fa-tags"></i></span>
                    <span class="menu-text">Offers & coupons</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-headset"></i></span>
                    <span class="menu-text">Support & Reviews</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-cog"></i></span>
                    <span class="menu-text">Settings</span>
                </a>
            </li>
        </ul>
        <div class="toggle-btn" id="toggleBtn">
            <i class="fas fa-chevron-left"></i>
        </div>
        
    </div>
    <!-- Mobile Sidebar Dropdown -->
    <div id="mobileSidebarDropdown" class="mobile-sidebar-dropdown">
      <div style="display:flex; justify-content:flex-end; padding:18px;">
        <button id="closeMobileSidebar" aria-label="Close menu" style="background:none; border:none; font-size:2rem; cursor:pointer;">&times;</button>
      </div>
      <ul class="menu" style="padding:0 24px;">
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-tachometer-alt"></i></span> <span class="menu-text">Dashboard</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-users"></i></span> <span class="menu-text">Members</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-calendar-check"></i></span> <span class="menu-text">Attendance</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link" data-tab="paymentTab"><span class="menu-icon"><i class="fas fa-credit-card"></i></span> <span class="menu-text">Payments</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-user-tie"></i></span> <span class="menu-text">Trainers</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-dumbbell"></i></span> <span class="menu-text">Equipment</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link" data-tab="offersTab"><span class="menu-icon"><i class="fas fa-tags"></i></span> <span class="menu-text">Offers & coupons</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-headset"></i></span> <span class="menu-text">Support & Reviews</span></a></li>
        <li class="menu-item"><a href="#" class="menu-link"><span class="menu-icon"><i class="fas fa-cog"></i></span> <span class="menu-text">Settings</span></a></li>
      </ul>
    </div>

    <!-- Main Content -->
 <div class="main-content" id="mainContent">
        <!-- Top Nav -->
        <div class="top-nav" id="topNav">
          <button id="hamburgerMenuBtn" class="hamburger-menu" aria-label="Open menu">
          <span></span>
          <span></span>
          <span></span>
          </button>
            <div class="user-actions">
                <!-- Notification Bell - Created by unified-notification-system.js -->
                
                <!-- Interactive animated user box -->
                <div class="user-profile user-profile-animated" id="userProfileToggle">
                  <div class="user-profile-box">
                    <div class="user-avatar">
                      <img id="adminAvatar" src="https://via.placeholder.com/40" alt="Admin">
                    </div>
                    <span class="user-name" id="adminName">Admin</span>
                  </div>
                  <i class="fas fa-chevron-down"></i>
                </div>
                <div class="profile-dropdown-menu" id="profileDropdownMenu">
                  <button class="dropdown-item" id="gymProfileLink" type="button"><i class="fas fa-building"></i> Gym Profile</button>
                  <div class="dropdown-divider"></div>
                  <button class="dropdown-item" id="changePasswordLink" type="button"><i class="fas fa-lock"></i> Change Password</button>
                  <div class="dropdown-divider"></div>
                  <button class="dropdown-item" id="logoutLink" type="button"><i class="fas fa-sign-out-alt"></i> Logout</button>
                </div>
            </div>
        </div>
            <!-- Dashboard Content -->
             <div class="content" >
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-tachometer-alt"></i> Dashboard Overview</h1>
                    <div class="page-actions">
                        <button id="openNotificationModalBtn" class="btn-primary">
                            <i class="fas fa-bell"></i> Send Notification
                        </button>
                        <!-- Admin notification system will be inserted here automatically -->
                    </div>
                </div>


                <!-- Stats Cards -->
                <div class="stats-cards">
                    <div class="stat-card new-users loading" id="membersStatCard" style="cursor:pointer;">
                        <div class="stat-card-header">
                            <div class="stat-title">Members</div>
                            <div class="stat-icon-dashboard">
                                <i class="fas fa-users"></i>
                            </div>
                        </div>
                        <div class="stat-value">0</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                        <div class="stat-card-skeleton">
                            <div class="skeleton-header">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-icon"></div>
                            </div>
                            <div class="skeleton-value"></div>
                            <div class="skeleton-change"></div>
                        </div>
                    </div>

                    <div class="stat-card payments loading">
                        <div class="stat-card-header">
                            <div class="stat-title">Total Payments</div>
                            <div class="stat-icon-dashboard">
                                <i class="fas fa-credit-card"></i>
                            </div>
                        </div>
                        <div class="stat-value">₹0</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                        <div class="stat-card-skeleton">
                            <div class="skeleton-header">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-icon"></div>
                            </div>
                            <div class="skeleton-value"></div>
                            <div class="skeleton-change"></div>
                        </div>
                    </div>

                    <div class="stat-card attendance loading" id="attendanceStatCard" style="cursor:pointer;">
                        <div class="stat-card-header">
                            <div class="stat-title">Overall Attendance</div>
                            <div class="stat-icon-dashboard">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="overallAttendanceValue">Loading...</div>
                        <div class="stat-change neutral" id="overallAttendanceChange">
                            <i class="fas fa-clock"></i>
                            Calculating...
                        </div>
                        <div class="stat-card-skeleton">
                            <div class="skeleton-header">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-icon"></div>
                            </div>
                            <div class="skeleton-value"></div>
                            <div class="skeleton-change"></div>
                        </div>
                    </div>

                    <div class="stat-card trainers loading">
                        <div class="stat-card-header">
                            <div class="stat-title">Active Trainers</div>
                            <div class="stat-icon-dashboard">
                                <i class="fas fa-user-tie"></i>
                            </div>
                        </div>
                        <div class="stat-value">0</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                        <div class="stat-card-skeleton">
                            <div class="skeleton-header">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-icon"></div>
                            </div>
                            <div class="skeleton-value"></div>
                            <div class="skeleton-change"></div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="dashboard-row">
                  <div class="card quick-action-card">
                    <div class="card-header">
                      <h2 class="card-title">
                        <i class="fas fa-bolt"></i>
                        Quick Actions
                      </h2>
                      <div class="card-actions">
                        <button id="customizeQuickActionsBtn" type="button" class="secondary customize-btn">
                          <i class="fas fa-palette"></i> Customize
                        </button>
                      </div>
                    </div>
                    <div class="quick-actions-grid" id="quickActionsGrid">
                      <div class="quick-action-badge" data-action="add-member" id="addMemberBtn">
                        <i class="fas fa-user-plus"></i>
                        <span>Add Member</span>
                      </div>
                      <div class="quick-action-badge" data-action="record-payment" id="recordPaymentBtn">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Record Payment</span>
                      </div>
                      <div class="quick-action-badge" data-action="add-trainer" id="addTrainerBtn">
                        <i class="fas fa-user-tie"></i>
                        <span>Add Trainer</span>
                      </div>
                      <div class="quick-action-badge" data-action="add-equipment" id="uploadEquipmentBtn">
                        <i class="fas fa-dumbbell"></i>
                        <span>Add Equipment</span>
                      </div>
                      <div class="quick-action-badge" data-action="generate-qr" id="generateQRCodeBtn">
                        <i class="fas fa-qrcode"></i>
                        <span>Generate QR Code</span>
                      </div>
                      <div class="quick-action-badge" data-action="biometric-enroll" id="biometricEnrollBtn">
                        <i class="fas fa-fingerprint"></i>
                        <span>Biometric Enrollment</span>
                      </div>
                      <div class="quick-action-badge" data-action="device-setup" id="deviceSetupBtn">
                        <i class="fas fa-cogs"></i>
                        <span>Setup Devices</span>
                      </div>
                      <div class="quick-action-badge" data-action="send-notification" id="sendNotificationQuickBtn">
                        <i class="fas fa-bell"></i>
                        <span>Send Notification</span>
                      </div>
                    </div>
                  </div>
                  <div class="card activities-offered-card">
                    <div class="card-header">
                      <h2 class="card-title">
                        <i class="fas fa-heart"></i>
                        Activities Offered
                      </h2>
                      <div class="card-actions">
                        <button id="addActivitiesBtn" type="button" class="secondary">
                          <i class="fas fa-plus-circle"></i> Add Activities
                        </button>
                      </div>
                    </div>
                    <div class="activities-list" id="activitiesList">
                      <!-- Activities will be rendered dynamically here -->
                    </div>
                  </div>
                </div>

                 <!-- Interactive Gym Photos Grid -->
                <section id="photoGridSection" class="card" style="margin-top: 24px;">
                  <div class="card-header">
                    <h1 class="card-title"><i class="fas fa-images"></i> Previously Uploaded Gym Photos</h1>
                    <button class="upload-photo-btn" id="uploadPhotoBtn">
                            <i class="fas fa-camera"></i> Upload Photo
                        </button>
                  </div>
                  <div class="card-body">
                    <div id="photoGrid" class="photo-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 18px;"></div>
                  </div>
                </section>
                 <!-- Membership Plans Section -->
                        <div class="card" id="membershipPlansSection" style="margin-top:18px;">
                          <div class="card-header" style="display:flex;align-items:center;justify-content:space-between;">
                            <h2 class="card-title"><i class="fas fa-crown" style="color:#ffbe0b;margin-right:8px;"></i>Membership Plans</h2>
                            <button id="editPlansBtn" class="btn btn-primary" style="font-size:1em;padding:6px 18px;"><i class="fas fa-edit"></i> Edit Plans</button>
                          </div>
                           <div class="plans-list" id="plansList"></div>
                        </div>
                        <!-- Membership Plan Editor Modal -->
                        <div class="modal" id="planEditorModal" style="display:none;z-index:100000;align-items:flex-start;">
                          <div class="modal-content" style="max-width:700px;margin-top:48px;">
                            <div style="display:flex;align-items:center;justify-content:space-between;">
                              <h3 style="margin:0;display:flex;align-items:center;gap:10px;"><i class="fas fa-crown" style="color:#ffbe0b;"></i> Edit Membership Plans</h3>
                              <button class="modal-close" id="closePlanEditorModal" style="font-size:1.5rem;">&times;</button>
                            </div>
                            <form id="planEditorForm" style="margin-top:18px;">
                          <div id="planEditorCards" style="display:flex;gap:18px;flex-wrap:wrap;justify-content:center;"></div>
                        
                         
                              <div style="display:flex;justify-content:flex-end;gap:10px;margin-top:24px;">
                                <button type="button" class="btn btn-secondary" id="cancelPlanEditBtn">Cancel</button>
                                <button type="submit" class="btn btn-primary">Save All</button>
                              </div>
                            </form>
                          </div>
                        </div>
               
                <!-- Main Grid -->
                <div class="main-grid">
                    <!-- Left Column -->
                    <div class="left-column">
                        <!-- New Members Card (Dynamic) -->
                        <div class="card" id="newMembersCard">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="fas fa-users"></i>
                                    New Members
                                </h2>
                                <div class="card-actions">
                                    <button id="viewAllMembersBtn">View All</button>
                                    <button id="exportMembersBtn" class="secondary">
                                        <i class="fas fa-download"></i>
                                        Export
                                    </button>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="modern-table">
                                    <thead>
                                        <tr>
                                            <th><i class="fas fa-user-circle"></i> Profile</th>
                                            <th><i class="fas fa-user"></i> Name</th>
                                            <th><i class="fas fa-calendar-alt"></i> Join Date</th>
                                            <th><i class="fas fa-crown"></i> Plan</th>
                                            <th><i class="fas fa-cogs"></i> Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="newMembersTableBody">
                                        <tr class="loading-row">
                                            <td colspan="5" style="text-align:center; padding: 40px;">
                                                <div class="loading-spinner">
                                                    <i class="fas fa-spinner fa-spin" style="font-size: 1.5rem; color: var(--primary);"></i>
                                                    <p style="margin-top: 12px; color: #64748b;">Loading new members...</p>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Trial Bookings Card -->
                        <div class="card" id="trialBookingsCard">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="fas fa-calendar-plus"></i>
                                    Trial Bookings
                                </h2>
                                <div class="card-actions">
                                    <select id="dashboardTrialStatusFilter" class="filter-select">
                                        <option value="">All Status</option>
                                        <option value="pending">Pending</option>
                                        <option value="confirmed">Confirmed</option>
                                        <option value="contacted">Contacted</option>
                                        <option value="completed">Completed</option>
                                    </select>
                                    <button class="secondary refresh-btn" onclick="dashboardTrialBookings.loadTrialBookings()">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="modern-table">
                                    <thead>
                                        <tr>
                                            <th><i class="fas fa-user-circle"></i> Profile</th>
                                            <th><i class="fas fa-user"></i> Name</th>
                                            <th><i class="fas fa-clock"></i> Time Slot</th>
                                            <th><i class="fas fa-running"></i> Activity</th>
                                            <th><i class="fas fa-info-circle"></i> Status</th>
                                            <th><i class="fas fa-cogs"></i> Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="dashboardTrialBookingsTableBody">
                                        <tr class="loading-row">
                                            <td colspan="6" style="text-align:center; padding: 40px;">
                                                <div class="loading-spinner">
                                                    <i class="fas fa-spinner fa-spin" style="font-size: 1.5rem; color: var(--primary);"></i>
                                                    <p style="margin-top: 12px; color: #64748b;">Loading trial bookings...</p>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Attendance Chart -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="fas fa-chart-line"></i>
                                    Attendance Trend
                                </h2>
                                <div class="card-actions" style="display:flex;gap:12px;align-items:center;">
                                    <div class="chart-controls">
                                        <label for="dashboardChartMonth" style="font-size:0.9rem;color:#64748b;margin-right:6px;">Month:</label>
                                        <select id="dashboardChartMonth" class="chart-select">
                                            <option value="0">Jan</option>
                                            <option value="1">Feb</option>
                                            <option value="2">Mar</option>
                                            <option value="3">Apr</option>
                                            <option value="4">May</option>
                                            <option value="5">Jun</option>
                                            <option value="6">Jul</option>
                                            <option value="7">Aug</option>
                                            <option value="8">Sep</option>
                                            <option value="9">Oct</option>
                                            <option value="10">Nov</option>
                                            <option value="11">Dec</option>
                                        </select>
                                        <label for="dashboardChartYear" style="font-size:0.9rem;color:#64748b;margin:0 6px 0 12px;">Year:</label>
                                        <select id="dashboardChartYear" class="chart-select"></select>
                                    </div>
                                    <button id="refreshChartBtn" class="secondary">
                                        <i class="fas fa-sync-alt"></i>
                                        Refresh
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <!-- Chart will be rendered here -->
                                <canvas id="dashboardAttendanceChart" style="width: 100%; height: 350px;"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="right-column">
                        

                        <!-- Recent Activity -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="fas fa-clock"></i>
                                    Recent Activity
                                </h2>
                                <div class="card-actions">
                                    <button id="viewAllActivitiesBtn">View All</button>
                                    <button id="refreshActivitiesBtn" class="secondary">
                                        <i class="fas fa-sync-alt"></i>
                                        Refresh
                                    </button>
                                </div>
                            </div>
                            <div class="activity-container">
                                <ul class="activity-list" id="recentActivityList">
                                    <!-- Dynamic activity items will be loaded here -->
                                    <li class="activity-item">
                                        <div class="activity-icon">
                                            <i class="fas fa-spinner fa-spin"></i>
                                        </div>
                                        <div class="activity-content">
                                            <div class="activity-title">Loading recent activities...</div>
                                            <div class="activity-time">
                                                <i class="fas fa-clock"></i>
                                                Please wait
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- Equipment Gallery -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="fas fa-dumbbell"></i>
                                    Equipment Gallery
                                </h2>
                                <div class="card-actions">
                                    <button id="viewAllEquipmentBtn">View All</button>
                                    <button id="addEquipmentQuickBtn" class="secondary">
                                        <i class="fas fa-plus"></i>
                                        Add Equipment
                                    </button>
                                </div>
                            </div>
                            <div class="equipment-gallery" id="dashboardEquipmentGallery">
                                <!-- Dynamic equipment items will be loaded here -->
                                <div class="equipment-item loading">
                                    <div class="equipment-skeleton">
                                        <div class="skeleton-image"></div>
                                        <div class="skeleton-overlay"></div>
                                    </div>
                                </div>
                                <div class="equipment-item loading">
                                    <div class="equipment-skeleton">
                                        <div class="skeleton-image"></div>
                                        <div class="skeleton-overlay"></div>
                                    </div>
                                </div>
                                <div class="equipment-item loading">
                                    <div class="equipment-skeleton">
                                        <div class="skeleton-image"></div>
                                        <div class="skeleton-overlay"></div>
                                    </div>
                                </div>
                                <div class="equipment-item loading">
                                    <div class="equipment-skeleton">
                                        <div class="skeleton-image"></div>
                                        <div class="skeleton-overlay"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
             </div>
        
        <!-- Payment Tab (Initially Hidden) -->
        <div id="paymentTab" class="tab-content" style="display: none;">
            <div class="tab-inner-content">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-credit-card"></i> Payment Management</h1>
                    <div class="page-actions">
                        <button id="addPaymentBtn" class="add-payment-btn">
                            <i class="fas fa-plus"></i> Add Payment
                        </button>
                    </div>
                </div>

                <!-- Payment Statistics Cards -->
                <div class="payment-stats-grid">

                    <div class="payment-stat-card received" id="receivedAmountStatCard" style="cursor:pointer;">
                        <div class="payment-stat-header">
                            <div class="payment-stat-title">Amount Received</div>
                            <div class="payment-stat-icon received">
                                <i class="fas fa-arrow-down"></i>
                            </div>
                        </div>
                        <div class="payment-stat-value">₹0</div>
                        <div class="payment-stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                    </div>

                    <div class="payment-stat-card paid" id="paidAmountStatCard" style="cursor:pointer;">
                        <div class="payment-stat-header">
                            <div class="payment-stat-title">Amount Paid</div>
                            <div class="payment-stat-icon paid">
                                <i class="fas fa-arrow-up"></i>
                            </div>
                        </div>
                        <div class="payment-stat-value">₹0</div>
                        <div class="payment-stat-change negative">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                    </div>

                    <div class="payment-stat-card pending" id="pendingPaymentsStatCard" style="cursor:pointer;">
                        <div class="payment-stat-header">
                            <div class="payment-stat-title">Pending Payments</div>
                            <div class="payment-stat-icon pending">
                                <i class="fas fa-clock"></i>
                            </div>
                        </div>
                        <div class="payment-stat-value">₹0</div>
                    </div>

                    <div class="payment-stat-card due" id="duePaymentsStatCard" style="cursor:pointer;">
                        <div class="payment-stat-header">
                            <div class="payment-stat-title">Due Payments</div>
                            <div class="payment-stat-icon due">
                                <i class="fas fa-calendar-times"></i>
                            </div>
                        </div>
                        <div class="payment-stat-value">₹0</div>
                        <div class="payment-stat-change negative">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                    </div>

                    <div class="payment-stat-card profit" id="profitLossStatCard" style="cursor:pointer;">
                        <div class="payment-stat-header">
                            <div class="payment-stat-title">Profit/Loss</div>
                            <div class="payment-stat-icon profit">
                                <i class="fas fa-chart-line"></i>
                            </div>
                        </div>
                        <div class="payment-stat-value">₹0</div>
                        <div class="payment-stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            0.0%
                        </div>
                    </div>
                </div>

                <!-- Payment Chart -->
                <div class="payment-chart-section">
                    <div class="payment-chart-header">
                        <h2 class="payment-chart-title">
                            <i class="fas fa-chart-area"></i> Payment Trends
                        </h2>
                        <div class="payment-chart-controls">
                            <select id="paymentChartMonth">
                                <option value="0">January</option>
                                <option value="1">February</option>
                                <option value="2">March</option>
                                <option value="3">April</option>
                                <option value="4">May</option>
                                <option value="5">June</option>
                                <option value="6">July</option>
                                <option value="7">August</option>
                                <option value="8">September</option>
                                <option value="9">October</option>
                                <option value="10">November</option>
                                <option value="11">December</option>
                            </select>
                            <select id="paymentChartYear">
                                <!-- Years will be populated by JavaScript -->
                            </select>
                        </div>
                    </div>
                    <div class="payment-chart-container">
                        <canvas id="paymentChart"></canvas>
                    </div>
                </div>

                <!-- Payment Content Grid -->
                <div class="payment-content-grid">
                    <!-- Dues Section -->
                    <div class="recurring-payments-section">
                        <div class="recurring-payments-header">
                            <h2 class="recurring-payments-title">
                                <i class="fas fa-calendar-alt"></i> Dues
                            </h2>
                            <div class="recurring-payments-filters">
                                <button class="filter-btn active" data-filter="all">All</button>
                                <button class="filter-btn" data-filter="monthly-recurring">Monthly Recurring</button>
                                <button class="filter-btn" data-filter="pending">Pending</button>
                                <button class="filter-btn" data-filter="overdue">Overdue</button>
                                <button class="filter-btn" data-filter="completed">Completed</button>
                            </div>
                        </div>
                        <div class="recurring-payments-list" id="recurringPaymentsList">
                            <div class="payment-loading">
                                <i class="fas fa-spinner"></i> Loading payments...
                            </div>
                        </div>
                    </div>

                    <!-- Pending Payments Section (Unified) -->
                    <div class="pending-payments-section">
                        <div class="pending-payments-header">
                            <h2 class="pending-payments-title">
                                <i class="fas fa-clock"></i> Pending Payments
                            </h2>
                            <div class="pending-payments-stats">
                                <span class="pending-count">0 pending</span>
                                <span class="pending-amount">₹0 pending</span>
                            </div>
                        </div>
                        <div class="pending-payments-list" id="pendingPaymentsList">
                            <div class="payment-loading">
                                <i class="fas fa-spinner"></i> Loading pending payments...
                            </div>
                        </div>
                    </div>

                    <!-- Recent Payments -->
                    <div class="recent-payments-section">
                        <div class="recent-payments-header">
                            <h2 class="recent-payments-title">
                                <i class="fas fa-history"></i> Recent Payments
                            </h2>
                            <button class="payment-history-btn" id="paymentHistoryBtn" title="View Full Payment History">
                                <i class="fas fa-file-alt"></i> Payment History
                            </button>
                        </div>
                        <div class="recent-payments-list" id="recentPaymentsList">
                        <div class="payment-loading">
                                <i class="fas fa-spinner"></i> Loading payments...
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- Close tab-inner-content -->
        </div><!-- Close paymentTab -->

<!-- Payment Tab Modals - Moved outside tab for proper positioning -->
<!-- Received Payments Details Modal -->
<div class="modal" id="receivedPaymentsModal" style="display:none;">
  <div class="modal-content" style="max-width:520px;margin-top:48px;">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
      <h3 style="margin:0;color:#22c55e;font-weight:600;"><i class="fas fa-wallet"></i> Amount Received Breakdown</h3>
      <button class="modal-close" id="closeReceivedPaymentsModal" style="font-size:1.5rem;">&times;</button>
    </div>
    <div id="receivedPaymentsDetailsContainer" style="min-height:120px;"></div>
  </div>
</div>

<!-- Paid Amounts Details Modal -->
<div class="modal" id="paidAmountsModal" style="display:none;">
  <div class="modal-content" style="max-width:520px;margin-top:48px;">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
      <h3 style="margin:0;color:#ef4444;font-weight:600;"><i class="fas fa-money-bill-wave"></i> Amount Paid Breakdown</h3>
      <button class="modal-close" id="closePaidAmountsModal" style="font-size:1.5rem;">&times;</button>
    </div>
    <div id="paidAmountsDetailsContainer" style="min-height:120px;"></div>
  </div>
</div>

<!-- Pending Payments Details Modal -->
<div class="modal" id="pendingPaymentsModal" style="display:none;">
  <div class="modal-content" style="max-width:700px;margin-top:48px;">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
      <h3 style="margin:0;color:#f59e0b;font-weight:600;"><i class="fas fa-clock"></i> Pending Payments Details</h3>
      <button class="modal-close" id="closePendingPaymentsModal" style="font-size:1.5rem;">&times;</button>
    </div>
    <div id="pendingPaymentsDetailsContainer" style="margin-top:18px;min-height:120px;max-height:420px;overflow-y:auto;"></div>
  </div>
</div>

<!-- Due Payments Details Modal -->
<div class="modal" id="duePaymentsModal" style="display:none;">
  <div class="modal-content" style="max-width:700px;margin-top:48px;">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
      <h3 style="margin:0;color:#dc2626;font-weight:600;"><i class="fas fa-calendar-times"></i> Due Payments Details</h3>
      <button class="modal-close" id="closeDuePaymentsModal" style="font-size:1.5rem;">&times;</button>
    </div>
    <div id="duePaymentsDetailsContainer" style="margin-top:18px;min-height:120px;max-height:420px;overflow-y:auto;"></div>
  </div>
</div>

<!-- Profit/Loss Details Modal -->
<div class="modal" id="profitLossModal" style="display:none;">
  <div class="modal-content" style="max-width:600px;margin-top:48px;">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
      <h3 style="margin:0;color:#3b82f6;font-weight:600;"><i class="fas fa-chart-line"></i> Profit/Loss Analysis</h3>
      <button class="modal-close" id="closeProfitLossModal" style="font-size:1.5rem;">&times;</button>
    </div>
    <div id="profitLossDetailsContainer" style="margin-top:18px;min-height:120px;"></div>
  </div>
</div>


<!-- Quick Actions Floating Dock -->
<div id="quickActionsFloatingBar" class="quick-actions-floating-bar" style="display: none;">
  <div class="floating-bar-container">
    <div class="floating-dock-handle" id="floatingDockHandle" title="Drag to move">
    </div>
    <button class="floating-action-btn" data-action="add-member" title="Add Member">
      <i class="fas fa-user-plus"></i>
    </button>
    <button class="floating-action-btn" data-action="record-payment" title="Record Payment">
      <i class="fas fa-money-bill-wave"></i>
    </button>
    <button class="floating-action-btn" data-action="add-trainer" title="Add Trainer">
      <i class="fas fa-user-tie"></i>
    </button>
    <button class="floating-action-btn" data-action="add-equipment" title="Add Equipment">
      <i class="fas fa-dumbbell"></i>
    </button>
    <button class="floating-action-btn" data-action="generate-qr" title="Generate QR Code">
      <i class="fas fa-qrcode"></i>
    </button>
    <button class="floating-action-btn" data-action="biometric-enroll" title="Biometric Enrollment">
      <i class="fas fa-fingerprint"></i>
    </button>
    <button class="floating-action-btn" data-action="device-setup" title="Setup Devices">
      <i class="fas fa-cogs"></i>
    </button>
    <button class="floating-action-btn" data-action="send-notification" title="Send Notification">
      <i class="fas fa-bell"></i>
    </button>
    <button class="floating-bar-toggle" id="floatingBarToggle" title="Close Dock">
      <i class="fas fa-times"></i>
    </button>
  </div>
</div>

<!-- Quick Actions Circular Assistant -->
<div id="quickActionsCircularAssistant" class="quick-actions-circular-assistant collapsed" style="display: none;">
  <div class="circular-toggle" id="circularToggle">
    <i class="fas fa-bolt"></i>
    <div class="circular-arrow">
      <i class="fas fa-chevron-left"></i>
    </div>
  </div>
  
  <div class="circular-panel">
    <div class="circular-panel-header">
      <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
      <button class="circular-panel-close" id="circularPanelClose">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="circular-panel-content">
      <div class="circular-search">
        <input type="text" id="circularSearch" placeholder="Search actions..." />
        <i class="fas fa-search"></i>
      </div>
      
      <div class="circular-actions-grid">
        <div class="circular-action-item" data-action="add-member">
          <div class="circular-action-icon">
            <i class="fas fa-user-plus"></i>
          </div>
          <span class="circular-action-title">Add Member</span>
        </div>
        <div class="circular-action-item" data-action="record-payment">
          <div class="circular-action-icon">
            <i class="fas fa-money-bill-wave"></i>
          </div>
          <span class="circular-action-title">Record Payment</span>
        </div>
        <div class="circular-action-item" data-action="add-trainer">
          <div class="circular-action-icon">
            <i class="fas fa-user-tie"></i>
          </div>
          <span class="circular-action-title">Add Trainer</span>
        </div>
        <div class="circular-action-item" data-action="add-equipment">
          <div class="circular-action-icon">
            <i class="fas fa-dumbbell"></i>
          </div>
          <span class="circular-action-title">Add Equipment</span>
        </div>
        <div class="circular-action-item" data-action="generate-qr">
          <div class="circular-action-icon">
            <i class="fas fa-qrcode"></i>
          </div>
          <span class="circular-action-title">Generate QR</span>
        </div>
        <div class="circular-action-item" data-action="biometric-enroll">
          <div class="circular-action-icon">
            <i class="fas fa-fingerprint"></i>
          </div>
          <span class="circular-action-title">Biometric</span>
        </div>
        <div class="circular-action-item" data-action="device-setup">
          <div class="circular-action-icon">
            <i class="fas fa-cogs"></i>
          </div>
          <span class="circular-action-title">Device Setup</span>
        </div>
        <div class="circular-action-item" data-action="send-notification">
          <div class="circular-action-icon">
            <i class="fas fa-bell"></i>
          </div>
          <span class="circular-action-title">Notification</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Quick Actions Customization Modal -->
<div class="modal" id="quickActionsCustomizeModal" style="display: none;">
  <div class="modal-content" style="max-width: 700px;">
    <div class="modal-header-style">
      <h3 class="modal-title-style">
        <i class="fas fa-palette"></i> Customize Quick Actions
      </h3>
      <button class="modal-close" id="closeQuickActionsCustomizeModal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="customize-sections">
        <!-- Layout Options -->
        <div class="customize-section">
          <h4><i class="fas fa-layout"></i> Layout Style</h4>
          <div class="layout-options">
            <label class="layout-option">
              <input type="radio" name="quickActionsLayout" value="default" checked>
              <div class="layout-preview default">
                <div class="layout-title">Default Grid</div>
                <div class="layout-description">Standard card layout with grid buttons</div>
              </div>
            </label>
            <label class="layout-option">
              <input type="radio" name="quickActionsLayout" value="floating">
              <div class="layout-preview floating">
                <div class="layout-title">Floating Dock</div>
                <div class="layout-description">Fixed floating action buttons</div>
              </div>
            </label>
            <label class="layout-option">
              <input type="radio" name="quickActionsLayout" value="circular">
              <div class="layout-preview circular">
                <div class="layout-title">Circular Assistant</div>
                <div class="layout-description">Collapsible circular panel from edge</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Action Visibility -->
        <div class="customize-section">
          <h4><i class="fas fa-eye"></i> Visible Actions</h4>
          <div class="action-toggles">
            <label class="action-toggle">
              <input type="checkbox" data-action="add-member" checked>
              <span class="action-icon"><i class="fas fa-user-plus"></i></span>
              <span class="action-label">Add Member</span>
            </label>
            <label class="action-toggle">
              <input type="checkbox" data-action="record-payment" checked>
              <span class="action-icon"><i class="fas fa-money-bill-wave"></i></span>
              <span class="action-label">Record Payment</span>
            </label>
            <label class="action-toggle">
              <input type="checkbox" data-action="add-trainer" checked>
              <span class="action-icon"><i class="fas fa-user-tie"></i></span>
              <span class="action-label">Add Trainer</span>
            </label>
            <label class="action-toggle">
              <input type="checkbox" data-action="add-equipment" checked>
              <span class="action-icon"><i class="fas fa-dumbbell"></i></span>
              <span class="action-label">Add Equipment</span>
            </label>
            <label class="action-toggle">
              <input type="checkbox" data-action="generate-qr" checked>
              <span class="action-icon"><i class="fas fa-qrcode"></i></span>
              <span class="action-label">Generate QR Code</span>
            </label>
            <label class="action-toggle">
              <input type="checkbox" data-action="biometric-enroll" checked>
              <span class="action-icon"><i class="fas fa-fingerprint"></i></span>
              <span class="action-label">Biometric Enrollment</span>
            </label>
            <label class="action-toggle">
              <input type="checkbox" data-action="device-setup" checked>
              <span class="action-icon"><i class="fas fa-cogs"></i></span>
              <span class="action-label">Setup Devices</span>
            </label>
            <label class="action-toggle">
              <input type="checkbox" data-action="send-notification" checked>
              <span class="action-icon"><i class="fas fa-bell"></i></span>
              <span class="action-label">Send Notification</span>
            </label>
          </div>
        </div>

        <!-- Position Settings (for floating dock) -->
        <div class="customize-section" id="floatingPositionSection" style="display: none;">
          <h4><i class="fas fa-arrows-alt"></i> Floating Dock Position</h4>
          <div class="position-options">
            <label class="position-option">
              <input type="radio" name="floatingPosition" value="bottom">
              <span>Bottom</span>
            </label>
            <label class="position-option">
              <input type="radio" name="floatingPosition" value="top">
              <span>Top</span>
            </label>
            <label class="position-option">
              <input type="radio" name="floatingPosition" value="left">
              <span>Left</span>
            </label>
            <label class="position-option">
              <input type="radio" name="floatingPosition" value="right" checked>
              <span>Right</span>
            </label>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" id="resetQuickActionsCustomization">
        <i class="fas fa-undo"></i> Reset to Default
      </button>
      <button type="button" class="btn btn-primary" id="saveQuickActionsCustomization">
        <i class="fas fa-save"></i> Save Changes
      </button>
    </div>
  </div>
</div>

    <!-- Add Activities Modal -->
    <div class="modal" id="addActivitiesModal" style="display:none;">
      <div class="modal-content" style="max-width:700px; max-height:80vh; overflow-y:auto;">
        <div class="modal-header-style">
          <h3 class="modal-title-style"><i class="fas fa-plus-circle"></i> Add Activities</h3>
          <button class="modal-close" id="closeAddActivitiesModal">&times;</button>
        </div>
        <div class="modal-body">
          <div id="allActivitiesGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:18px;"></div>
        </div>
        <div class="modal-footer" style="display:flex;justify-content:flex-end;gap:10px;padding:20px;">
          <button type="button" class="btn btn-secondary" id="cancelAddActivitiesBtn">Cancel</button>
          <button type="button" class="btn btn-primary" id="saveActivitiesBtn">Save</button>
        </div>
      </div>
    </div>

    <!-- Save Activities Confirmation Dialog -->
    <div class="modal" id="saveActivitiesConfirmDialog" style="display:none;">
      <div class="modal-content" style="max-width:350px;text-align:center;">
        <div class="modal-header-style">
          <h3 class="modal-title-style">Save Activities</h3>
          <button class="modal-close" id="closeSaveActivitiesConfirmDialog">&times;</button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to save the selected activities?</p>
        </div>
        <div class="modal-footer" style="display:flex;justify-content:center;gap:10px;padding:20px;">
          <button id="confirmSaveActivitiesBtn" class="btn btn-primary">Save</button>
          <button id="cancelSaveActivitiesConfirmBtn" class="btn btn-secondary">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Enhanced Notification Modal -->
    <div class="modal" id="notificationModal" style="display: none;">
        <div class="modal-content" style="max-width: 650px;">
            <div class="modal-header-style">
                <h3 class="modal-title-style">
                    <i class="fas fa-paper-plane"></i> Send Notification
                </h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
               <!-- Recipient Filter -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-filter"></i> Send To
                    </label>
                    <select class="form-control" id="notificationSendTo">
                        <option value="all-members">All Members</option>
                        <option value="active-members">Active Membership Members Only</option>
                        <option value="expiring-members">Members with Expiring Membership (7 days)</option>
                        <option value="expired-members">Members with Expired Membership</option>
                        <option value="premium-members">Premium Members</option>
                        <option value="standard-members">Standard Members</option>
                        <option value="basic-members">Basic Members</option>
                        <option value="trainers">Trainers Only</option>
                        <option value="admin">Admin Only</option>
                        <option value="new-members">New Members (Last 30 days)</option>
                        <option value="custom">Custom Selection</option>
                    </select>
                </div>

                <!-- Quick Message Templates -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-bolt"></i> Quick Message Templates
                    </label>
                    <div class="quick-message-grid">
                        <button type="button" class="quick-msg-btn" data-template="membership-expiry">
                            <i class="fas fa-calendar-times"></i> Membership Expiry
                        </button>
                        <button type="button" class="quick-msg-btn" data-template="payment-reminder">
                            <i class="fas fa-credit-card"></i> Payment Reminder
                        </button>
                        <button type="button" class="quick-msg-btn" data-template="new-class">
                            <i class="fas fa-plus-circle"></i> New Class
                        </button>
                        <button type="button" class="quick-msg-btn" data-template="holiday-notice">
                            <i class="fas fa-calendar-alt"></i> Holiday Notice
                        </button>
                        <button type="button" class="quick-msg-btn" data-template="maintenance">
                            <i class="fas fa-tools"></i> Maintenance
                        </button>
                        <button type="button" class="quick-msg-btn" data-template="achievement">
                            <i class="fas fa-trophy"></i> Achievement
                        </button>
                    </div>
                </div>

               
                <!-- Custom Selection Area (hidden by default) -->
                <div class="form-group" id="customSelectionArea" style="display: none;">
                    <label class="form-label">Select Recipients</label>
                    <div class="custom-selection-container">
                        <div class="selection-search">
                            <input type="text" id="recipientSearch" placeholder="Search members..." class="form-control">
                        </div>
                        <div class="selection-list" id="customRecipientList">
                            <!-- Dynamic content will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Notification Channels -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-share-alt"></i> Notification Channels
                    </label>
                    <div class="channel-options">
                        <label class="channel-option">
                            <input type="checkbox" id="systemNotification" checked>
                            <span class="channel-icon"><i class="fas fa-bell"></i></span>
                            <span class="channel-label">Notification sytem</span>
                        </label>
                        <label class="channel-option">
                            <input type="checkbox" id="emailNotification">
                            <span class="channel-icon"><i class="fas fa-envelope"></i></span>
                            <span class="channel-label">Email</span>
                        </label>
                        <label class="channel-option">
                            <input type="checkbox" id="whatsappNotification">
                            <span class="channel-icon"><i class="fab fa-whatsapp"></i></span>
                            <span class="channel-label">WhatsApp</span>
                        </label>
                        <label class="channel-option">
    <input type="checkbox" id="mainAdminNotification">
    <span class="channel-icon"><i class="fas fa-user-shield"></i></span>
    <span class="channel-label">Send to Main Admin</span>
</label>
                    </div>
                </div>

                <!-- Message Content -->
                <div class="form-group">
                    <label class="form-label" for="notificationTitle">
                        <i class="fas fa-heading"></i> Notification Title
                    </label>
                    <input type="text" class="form-control" id="notificationTitle" placeholder="Enter notification title" maxlength="100">
                    <small class="char-count">0/100</small>
                </div>

                <div class="form-group">
                    <label class="form-label" for="notificationMessage">
                        <i class="fas fa-comment"></i> Message
                    </label>
                    <textarea class="form-control" id="notificationMessage" placeholder="Enter your message" rows="4" maxlength="500"></textarea>
                    <small class="char-count">0/500</small>
                </div>

                <!-- Message Preview -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-eye"></i> Message Preview
                    </label>
                    <div class="message-preview" id="messagePreview">
                        <div class="preview-title">Preview Title</div>
                        <div class="preview-message">Preview message will appear here...</div>
                    </div>
                </div>

                <!-- Delivery Options -->
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-clock"></i> Delivery Options
                    </label>
                    <div class="delivery-options">
                        <label class="delivery-option">
                            <input type="radio" name="deliveryTime" value="now" checked>
                            <span>Send Now</span>
                        </label>
                        <label class="delivery-option">
                            <input type="radio" name="deliveryTime" value="schedule">
                            <span>Schedule for Later</span>
                        </label>
                    </div>
                    <div class="schedule-container" id="scheduleContainer" style="display: none;">
                        <input type="datetime-local" id="scheduleTime" class="form-control">
                    </div>
                </div>

                <!-- Send Status -->
                <div class="send-status" id="sendStatus" style="display: none;">
                    <div class="status-item">
                        <i class="fas fa-bell"></i>
                        <span>System: </span>
                        <span class="status-text" id="systemStatus">Pending</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-envelope"></i>
                        <span>Email: </span>
                        <span class="status-text" id="emailStatus">Pending</span>
                    </div>
                    <div class="status-item">
                        <i class="fab fa-whatsapp"></i>
                        <span>WhatsApp: </span>
                        <span class="status-text" id="whatsappStatus">Pending</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="dashboardSendNotificationBtn">
                    <i class="fas fa-paper-plane"></i> Send Notification
                </button>
            </div>
        </div>
    </div>

    <!-- Attendance Statistics Modal -->
    <div class="modal" id="attendanceStatsModal" style="display: none;">
        <div class="modal-content" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 20px; border-bottom: 1px solid #eee;">
                <h3 class="modal-title" style="margin: 0; color: var(--primary);">
                    <i class="fas fa-chart-line"></i> Attendance Statistics
                </h3>
                <button class="modal-close" id="closeAttendanceStats" style="background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <!-- Today's Summary -->
                <div class="attendance-summary-section" style="margin-bottom: 30px;">
                    <h4 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-calendar-day"></i> Today's Attendance Summary
                    </h4>
                    <div class="attendance-summary-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <div class="summary-card" style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; border-left: 4px solid var(--success);">
                            <div class="summary-icon" style="font-size: 2rem; color: var(--success); margin-bottom: 10px;">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="summary-number" id="totalMembersPresent" style="font-size: 2rem; font-weight: bold; color: var(--success);">0</div>
                            <div class="summary-label" style="color: var(--text-secondary); font-size: 0.9rem;">Members Present</div>
                        </div>
                        <div class="summary-card" style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; border-left: 4px solid var(--primary);">
                            <div class="summary-icon" style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="summary-number" id="totalTrainersPresent" style="font-size: 2rem; font-weight: bold; color: var(--primary);">0</div>
                            <div class="summary-label" style="color: var(--text-secondary); font-size: 0.9rem;">Trainers Present</div>
                        </div>
                        <div class="summary-card" style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; border-left: 4px solid var(--warning);">
                            <div class="summary-icon" style="font-size: 2rem; color: var(--warning); margin-bottom: 10px;">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="summary-number" id="overallAttendancePercentage" style="font-size: 2rem; font-weight: bold; color: var(--warning);">0%</div>
                            <div class="summary-label" style="color: var(--text-secondary); font-size: 0.9rem;">Overall Attendance</div>
                        </div>
                    </div>
                </div>

                <!-- Monthly Chart Section -->
                <div class="monthly-chart-section" style="margin-bottom: 30px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                        <h4 style="color: var(--primary); margin: 0; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-chart-bar"></i> Monthly Attendance Trend
                        </h4>
                        <div class="chart-controls" style="display: flex; gap: 10px;">
                            <select id="attendanceChartMonth" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="0">January</option>
                                <option value="1">February</option>
                                <option value="2">March</option>
                                <option value="3">April</option>
                                <option value="4">May</option>
                                <option value="5">June</option>
                                <option value="6">July</option>
                                <option value="7">August</option>
                                <option value="8">September</option>
                                <option value="9">October</option>
                                <option value="10">November</option>
                                <option value="11">December</option>
                            </select>
                            <select id="attendanceChartYear" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="2025">2025</option>
                                <option value="2024">2024</option>
                                <option value="2023">2023</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-container" style="background: #f8f9fa; padding: 20px; border-radius: 8px; min-height: 400px;">
                        <canvas id="attendanceChart" style="width: 100%; height: 350px;"></canvas>
                    </div>
                </div>

                <!-- Detailed Statistics -->
                <div class="detailed-stats-section">
                    <h4 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-list"></i> Detailed Statistics
                    </h4>
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div class="stat-item" style="background: #f8f9fa; padding: 15px; border-radius: 8px; color: #222;">
                            <div class="stat-header" style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                <i class="fas fa-users" style="color: var(--success);"></i>
                                <span style="font-weight: bold;">Members</span>
                            </div>
                            <div class="stat-details">
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Total Members:</span>
                                    <span id="totalMembersCount">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Present Today:</span>
                                    <span id="membersPresentToday">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Absent Today:</span>
                                    <span id="membersAbsentToday">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; color: #222;">
                                    <span>Attendance Rate:</span>
                                    <span id="membersAttendanceRate">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-item" style="background: #f8f9fa; padding: 15px; border-radius: 8px; color: #222;">
                            <div class="stat-header" style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                <i class="fas fa-user-tie" style="color: var(--primary);"></i>
                                <span style="font-weight: bold;">Trainers</span>
                            </div>
                            <div class="stat-details">
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Total Trainers:</span>
                                    <span id="totalTrainersCount">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Present Today:</span>
                                    <span id="trainersPresentToday">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #222;">
                                    <span>Absent Today:</span>
                                    <span id="trainersAbsentToday">0</span>
                                </div>
                                <div class="stat-row" style="display: flex; justify-content: space-between; color: #222;">
                                    <span>Attendance Rate:</span>
                                    <span id="trainersAttendanceRate">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Photo Modal -->
    <div class="modal" id="uploadPhotoModal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header-style">
                <h3 class="modal-title-style"><i class="fas fa-camera"></i> Upload Gym Photo</h3>
                <span class="modal-close" id="closeUploadPhotoModal">&times;</span>
            </div>
            <form id="uploadGymPhotoForm" enctype="multipart/form-data" data-field="gymPhotos">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label" for="photoTitle">Photo Title</label>
                        <input type="text" class="form-control" id="photoTitle" name="title" placeholder="Enter photo title" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="photoDescription">Description</label>
                        <textarea class="form-control" id="photoDescription" name="description" placeholder="Enter photo description" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="photoFile">Upload Photo</label>
                        <input type="file" id="photoFile" name="photo" accept="image/*" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="photoCategory">Category</label>
                        <select class="form-control" id="photoCategory" name="category" required>
                            <option>Gym Facility</option>
                            <option>Equipment</option>
                            <option>Classes</option>
                            <option>Events</option>
                        </select>
                    </div>
                </div>
                <div id="uploadPhotoMsg" style="margin-bottom: 10px; color: green; text-align: center;"></div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="cancelUploadPhotoBtn" type="button" style="margin-right:8px;">Cancel</button>
                    <button class="btn btn-primary" type="submit">Upload Photo</button>
                </div>
            </form>
        </div>
    </div>
       <!-- Edit Gym Photo Modal -->
    <div class="modal" id="editPhotoModal" style="display:none;">
      <div class="modal-content">
        <div class="modal-header-style">
          <h3 class="modal-title-style">Edit Gym Photo</h3>
        <span class="modal-close" id="closeEditPhotoModal">&times;</span>
        </div>
        <form id="editPhotoForm" enctype="multipart/form-data">
          <input type="hidden" name="photoId" id="editPhotoId">
          <label for="editPhotoTitle">Title</label>
          <input type="text" name="title" id="editPhotoTitle" required>
          <label for="editPhotoDescription">Description</label>
          <textarea name="description" id="editPhotoDescription" required></textarea>
          <label for="editPhotoFile">Change Image (optional)</label>
          <input type="file" name="photo" id="editPhotoFile" accept="image/*">
          <div id="editPhotoPreview" style="margin: 10px 0;"></div>
          <div id="editPhotoMsg" style="margin-bottom: 10px; color: green; text-align: center;"></div>
           <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" id="cancelEditPhotoBtn" class="btn btn-secondary" style="margin-right:8px;">Cancel</button>
        </form>
      </div>
    </div>

    <!-- Gym Profile Modal -->
    <div class="modal" id="gymProfileModal" style="display:none;">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 20px; border-bottom: 1px solid #eee;">
                <h2 style="margin: 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-building" style="color: var(--primary);"></i>
                    Gym Profile
                </h2>
                <span class="modal-close" id="closeGymProfileModal" style="font-size: 24px; cursor: pointer;">&times;</span>
            </div>
            
            <div style="padding: 20px;">
                <!-- View Mode / Edit Mode Toggle -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div class="mode-indicator" id="modeIndicator">
                        <span class="view-mode active" id="viewModeTab">
                            <i class="fas fa-eye"></i> View Mode
                        </span>
                        <span class="edit-mode" id="editModeTab">
                            <i class="fas fa-edit"></i> Edit Mode
                        </span>
                    </div>
                    <button id="toggleEditModeBtn" class="btn btn-primary">
                        <i class="fas fa-edit"></i> Enable Edit Mode
                    </button>
                </div>

                <!-- Gym Logo Section -->
                <div class="gym-logo-section" style="text-align: center; margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
                    <div class="logo-container" style="position: relative; display: inline-block;">
                        <div class="gym-logo-display" style="width: 120px; height: 120px; border-radius: 12px; background: white; display: flex; align-items: center; justify-content: center; border: 3px solid #dee2e6; margin: 0 auto;">
                            <img id="gymLogoImage" src="https://via.placeholder.com/120?text=GYM+LOGO" alt="Gym Logo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="logo-upload-overlay" id="logoUploadOverlay" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); border-radius: 12px; align-items: center; justify-content: center; cursor: pointer;">
                            <i class="fas fa-camera" style="color: white; font-size: 24px;"></i>
                        </div>
                    </div>
                    <input type="file" id="gymLogoInput" accept="image/*" style="display: none;">
                    <p style="margin-top: 10px; color: #6c757d; font-size: 14px;">Click to change gym logo (Edit Mode)</p>
                </div>

                <!-- Gym Information Form -->
                <form id="gymProfileForm">
                    <!-- Basic Information -->
                    <div class="info-section" style="margin-bottom: 30px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-info-circle"></i> Basic Information
                        </h3>
                        <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="gymName">Gym Name</label>
                                <input type="text" id="gymName" name="gymName" readonly>
                            </div>
                            <div class="form-group">
                                <label for="ownerName">Owner/Contact Person</label>
                                <input type="text" id="ownerName" name="contactPerson" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymEmail">Email</label>
                                <input type="email" id="gymEmail" name="email" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymPhone">Phone</label>
                                <input type="text" id="gymPhone" name="phone" readonly>
                            </div>
                            <div class="form-group">
                                <label for="supportEmail">Support Email</label>
                                <input type="email" id="supportEmail" name="supportEmail" readonly>
                            </div>
                            <div class="form-group">
                                <label for="supportPhone">Support Phone</label>
                                <input type="text" id="supportPhone" name="supportPhone" readonly>
                            </div>
                        </div>
                    </div>

                    <!-- Location Information -->
                    <div class="info-section" style="margin-bottom: 30px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-map-marker-alt"></i> Location
                        </h3>
                        <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group" style="grid-column: 1 / -1;">
                                <label for="gymAddress">Address</label>
                                <input type="text" id="gymAddress" name="address" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymCity">City</label>
                                <input type="text" id="gymCity" name="city" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymState">State</label>
                                <input type="text" id="gymState" name="state" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymPincode">Pincode</label>
                                <input type="text" id="gymPincode" name="pincode" readonly>
                            </div>
                            <div class="form-group">
                                <label for="gymLandmark">Landmark</label>
                                <input type="text" id="gymLandmark" name="landmark" readonly>
                            </div>
                        </div>
                    </div>

                    <!-- Operational Information -->
                    <div class="info-section" style="margin-bottom: 30px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-clock"></i> Operations
                        </h3>
                        <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="openingTime">Opening Time</label>
                                <input type="time" id="openingTime" name="openingTime" readonly>
                            </div>
                            <div class="form-group">
                                <label for="closingTime">Closing Time</label>
                                <input type="time" id="closingTime" name="closingTime" readonly>
                            </div>
                            <div class="form-group">
                                <label for="currentMembers">Current Members</label>
                                <input type="number" id="currentMembers" name="membersCount" readonly>
                            </div>
                           
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="info-section" style="margin-bottom: 30px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-align-left"></i> Description
                        </h3>
                        <div class="form-group">
                            <textarea id="gymDescription" name="description" rows="4" readonly style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"></textarea>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="modal-actions" style="display: flex; justify-content: flex-end; gap: 10px; padding-top: 20px; border-top: 1px solid #eee;">
                        <button type="button" id="cancelGymProfileBtn" class="btn btn-secondary" style="display: none;">Cancel</button>
                        <button type="submit" id="saveGymProfileBtn" class="btn btn-primary" style="display: none;">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal" id="changePasswordModal" style="display:none;">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 20px; border-bottom: 1px solid #eee;">
                <h2 style="margin: 0; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-lock" style="color: var(--primary);"></i>
                    Change Password
                </h2>
                <span class="modal-close" id="closeChangePasswordModal" style="font-size: 24px; cursor: pointer;">&times;</span>
            </div>
            
            <div style="padding: 20px;">
                <form id="changePasswordForm">
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label for="currentPassword">Current Password</label>
                        <div style="position: relative;">
                            <input type="password" id="currentPassword" name="currentPassword" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; padding-right: 40px;">
                            <i class="fas fa-eye toggle-password" data-target="currentPassword" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #6c757d;"></i>
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label for="newPassword">New Password</label>
                        <div style="position: relative;">
                            <input type="password" id="newPassword" name="newPassword" required minlength="8" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; padding-right: 40px;">
                            <i class="fas fa-eye toggle-password" data-target="newPassword" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #6c757d;"></i>
                        </div>
                        <small style="color: #6c757d;">Password must be at least 8 characters long</small>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label for="confirmPassword">Confirm New Password</label>
                        <div style="position: relative;">
                            <input type="password" id="confirmPassword" name="confirmPassword" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; padding-right: 40px;">
                            <i class="fas fa-eye toggle-password" data-target="confirmPassword" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #6c757d;"></i>
                        </div>
                    </div>

                    <!-- Password Strength Indicator -->
                    <div id="passwordStrength" style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span style="font-size: 14px; color: #6c757d;">Password Strength:</span>
                            <span id="strengthText" style="font-size: 14px; font-weight: bold;">Weak</span>
                        </div>
                        <div style="height: 4px; background: #eee; border-radius: 2px; overflow: hidden;">
                            <div id="strengthBar" style="height: 100%; width: 0%; background: #dc3545; transition: all 0.3s ease;"></div>
                        </div>
                    </div>

                    <div class="modal-actions" style="display: flex; justify-content: flex-end; gap: 10px; padding-top: 15px;">
                        <button type="button" id="cancelPasswordChangeBtn" class="btn btn-secondary">Cancel</button>
                        <button type="submit" id="savePasswordBtn" class="btn btn-primary">
                            <i class="fas fa-save"></i> Change Password
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

   >
   <!-- Password Confirmation Dialog -->
<div id="passwordConfirmDialog" class="modal" style="display:none;">
  <div class="modal-content" style="max-width:350px;">
    <span class="modal-close" id="closePasswordConfirmDialog">&times;</span>
    <form id="passwordConfirmForm">
      <label for="currentPassword">Please enter your current password to confirm changes:</label>
      <input type="password" id="currentPassword" name="currentPassword" required autocomplete="current-password">
      <button type="submit" class="btn btn-primary" style="margin-top:1rem;">Confirm</button>
    </form>
  </div>
</div>
   <!-- Delete Photo Confirmation Modal -->
<div class="modal" id="deletePhotoConfirmModal" style="display:none;">
  <div class="modal-content" style="max-width:340px; text-align:center;">
    <span class="modal-close" id="closeDeletePhotoConfirmModal" style="float:right;cursor:pointer;">&times;</span>
    <h3 style="margin-bottom:18px;">Delete Photo</h3>
    <p>Are you sure you want to delete this photo?</p>
    <div style="margin-top:18px;">
      <button id="confirmDeletePhotoBtn" class="btn btn-danger" style="margin-right:10px;">Delete</button>
      <button id="cancelDeletePhotoBtn" class="btn btn-secondary">Cancel</button>
    </div>
  </div>
</div>
<!-- Add Member Modal -->
<div class="modal" id="addMemberModal">
  <div class="modal-content">
   <div class="modal-header-style">
    <h3 class="modal-title-style"><i class="fas fa-user-plus"></i> Add New Member</h3>
    <button class="modal-close" id="closeAddMemberModal">&times;</button>
   </div>
    <form id="addMemberForm" enctype="multipart/form-data">
      <div class="form-group" style="display: flex; flex-direction: column; align-items: center;">
        <label for="memberProfileImage" style="margin-bottom: 0.5rem;">Profile Image</label>
        <div id="memberImagePreview" style="width: 96px; height: 96px; border-radius: 50%; background: #f0f0f0; overflow: hidden; display: flex; align-items: center; justify-content: center; margin-bottom: 0.5rem;">
          <img src="https://via.placeholder.com/96?text=Photo" alt="Preview" style="width: 96px; height: 96px; object-fit: cover; border-radius: 50%;" id="memberImageTag">
        </div>
        <input type="file" id="memberProfileImage" name="profileImage" accept="image/*" style="display:none;">
        <button type="button" id="uploadMemberImageBtn" style="margin-bottom: 0.5rem;">Choose Image</button>
      </div>
      <div class="form-group">
        <label for="memberName">Name</label>
        <input type="text" id="memberName" name="memberName" required>
      </div>
      <div class="form-group">
        <label for="memberAge">Age</label>
        <input type="number" id="memberAge" name="memberAge" min="10" max="100" required>
      </div>
      <div class="form-group">
        <label for="memberGender">Gender</label>
        <select id="memberGender" name="memberGender" required>
          <option value="">Select</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
      </div>
      <div class="form-group">
        <label for="memberPhone">Phone No.</label>
        <input type="tel" id="memberPhone" name="memberPhone" pattern="[0-9]{10}" required>
      </div>
      <div class="form-group">
        <label for="memberEmail">Email</label>
        <input type="email" id="memberEmail" name="memberEmail" required>
      </div>
      <div class="form-group">
        <label for="memberAddress">Address</label>
        <input type="text" id="memberAddress" name="memberAddress" placeholder="Street, City, State" required>
      </div>
      <div class="form-group">
        <label for="paymentMode">Payment Mode</label>
        <select id="paymentMode" name="paymentMode" required>
          <option value="">Select</option>
          <option value="Cash">Cash</option>
          <option value="Card">Card</option>
          <option value="UPI">UPI</option>
          <option value="Online">Online</option>
        </select>
      </div>
      <div class="form-group">
        <label for="planSelected">Plan Selected</label>
        <select id="planSelected" name="planSelected" required>
          <option value="">Select</option>
          <option value="Basic">Basic</option>
          <option value="Standard">Standard</option>
          <option value="Premium">Premium</option>
        </select>
      </div>
      <div class="form-group">
        <label for="monthlyPlan">Monthly Plan</label>
        <select id="monthlyPlan" name="monthlyPlan" required>
          <option value="">Select</option>
          <option value="1 Month">1 Month</option>
          <option value="3 Months">3 Months</option>
          <option value="6 Months">6 Months</option>
          <option value="12 Months">12 Months</option>
        </select>
      </div>
       <div class="form-group">
        <label for="paymentAmount">Payment Amount</label>
        <input type="number" id="paymentAmount" name="paymentAmount" min="0" required>
        <div id="discountInfo" style="margin-top: 8px; padding: 8px; border-radius: 4px; font-size: 0.9em; display: none;">
          <i class="fas fa-tag"></i> <span id="discountText">No discount applied</span>
        </div>
      </div>
      <div class="form-group">
        <label for="activityPreference">Activity Preference</label>
        <select id="activityPreference" name="activityPreference" required>
          <option value="">Select Activity</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">Add Member</button>
      <div id="addMemberSuccessMsg" style="display:none;"></div>
    </form>
  </div>
</div>

<!-- Renew Membership Modal -->
<div class="modal" id="renewMembershipModal" style="display:none;">
  <div class="modal-content" style="max-width:600px;">
    <div class="modal-header-style">
    <h3 class="modal-title-style"><i class="fas fa-redo-alt"></i> Renew Membership</h3>
    <button class="modal-close" id="closeRenewMembershipModal">&times;</button>
    </div>
    <!-- Member Info Display -->
    <div id="renewMemberInfo" style="background:#f8f9fa;padding:1rem;border-radius:8px;margin-bottom:1.5rem;border-left:4px solid #1976d2;">
      <h4 style="margin:0 0 0.5rem 0;color:#333;">Member Details</h4>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.5rem;font-size:0.9rem;">
        <div><strong>Name:</strong> <span id="renewMemberName"></span></div>
        <div><strong>ID:</strong> <span id="renewMembershipId"></span></div>
        <div><strong>Current Plan:</strong> <span id="renewCurrentPlan"></span></div>
        <div><strong>Expires:</strong> <span id="renewExpiryDate"></span></div>
      </div>
    </div>

    <form id="renewMembershipForm">
      <input type="hidden" id="renewMemberId" name="memberId">
      
      <div class="form-group">
        <label for="renewPlanSelected">New Plan</label>
        <select id="renewPlanSelected" name="planSelected" required>
          <option value="">Select Plan</option>
          <option value="Basic">Basic</option>
          <option value="Standard">Standard</option>
          <option value="Premium">Premium</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="renewMonthlyPlan">Duration</label>
        <select id="renewMonthlyPlan" name="monthlyPlan" required>
          <option value="">Select Duration</option>
          <option value="1 Month">1 Month</option>
          <option value="3 Months">3 Months</option>
          <option value="6 Months">6 Months</option>
          <option value="12 Months">12 Months</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="renewPaymentAmount">Payment Amount</label>
        <input type="number" id="renewPaymentAmount" name="paymentAmount" min="0" required readonly style="background:#f5f5f5;">
        <small style="color:#666;font-size:0.85em;">Amount calculated automatically based on plan and duration</small>
        <div id="renewDiscountInfo" style="margin-top: 8px; padding: 8px; border-radius: 4px; font-size: 0.9em; display: none;">
          <i class="fas fa-tag"></i> <span id="renewDiscountText">No discount applied</span>
        </div>
      </div>
      
      <div class="form-group">
        <label for="renewPaymentMode">Payment Mode</label>
        <select id="renewPaymentMode" name="paymentMode" required>
          <option value="">Select Payment Mode</option>
          <option value="Cash">Cash</option>
          <option value="Card">Card</option>
          <option value="UPI">UPI</option>
          <option value="Online">Online</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="renewActivityPreference">Activity Preference</label>
        <input type="text" id="renewActivityPreference" name="activityPreference" placeholder="e.g. Yoga, Cardio, Zumba" required>
      </div>
      
      <div style="display:flex;gap:1rem;justify-content:center;margin-top:1.5rem;">
        <button type="button" id="cancelRenewMembership" class="btn btn-secondary">Cancel</button>
        <button type="submit" class="btn btn-primary" id="renewMembershipBtn" style="display:flex;align-items:center;gap:8px;transition:color .2s;">
          <i class="fas fa-redo-alt" style="transition:transform .2s;"></i>
          <span>Renew Membership</span>
        </button>
      </div>
    </form>
  </div>
</div>

<!-- QR Code Generator Modal -->
<div class="modal" id="qrCodeGeneratorModal" style="display:none;z-index:100000;">
  <div class="modal-content" style="max-width:600px; max-height:90vh; overflow-y:auto;">
    <div class="modal-header-style">
      <h3 class="modal-title-style"><i class="fas fa-qrcode"></i> QR Code Generator - Member Registration</h3>
      <button class="modal-close" id="closeQRCodeModal" style="background:none;border:none;font-size:24px;cursor:pointer;">&times;</button>
    </div>
    <div class="modal-body" style="padding:20px;">
      
      <!-- QR Code Configuration -->
      <div class="qr-config-section" style="margin-bottom:25px;">
        <h4 style="color:#333;margin-bottom:15px;display:flex;align-items:center;gap:8px;">
          <i class="fas fa-cog"></i> QR Code Configuration
        </h4>
        
        <div class="form-group" style="margin-bottom:15px;">
          <label style="display:block;font-weight:600;margin-bottom:5px;">Registration Type:</label>
          <select id="qrRegistrationType" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;">
            <option value="standard">Standard Registration</option>
            <option value="trial">Trial Membership (3 Days)</option>
            <option value="premium">Premium Registration</option>
          </select>
        </div>
        
        <div class="form-group" style="margin-bottom:15px;">
          <label style="display:block;font-weight:600;margin-bottom:5px;">Default Plan:</label>
          <select id="qrDefaultPlan" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;">
            <option value="">Let User Choose</option>
            <option value="basic">Basic Plan</option>
            <option value="standard">Standard Plan</option>
            <option value="premium">Premium Plan</option>
          </select>
        </div>
        
        <div class="form-group" style="margin-bottom:15px;">
          <label style="display:block;font-weight:600;margin-bottom:5px;">Usage Limit:</label>
          <select id="qrUsageLimit" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;">
            <option value="1">One-Time Use</option>
            <option value="5">5 Uses</option>
            <option value="10">10 Uses</option>
            <option value="unlimited">Unlimited</option>
          </select>
        </div>
        
        <div class="form-group" style="margin-bottom:15px;">
          <label style="display:block;font-weight:600;margin-bottom:5px;">Expiry Date:</label>
          <input type="datetime-local" id="qrExpiryDate" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;">
        </div>
        
        <div class="form-group" style="margin-bottom:15px;">
          <label style="display:block;font-weight:600;margin-bottom:5px;">Special Offer/Discount:</label>
          <input type="text" id="qrSpecialOffer" placeholder="e.g., 20% off first month" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;">
        </div>
      </div>
      
      <!-- Generate Button -->
      <div style="text-align:center;margin-bottom:25px;">
        <button id="generateQRBtn" class="btn btn-primary" style="padding:12px 30px;font-size:16px;display:flex;align-items:center;gap:10px;margin:0 auto;">
          <i class="fas fa-magic"></i> Generate QR Code
        </button>
      </div>
      
      <!-- QR Code Display -->
      <div id="qrCodeDisplay" style="display:none;">
        <div class="qr-code-section" style="background:#f8f9fa;padding:25px;border-radius:12px;text-align:center;margin-bottom:20px;">
          <h4 style="color:#333;margin-bottom:20px;display:flex;align-items:center;justify-content:center;gap:8px;">
            <i class="fas fa-qrcode"></i> Generated QR Code
          </h4>
          
          <!-- QR Code Canvas -->
          <div id="qrCodeCanvas" style="margin:0 auto 20px;padding:20px;background:white;border-radius:8px;display:inline-block;box-shadow:0 4px 12px rgba(0,0,0,0.1);"></div>
          
          <!-- QR Code Info -->
          <div class="qr-info-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin:20px 0;">
            <div class="qr-info-item" style="background:white;padding:15px;border-radius:8px;text-align:center;">
              <i class="fas fa-link" style="color:#3b82f6;font-size:24px;margin-bottom:8px;"></i>
              <div style="font-weight:600;color:#333;margin-bottom:5px;">Registration URL</div>
              <div id="qrUrl" style="font-size:12px;color:#666;word-break:break-all;"></div>
            </div>
            <div class="qr-info-item" style="background:white;padding:15px;border-radius:8px;text-align:center;">
              <i class="fas fa-clock" style="color:#f59e0b;font-size:24px;margin-bottom:8px;"></i>
              <div style="font-weight:600;color:#333;margin-bottom:5px;">Expires On</div>
              <div id="qrExpiryDisplay" style="font-size:14px;color:#666;"></div>
            </div>
            <div class="qr-info-item" style="background:white;padding:15px;border-radius:8px;text-align:center;">
              <i class="fas fa-users" style="color:#10b981;font-size:24px;margin-bottom:8px;"></i>
              <div style="font-weight:600;color:#333;margin-bottom:5px;">Usage Limit</div>
              <div id="qrUsageDisplay" style="font-size:14px;color:#666;"></div>
            </div>
            <div class="qr-info-item" style="background:white;padding:15px;border-radius:8px;text-align:center;">
              <i class="fas fa-chart-line" style="color:#8b5cf6;font-size:24px;margin-bottom:8px;"></i>
              <div style="font-weight:600;color:#333;margin-bottom:5px;">Usage Count</div>
              <div id="qrUsageCount" style="font-size:14px;color:#666;">0 times used</div>
            </div>
          </div>
          
          <!-- Action Buttons -->
          <div class="qr-action-buttons">
            <button id="downloadQRBtn" class="btn btn-success">
              <i class="fas fa-download"></i> Download QR Code
            </button>
            <button id="copyQRUrlBtn" class="btn btn-secondary">
              <i class="fas fa-copy"></i> Copy URL
            </button>
            <button id="shareQRBtn" class="btn btn-info">
              <i class="fas fa-share"></i> Share
            </button>
            <button id="printQRBtn" class="btn btn-warning">
              <i class="fas fa-print"></i> Print
            </button>
          </div>
        </div>
        
        <!-- Usage Statistics -->
        <div class="qr-stats-section" style="background:#f8f9fa;padding:20px;border-radius:12px;">
          <h4 style="color:#333;margin-bottom:15px;display:flex;align-items:center;gap:8px;">
            <i class="fas fa-chart-bar"></i> Usage Statistics
          </h4>
          <div id="qrStatsContent">
            <p style="color:#666;text-align:center;margin:0;">Statistics will appear here once the QR code is used.</p>
          </div>
        </div>
      </div>
      
      <!-- Active QR Codes List -->
      <div class="active-qr-section" style="margin-top:25px;">
        <h4 style="color:#333;margin-bottom:15px;display:flex;align-items:center;gap:8px;">
          <i class="fas fa-list"></i> Active QR Codes
        </h4>
        <div id="activeQRList" style="max-height:200px;overflow-y:auto;">
          <!-- Active QR codes will be listed here -->
        </div>
      </div>
      
    </div>
  </div>
</div>

 <!-- Trainer Registration Modal (Quick Action) -->
    <div class="modal" id="trainerRegistrationModal" style="display:none;">
      <div class="modal-content">
        <div class="modal-header-style">
          <h3 class="modal-title-style"><i class="fas fa-user-plus"></i>Trainer Registration</h3>
          <button class="modal-close" id="closeTrainerRegistrationModal">&times;</button>
        </div>
        <!-- Profile Image Upload at Top Center -->
        <div class="form-group" style="display: flex; flex-direction: column; align-items: center; margin-bottom: 1.5rem; margin-top: 1rem;">
          <label for="trainerProfileImage" style="margin-bottom: 0.5rem;">Profile Image</label>
          <div id="trainerImagePreview" style="width: 96px; height: 96px; border-radius: 50%; background: #f0f0f0; overflow: hidden; display: flex; align-items: center; justify-content: center; margin-bottom: 0.5rem;">
            <img src="https://via.placeholder.com/96?text=Photo" alt="Preview" style="width: 96px; height: 96px; object-fit: cover; border-radius: 50%;" id="trainerImageTag">
          </div>
          <input type="file" id="trainerProfileImage" name="profileImage" accept="image/*" style="display:none;">
          <button type="button" id="uploadTrainerImageBtn" class="btn btn-info" style="margin-bottom: 0.5rem;">Choose Image</button>
        </div>
        <form class="registration-form" id="trainerRegistrationForm" enctype="multipart/form-data" action="javascript:void(0);">
          <div class="form-row">
            <div class="form-col">
              <label for="trainerFirstName">First Name</label>
              <input type="text" id="trainerFirstName" name="firstName" required>
            </div>
            <div class="form-col">
              <label for="trainerLastName">Last Name</label>
              <input type="text" id="trainerLastName" name="lastName" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerEmail">Email Address</label>
              <input type="email" id="trainerEmail" name="email" required>
            </div>
            <div class="form-col">
              <label for="trainerPhone">Phone Number</label>
              <input type="tel" id="trainerPhone" name="phone" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerSpecialty">Primary Specialty</label>
              <select id="trainerSpecialty" name="specialty" required>
                <option value="">Select specialty of Trainer</option>
                <option value="Weight Loss">Weight Loss</option>
                <option value="Bodybuilding">Bodybuilding</option>
                <option value="Functional Training">Functional Training</option>
                <option value="Sports Performance">Sports Performance</option>
                <option value="Rehabilitation">Rehabilitation</option>
              </select>
            </div>
            <div class="form-col">
              <label for="trainerExperience">Years of Experience</label>
              <input type="number" id="trainerExperience" min="0" name="experience" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerAvailability">Availability</label>
              <div id="availabilityFieldset" style="display:flex;flex-direction:column;gap:8px;">
                <div class="trainer-quick-btn-row" style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;align-items:center;margin-bottom:4px;">
                  <button type="button" class="btn btn-info" id="setAllMorning" style="width:100%;">All Mornings</button>
                  <button type="button" class="btn btn-info" id="setAllAfternoon" style="width:100%;">All Afternoons</button>
                  <button type="button" class="btn btn-info" id="setAllEvening" style="width:100%;">All Evenings</button>
                  <button type="button" class="btn btn-warning" id="clearAllAvailability" style="width:100%;">Clear</button>
                </div>
                <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px;">
                  <div><label for="availMonday">Monday</label><input type="text" id="availMonday" class="day-availability" data-day="Monday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availTuesday">Tuesday</label><input type="text" id="availTuesday" class="day-availability" data-day="Tuesday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availWednesday">Wednesday</label><input type="text" id="availWednesday" class="day-availability" data-day="Wednesday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availThursday">Thursday</label><input type="text" id="availThursday" class="day-availability" data-day="Thursday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availFriday">Friday</label><input type="text" id="availFriday" class="day-availability" data-day="Friday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availSaturday">Saturday</label><input type="text" id="availSaturday" class="day-availability" data-day="Saturday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                  <div><label for="availSunday">Sunday</label><input type="text" id="availSunday" class="day-availability" data-day="Sunday" placeholder="e.g. 7am-11am, 5pm-8pm"></div>
                </div>
                <textarea id="trainerAvailability" name="availability" style="margin-top:8px;" placeholder="Or describe your typical availability (optional)"></textarea>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerCertifications">Certifications</label>
              <div class="certification-upload">
                <p>Upload copies of certifications (PDF, JPG, or PNG)</p>
                <input type="file" id="trainerCertifications" multiple accept=".pdf,.jpg,.jpeg,.png" name="certifications" />
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerBio">Professional Bio</label>
              <textarea id="trainerBio" placeholder="write training philosophy and approach" name="bio"></textarea>
            </div>
          </div>
          <div class="form-row">
            <div class="form-col">
              <label for="trainerRate">Hourly Rate (₹)</label>
              <input type="number" id="trainerRate" min="0" step="5" name="rate" required>
            </div>
          </div>
          <div id="trainerFormResponseMessage" style="display: none; margin-top: 15px; padding: 10px; border-radius: 5px;"></div>
          <div class="form-actions" style="margin-top: 20px;">
            <button type="submit" class="btn btn-primary" id="submitTrainerRegistrationBtn" style="display:flex;align-items:center;justify-content:center;width:100%;">Register Profile</button>
          </div>
        </form>
        <div id="trainer-registration-success-message" style="display: none; margin-top: 20px; padding: 15px; border-radius: 8px; text-align: center; background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;">
          <h4 style="margin-top: 0; margin-bottom: 10px;">🎉 Registration Submitted!</h4>
          <p style="margin-bottom: 5px;">Your application is now awaiting admin approval.</p>
          <p>You'll receive an email soon with the status.</p>
        </div>
      </div>
    </div>
<!-- Member Display Tab (hidden by default) -->
<div id="memberDisplayTab" class="tab-content" style="display:none;">
  <div class="tab-inner-content">
  <div class="page-header">
    <h1 class="page-title"><i class="fas fa-users"></i> All Members</h1>
    <div class="member-action-btn-group">
      <button id="addMemberBtnTab" class="member-action-btn add-member-action-btn">
        <i class="fas fa-user-plus"></i><span class="btn-text"> Add Member</span>
      </button>
      <button id="removeMemberBtnTab" class="member-action-btn remove-member-action-btn">
        <i class="fas fa-user-minus"></i><span class="btn-text"> Remove Members</span>
      </button>
      <!-- Remove Member dropdown and modal will be created and managed by JS only -->
    </div>
  </div>
  <div class="search-bar" style="display:flex;align-items:center;gap:12px;margin-bottom:18px;background:#f8f9fa;padding:10px 18px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.04);">
    <span class="search-icon" style="color:var(--primary);font-size:1.2rem;margin-right:6px;"><i class="fas fa-search"></i></span>
    <input type="text" id="memberSearchInput" placeholder="Search by Name, Email, Phone, Membership ID..." style="flex:1;padding:8px 12px;border:1px solid #d0d7de;border-radius:6px;font-size:1rem;outline:none;transition:border 0.2s;">
    <select id="membershipExpiryFilter" style="padding:8px 12px;border:1px solid #d0d7de;border-radius:6px;font-size:1rem;background:#fff;">
      <option value="">All Members</option>
      <option value="3days">Expiring in 3 Days</option>
      <option value="1day">Expiring in 1 Day</option>
    </select>
  </div>
  <div id="membersTableContainer">
    <table id="membersTable" style="width:100%; border-collapse:collapse;">
      <thead>
        <tr>
          <th>Profile</th>
          <th>Name</th>
          <th>Membership ID</th>
          <th>Age</th>
          <th>Gender</th>
          <th>Phone</th>
          <th>Email</th>
          <th>Address</th>
          <th>Plan</th>
          <th>Monthly</th>
          <th>Activity</th>
          <th>Join Date</th>
          <th>Valid Until</th>
          <th>Amount Paid</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="membersTableBody">
        <!-- Members will be loaded here -->
       
      </tbody>
    </table>
  </div>
  </div><!-- Close tab-inner-content -->
</div><!-- Close memberDisplayTab -->

<!-- Modern Member Detail Drawer -->
<div id="membersDetailDrawer" class="member-detail-drawer" style="display:none;">
  <!-- Backdrop -->
  <div class="member-drawer-backdrop" id="memberDrawerBackdrop"></div>
  
  <!-- Drawer Content -->
  <div class="member-drawer-content" id="memberDrawerContent">
    <!-- Header -->
    <div class="member-drawer-header">
      <div class="member-drawer-title">
        <i class="fas fa-user-circle"></i>
        <span>Member Details</span>
      </div>
      <button class="member-drawer-close" id="closeMemberDrawer" title="Close">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <!-- Body -->
    <div class="member-drawer-body" id="memberDrawerBody">
      <!-- Content will be injected dynamically -->
      <div class="member-drawer-loading">
        <i class="fas fa-spinner fa-spin"></i>
        <p>Loading member details...</p>
      </div>
    </div>
    
    <!-- Footer Actions -->
    <div class="member-drawer-footer" id="memberDrawerFooter" style="display:none;">
      <button class="btn-drawer-action btn-edit" id="editMemberDrawerBtn">
        <i class="fas fa-edit"></i> Edit Member
      </button>
      <button class="btn-drawer-action btn-renew" id="renewMemberDrawerBtn">
        <i class="fas fa-redo"></i> Renew Membership
      </button>
      <button class="btn-drawer-action btn-delete" id="deleteMemberDrawerBtn">
        <i class="fas fa-trash-alt"></i> Remove Member
      </button>
    </div>
  </div>
</div>
<!-- Trainer Tab -->
<div id="trainerTab" class="tab-content" style="display:none;">
  <div class="tab-inner-content">
  <div class="page-header" >
    <h1 class="page-title">
      <i class="fas fa-user-tie"></i> Trainer Management
      <span id="trainerPendingBadge" style="background:#ff9800;color:#fff;padding:4px 10px;border-radius:14px;font-size:0.75rem;font-weight:600;display:none;">0 Pending</span>
    </h1>
    <div class="trainer-actions" style="display:flex;gap:10px;align-items:center;">
      <button id="refreshTrainersBtn" class="btn btn-secondary" style="display:flex;align-items:center;gap:6px;">
        <i class="fas fa-sync-alt"></i><span>Refresh</span>
      </button>
    </div>
  </div>

  <!-- Tabs -->
  <div class="trainer-tabs" style="display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap;">
    <button class="trainer-tab-btn active" data-section="pending" id="trainerTabPendingBtn"><i class="fas fa-hourglass-half"></i> Pending <span class="count-badge" id="pendingTrainersCount">0</span></button>
    <button class="trainer-tab-btn" data-section="approved" id="trainerTabApprovedBtn"><i class="fas fa-check-circle"></i> Approved <span class="count-badge" id="approvedTrainersCount">0</span></button>
    <button class="trainer-tab-btn" data-section="rejected" id="trainerTabRejectedBtn"><i class="fas fa-times-circle"></i> Rejected <span class="count-badge" id="rejectedTrainersCount">0</span></button>
    <button class="trainer-tab-btn" data-section="all" id="trainerTabAllBtn" style="margin-left:auto;"><i class="fas fa-layer-group"></i> All <span class="count-badge" id="allTrainersCount">0</span></button>
  </div>

  <!-- Filter & Search Bar -->
  <div class="trainer-filters" style="display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-bottom:14px;background:#f8f9fa;padding:12px 16px;border:1px solid #e0e6eb;border-radius:12px;">
    <div style="position:relative;flex:1;min-width:240px;">
      <i class="fas fa-search" style="position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#607d8b;"></i>
      <input type="text" id="trainerSearchInput" placeholder="Search trainers by name, email, specialty..." style="width:100%;padding:10px 14px 10px 38px;border:1px solid #cfd8dc;border-radius:8px;font-size:0.95rem;">
    </div>
    <select id="trainerSpecialtyFilter" style="padding:10px 12px;border:1px solid #cfd8dc;border-radius:8px;font-size:0.9rem;min-width:160px;">
      <option value="">All Specialties</option>
    </select>
    <select id="trainerExperienceFilter" style="padding:10px 12px;border:1px solid #cfd8dc;border-radius:8px;font-size:0.9rem;min-width:160px;">
      <option value="">Any Experience</option>
      <option value="0-1">0-1 yrs</option>
      <option value="1-3">1-3 yrs</option>
      <option value="3-5">3-5 yrs</option>
      <option value="5-10">5-10 yrs</option>
      <option value=">10">10+ yrs</option>
    </select>
    <select id="trainerRateTypeFilter" style="padding:10px 12px;border:1px solid #cfd8dc;border-radius:8px;font-size:0.9rem;min-width:160px;">
      <option value="">Any Rate Type</option>
      <option value="hourly">Hourly</option>
      <option value="monthly">Monthly</option>
      <option value="both">Hourly & Monthly</option>
    </select>
    <button id="clearTrainerFiltersBtn" class="btn btn-light" style="display:flex;align-items:center;gap:6px;">
      <i class="fas fa-undo"></i> Reset
    </button>
  </div>

  <!-- Bulk Actions & Status Legend -->
  <div style="display:flex;flex-wrap:wrap;gap:16px;align-items:center;margin-bottom:12px;">
    <div style="display:flex;gap:8px;align-items:center;">
      <button id="bulkApproveTrainersBtn" class="btn btn-success" disabled style="display:flex;align-items:center;gap:6px;">
        <i class="fas fa-check"></i> Approve Selected
      </button>
      <button id="bulkRejectTrainersBtn" class="btn btn-danger" disabled style="display:flex;align-items:center;gap:6px;">
        <i class="fas fa-times"></i> Reject Selected
      </button>
    </div>
    <div style="margin-left:auto;display:flex;gap:14px;font-size:0.75rem;color:#607d8b;flex-wrap:wrap;">
      <span style="display:flex;align-items:center;gap:6px;"><span style="width:10px;height:10px;background:#ff9800;border-radius:50%;display:inline-block;"></span> Pending</span>
      <span style="display:flex;align-items:center;gap:6px;"><span style="width:10px;height:10px;background:#4caf50;border-radius:50%;display:inline-block;"></span> Approved</span>
      <span style="display:flex;align-items:center;gap:6px;"><span style="width:10px;height:10px;background:#f44336;border-radius:50%;display:inline-block;"></span> Rejected</span>
    </div>
  </div>

  <!-- Trainer List Container -->
  <div id="trainerListContainer" class="trainer-list-container" style="background:#fff;border:1px solid #e0e6eb;border-radius:14px;overflow:hidden;display:flex;flex-direction:column;min-height:320px;">
    <div class="trainer-list-header" style="display:grid;grid-template-columns:46px 1.2fr 0.9fr 0.9fr 0.9fr 120px 140px;gap:12px;padding:14px 18px;background:#f1f5f9;border-bottom:1px solid #e0e6eb;font-size:0.72rem;font-weight:600;color:#546e7a;text-transform:uppercase;letter-spacing:0.5px;">
      <div><input type="checkbox" id="selectAllTrainers" style="cursor:pointer;" title="Select All"></div>
      <div>Trainer</div>
      <div>Specialty</div>
      <div>Experience</div>
      <div>Rates</div>
      <div>Status</div>
      <div style="text-align:right;">Actions</div>
    </div>
    <div id="trainerList" class="trainer-list" style="display:flex;flex-direction:column;position:relative;">
      <!-- Skeleton Rows Placeholder -->
      <div class="trainer-skeleton-row" style="padding:16px 18px;display:grid;grid-template-columns:46px 1.2fr 0.9fr 0.9fr 0.9fr 120px 140px;gap:12px;">
        <div class="skeleton-line" style="width:18px;height:18px;background:linear-gradient(90deg,#eceff1,#f5f7f8,#eceff1);border-radius:4px;animation:trainerSkeleton 1.3s infinite;"></div>
        <div class="skeleton-line" style="width:100%;height:34px;border-radius:8px;background:linear-gradient(90deg,#eceff1,#f5f7f8,#eceff1);animation:trainerSkeleton 1.3s infinite;"></div>
        <div class="skeleton-line" style="height:20px;border-radius:6px;background:linear-gradient(90deg,#eceff1,#f5f7f8,#eceff1);animation:trainerSkeleton 1.3s infinite;"></div>
        <div class="skeleton-line" style="height:20px;border-radius:6px;background:linear-gradient(90deg,#eceff1,#f5f7f8,#eceff1);animation:trainerSkeleton 1.3s infinite;"></div>
        <div class="skeleton-line" style="height:20px;border-radius:6px;background:linear-gradient(90deg,#eceff1,#f5f7f8,#eceff1);animation:trainerSkeleton 1.3s infinite;"></div>
        <div class="skeleton-line" style="height:26px;border-radius:18px;background:linear-gradient(90deg,#eceff1,#f5f7f8,#eceff1);animation:trainerSkeleton 1.3s infinite;"></div>
        <div class="skeleton-line" style="height:34px;border-radius:8px;background:linear-gradient(90deg,#eceff1,#f5f7f8,#eceff1);animation:trainerSkeleton 1.3s infinite;"></div>
      </div>
    </div>
    <div id="trainerListEmptyState" style="display:none;padding:48px 24px;text-align:center;color:#607d8b;">
      <div style="font-size:2.2rem;margin-bottom:12px;opacity:0.4;"><i class="fas fa-users-slash"></i></div>
      <h3 style="margin:0 0 6px 0;font-size:1.1rem;color:#37474f;">No trainers found</h3>
      <p style="margin:0;font-size:0.9rem;">Adjust your filters or check back later for new trainer requests.</p>
    </div>
  </div>

  <!-- Detail Drawer / Modal Placeholder -->
  <div id="trainerDetailDrawer" style="position:fixed;top:0;right:0;width:420px;max-width:100%;height:100%;background:#fff;box-shadow:-4px 0 24px -6px rgba(0,0,0,0.18);z-index:100000;transform:translateX(100%);transition:transform 0.35s ease;display:flex;flex-direction:column;">
    <div style="padding:18px 20px;border-bottom:1px solid #e0e6eb;display:flex;align-items:center;justify-content:space-between;">
      <h3 style="margin:0;font-size:1.05rem;display:flex;align-items:center;gap:8px;color:#263238;"><i class="fas fa-id-card"></i> Trainer Details</h3>
      <button id="closeTrainerDetailDrawer" style="background:transparent;border:none;font-size:1.2rem;cursor:pointer;color:#607d8b;" title="Close"><i class="fas fa-times"></i></button>
    </div>
    <div id="trainerDetailContent" style="flex:1;overflow-y:auto;padding:20px 22px;">
      <!-- Populated dynamically -->
    </div>
    <div id="trainerDetailFooter" style="padding:14px 18px;border-top:1px solid #e0e6eb;display:flex;gap:10px;justify-content:flex-end;background:#fafbfc;">
      <button id="trainerDetailRejectBtn" class="btn btn-danger" style="display:none;"><i class="fas fa-times"></i> Reject</button>
      <button id="trainerDetailApproveBtn" class="btn btn-success" style="display:none;"><i class="fas fa-check"></i> Approve</button>
    </div>
  </div>

  <style>
    @keyframes trainerSkeleton { 0%{background-position:-200px 0;}100%{background-position:200px 0;} }
    .trainer-tab-btn {background:#f0f3f5;border:1px solid #d2dbe1;color:#455a64;padding:10px 16px;border-radius:30px;font-size:0.8rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .18s ease;} 
    .trainer-tab-btn .count-badge{background:#fff;color:#546e7a;padding:2px 8px;border-radius:14px;font-size:0.65rem;font-weight:600;border:1px solid #d2dbe1;} 
    .trainer-tab-btn.active{background:#1976d2;color:#fff;border-color:#1976d2;} 
    .trainer-tab-btn.active .count-badge{background:#0d4d89;color:#fff;border-color:#0d4d89;} 
    .trainer-list-item{display:grid;grid-template-columns:46px 1.2fr 0.9fr 0.9fr 0.9fr 120px 140px;gap:12px;padding:14px 18px;align-items:center;border-bottom:1px solid #eef2f5;font-size:0.82rem;transition:background .15s ease;} 
    .trainer-list-item:hover{background:#f8fbff;} 
    .trainer-avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid #e3e9ed;} 
    .trainer-name{font-weight:600;color:#263238;font-size:0.85rem;display:flex;flex-direction:column;line-height:1.15;} 
    .trainer-name span.meta{font-weight:400;font-size:0.65rem;color:#607d8b;margin-top:2px;} 
    .status-badge{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:20px;font-size:0.6rem;font-weight:600;letter-spacing:0.5px;text-transform:uppercase;} 
    .status-pending{background:#fff3e0;color:#ef6c00;border:1px solid #ffe0b2;} 
    .status-approved{background:#e8f5e9;color:#2e7d32;border:1px solid #c8e6c9;} 
    .status-rejected{background:#ffebee;color:#c62828;border:1px solid #ffcdd2;} 
    .trainer-rate-chip{background:#eceff1;color:#455a64;padding:3px 8px;border-radius:16px;font-size:0.6rem;font-weight:600;display:inline-flex;align-items:center;gap:4px;margin:2px 4px 2px 0;} 
    .trainer-actions{display:flex;gap:6px;justify-content:flex-end;} 
    .trainer-actions button{border:none;border-radius:8px;padding:6px 10px;font-size:0.7rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:4px;transition:background .15s ease;} 
    .trainer-actions button.view-btn{background:#e3f2fd;color:#1565c0;} 
    .trainer-actions button.view-btn:hover{background:#d0e7fb;} 
    .trainer-actions button.approve-btn{background:#c8e6c9;color:#2e7d32;} 
    .trainer-actions button.approve-btn:hover{background:#b2dcb4;} 
    .trainer-actions button.reject-btn{background:#ffcdd2;color:#c62828;} 
    .trainer-actions button.reject-btn:hover{background:#f8b9bf;} 
    .rate-multi{display:flex;flex-wrap:wrap;} 
    .trainer-list-item.new-row{animation:fadeInHighlight 2.5s ease;} 
    @keyframes fadeInHighlight{0%{background:#fffde7;}70%{background:#fffde7;}100%{background:transparent;}} 
    @media (max-width:1100px){
      .trainer-list-header{grid-template-columns:46px 1.4fr 1fr 1fr 140px;}
      .trainer-list-item{grid-template-columns:46px 1.4fr 1fr 1fr 140px;}
      .trainer-list-header div:nth-child(4), .trainer-list-header div:nth-child(5){display:none;} 
      .trainer-list-item > div:nth-child(4), .trainer-list-item > div:nth-child(5){display:none;} 
    }
    @media (max-width:780px){
      .trainer-filters{padding:10px 12px;}
      .trainer-list-header{display:none;}
      .trainer-list-item{grid-template-columns:46px 1fr 80px;grid-auto-rows:minmax(60px,auto);align-items:flex-start;}
      .trainer-list-item > div:nth-child(3), .trainer-list-item > div:nth-child(4), .trainer-list-item > div:nth-child(5){display:none !important;}
      .trainer-actions{flex-direction:column;align-items:flex-end;}
    }
    /* Detail drawer content styles */
    .tm-sub-head{font-size:0.7rem;font-weight:600;color:#546e7a;text-transform:uppercase;letter-spacing:0.5px;margin:0 0 6px 0;}
    .tm-field-val{font-size:0.85rem;color:#263238;font-weight:500;}
    .tm-bio{font-size:0.8rem;color:#455a64;line-height:1.5;background:#f8f9fa;padding:10px 14px;border-radius:8px;border-left:3px solid #1976d2;}
    .tm-availability{font-size:0.75rem;color:#546e7a;line-height:1.6;}
    .tm-availability strong{color:#263238;font-weight:600;}
  </style>



<!-- Trainer Certifications Lightbox Modal -->
<div id="trainerCertModal" style="display:none;position:fixed;inset:0;z-index:100500;background:rgba(15,23,42,0.78);backdrop-filter:blur(4px);align-items:center;justify-content:center;">
  <div class="cert-modal-inner" style="position:relative;max-width:880px;width:92%;background:#0f172a;border:1px solid #1e293b;border-radius:18px;box-shadow:0 12px 48px -8px rgba(0,0,0,0.55);padding:20px 20px 28px 20px;display:flex;flex-direction:column;">
    <button id="closeTrainerCertModal" aria-label="Close" style="position:absolute;top:12px;right:12px;background:#1e293b;border:1px solid #334155;color:#e2e8f0;width:40px;height:40px;border-radius:12px;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;justify-content:center;transition:all .18s ease;">
      <i class="fas fa-times"></i>
    </button>
    <div id="trainerCertStage" style="flex:1;display:flex;align-items:center;justify-content:center;min-height:420px;position:relative;overflow:hidden;border-radius:14px;background:#1e293b;border:1px solid #334155;">
      <img id="trainerCertImage" src="" alt="Certification" style="max-width:100%;max-height:100%;object-fit:contain;opacity:0;transition:opacity .35s ease;">
      <div id="trainerCertLoading" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:#94a3b8;font-size:0.9rem;gap:10px;">
        <i class="fas fa-spinner fa-spin"></i> Loading...
      </div>
      <button id="trainerCertPrev" title="Previous" style="position:absolute;left:10px;top:50%;transform:translateY(-50%);background:rgba(30,41,59,0.9);border:1px solid #334155;color:#e2e8f0;width:46px;height:46px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.1rem;backdrop-filter:blur(4px);">
        <i class="fas fa-chevron-left"></i>
      </button>
      <button id="trainerCertNext" title="Next" style="position:absolute;right:10px;top:50%;transform:translateY(-50%);background:rgba(30,41,59,0.9);border:1px solid #334155;color:#e2e8f0;width:46px;height:46px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.1rem;backdrop-filter:blur(4px);">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
    <div id="trainerCertMeta" style="margin-top:18px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:14px;">
      <div style="display:flex;align-items:center;gap:10px;font-size:0.75rem;color:#94a3b8;letter-spacing:0.5px;text-transform:uppercase;">
        <i class="fas fa-certificate" style="color:#38bdf8;"></i>
        <span id="trainerCertCounter">1 / 1</span>
      </div>
      <div id="trainerCertActions" style="display:flex;gap:8px;">
        <a id="trainerCertDownload" href="#" download style="text-decoration:none;background:#1e293b;border:1px solid #334155;color:#e2e8f0;padding:8px 14px;font-size:0.7rem;font-weight:600;border-radius:10px;display:inline-flex;align-items:center;gap:6px;">
          <i class="fas fa-download"></i> Download
        </a>
        <a id="trainerCertOpenRaw" href="#" target="_blank" style="text-decoration:none;background:#1e293b;border:1px solid #334155;color:#e2e8f0;padding:8px 14px;font-size:0.7rem;font-weight:600;border-radius:10px;display:inline-flex;align-items:center;gap:6px;">
          <i class="fas fa-external-link-alt"></i> Open
        </a>
      </div>
    </div>
    <div id="trainerCertThumbStrip" style="margin-top:18px;display:flex;gap:10px;overflow-x:auto;padding:6px 4px;scrollbar-width:thin;">
      <!-- thumbs -->
    </div>
  </div>
</div>

<!-- Themed Trainer Action Dialog -->
<div id="trainerActionDialog" style="display:none;position:fixed;inset:0;z-index:100600;background:rgba(15,23,42,0.55);backdrop-filter:blur(2px);align-items:center;justify-content:center;">
  <div class="action-dialog-inner" style="width:100%;max-width:480px;background:#ffffff;border-radius:22px;box-shadow:0 20px 64px -16px rgba(15,23,42,0.35);padding:28px 30px 26px 30px;position:relative;">
    <button id="closeTrainerActionDialog" style="position:absolute;top:10px;right:10px;width:40px;height:40px;border:none;background:#f1f5f9;border-radius:14px;font-size:1.1rem;color:#64748b;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .18s ease;">
      <i class="fas fa-times"></i>
    </button>
    <div style="display:flex;align-items:flex-start;gap:16px;">
      <div id="trainerActionIcon" style="width:54px;height:54px;border-radius:16px;background:#e0f2fe;color:#0369a1;display:flex;align-items:center;justify-content:center;font-size:1.4rem;flex-shrink:0;">
        <i class="fas fa-question-circle"></i>
      </div>
      <div style="flex:1;">
        <h2 id="trainerActionTitle" style="margin:4px 0 6px 0;font-size:1.05rem;color:#0f172a;">Confirm Action</h2>
        <p id="trainerActionMessage" style="margin:0 0 12px 0;font-size:0.85rem;line-height:1.5;color:#475569;">Are you sure?</p>
        <div id="trainerActionExtraFields" style="display:none;margin-top:8px;">
          <label for="trainerRejectionReason" style="display:block;font-size:0.65rem;font-weight:600;letter-spacing:0.5px;color:#475569;margin-bottom:6px;text-transform:uppercase;">Rejection Reason</label>
          <textarea id="trainerRejectionReason" placeholder="Provide feedback for rejection (optional)" style="width:100%;min-height:90px;resize:vertical;padding:10px 12px;border:1px solid #cbd5e1;border-radius:12px;font-size:0.75rem;line-height:1.35;outline:none;transition:border .15s ease;">
          </textarea>
        </div>
      </div>
    </div>
    <div style="margin-top:24px;display:flex;gap:12px;justify-content:flex-end;">
      <button id="trainerActionCancelBtn" style="background:#f1f5f9;color:#334155;font-weight:600;padding:10px 20px;border:none;border-radius:12px;font-size:0.75rem;cursor:pointer;">Cancel</button>
      <button id="trainerActionConfirmBtn" style="background:#0d74d4;color:#fff;font-weight:600;padding:10px 22px;border:none;border-radius:12px;font-size:0.75rem;cursor:pointer;display:inline-flex;align-items:center;gap:6px;">
        <i class="fas fa-check-circle"></i><span>Confirm</span>
      </button>
    </div>
  </div>
  </div>
  </div> <!-- End tab-inner-content --> 
</div> <!-- End trainerTab -->


<!-- Support & Reviews Tab -->
<div id="supportReviewsTab" class="tab-content" style="display:none;">
  <div class="tab-inner-content">
  <div class="page-header">
    <h1 class="page-title">
      <i class="fas fa-headset"></i>
      Support & Communications Center
    </h1>
    <div class="page-actions">
      <button id="supportRaiseGrievanceBtn" class="btn-primary">
        <i class="fas fa-exclamation-triangle"></i>
        Raise Grievance
      </button>
      <button id="supportSendNotificationBtn" class="btn-secondary">
        <i class="fas fa-bullhorn"></i>
        Send Notification
      </button>
    </div>
  </div>
   <!-- Support Statistics -->
  <div class="offers-stats-grid">
    <div class="offers-stat-card support-notifications" id="supportNotificationsStatCard">
      <div class="stat-info">
        <div class="stat-header">
          <h3>Unread Notifications</h3>
          <div class="stat-icon">
            <i class="fas fa-bell"></i>
          </div>
        </div>
        <div class="stat-number" id="supportNotificationsValue">0</div>
        <div class="stat-change positive" id="supportNotificationsChange">
          <i class="fas fa-inbox"></i>
          <span id="supportNotificationsTotal">0 Total</span>
        </div>
      </div>
    </div>

    <div class="offers-stat-card support-reviews" id="supportReviewsStatCard">
      <div class="stat-info">
        <div class="stat-header">
          <h3>Review Rating</h3>
          <div class="stat-icon">
            <i class="fas fa-star"></i>
          </div>
        </div>
        <div class="stat-number" id="supportReviewsValue">0.0</div>
        <div class="stat-change positive" id="supportReviewsChange">
          <i class="fas fa-users"></i>
          <span id="supportReviewsTotal">0 Reviewers</span>
        </div>
      </div>
    </div>

    <div class="offers-stat-card support-grievances" id="supportGrievancesStatCard">
      <div class="stat-info">
        <div class="stat-header">
          <h3>Open Grievances</h3>
          <div class="stat-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
        </div>
        <div class="stat-number" id="supportGrievancesValue">0</div>
        <div class="stat-change positive" id="supportGrievancesChange">
          <i class="fas fa-tasks"></i>
          <span id="supportGrievancesTotal">0 Total</span>
        </div>
      </div>
    </div>

    <div class="offers-stat-card support-chats" id="supportChatsStatCard">
      <div class="stat-info">
        <div class="stat-header">
          <h3>Unreplied Chats</h3>
          <div class="stat-icon">
            <i class="fas fa-comments"></i>
          </div>
        </div>
        <div class="stat-number" id="supportChatsValue">0</div>
        <div class="stat-change positive" id="supportChatsChange">
          <i class="fas fa-inbox"></i>
          <span id="supportChatsTotal">0 Total</span>
        </div>
      </div>
    </div>
  </div>
  <!-- Tab Navigation -->
  <div class="support-nav-container">
    <div class="support-nav-tabs">
      <button class="support-tab-btn active" data-tab="notifications">
        <i class="fas fa-bell"></i>
        <span>Notifications</span>
        <span class="tab-counter" id="notificationTabCounter">0</span>
      </button>
      <button class="support-tab-btn" data-tab="reviews">
        <i class="fas fa-star"></i>
        <span>Reviews</span>
        <span class="tab-counter" id="reviewTabCounter">0</span>
      </button>
      <button class="support-tab-btn" data-tab="grievances">
        <i class="fas fa-exclamation-triangle"></i>
        <span>Grievances</span>
        <span class="tab-counter" id="grievanceTabCounter">0</span>
      </button>
      <button class="support-tab-btn" data-tab="communications">
        <i class="fas fa-comments"></i>
        <span>Communications</span>
        <span class="tab-counter" id="communicationTabCounter">0</span>
      </button>
    </div>
  </div>

  <!-- Notifications Section -->
  <div id="notificationsSection" class="support-section active">
    <!-- Notifications Content -->
    <div class="support-content-container">
      <div class="support-content-header">
        <h3 class="content-title">
          <i class="fas fa-inbox"></i>
          Notification Center
        </h3>
        <div class="support-filters">
          <select id="notificationTypeFilter" class="support-filter">
            <option value="all">All Types</option>
            <option value="system">System</option>
            <option value="membership">Membership</option>
            <option value="payment">Payment</option>
            <option value="admin">Admin</option>
            <option value="emergency">Emergency</option>
          </select>
          <select id="notificationStatusFilter" class="support-filter">
            <option value="all">All Status</option>
            <option value="unread">Unread</option>
            <option value="read">Read</option>
          </select>
          <button id="markAllReadBtn" class="support-quick-action">
            <i class="fas fa-check-double"></i>
            Mark All Read
          </button>
        </div>
      </div>
      
      <div class="support-content-body">
        <div id="notificationsList" class="notifications-list">
          <div class="loading-placeholder">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading notifications...</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Reviews Section -->
  <div id="reviewsSection" class="support-section">
    <!-- Reviews Content -->
    <div class="support-content-container">
      <div class="support-content-header">
        <h3 class="content-title">
          <i class="fas fa-star-half-alt"></i>
          Review Management
        </h3>
        <div class="support-filters">
          <select id="reviewRatingFilter" class="support-filter">
            <option value="all">All Ratings</option>
            <option value="5">5 Stars</option>
            <option value="4">4 Stars</option>
            <option value="3">3 Stars</option>
            <option value="2">2 Stars</option>
            <option value="1">1 Star</option>
          </select>
          <select id="reviewReplyFilter" class="support-filter">
            <option value="all">All Reviews</option>
            <option value="replied">Replied</option>
            <option value="pending">Pending Reply</option>
          </select>
          <button id="exportReviewsBtn" class="support-quick-action">
            <i class="fas fa-download"></i>
            Export
          </button>
        </div>
      </div>
      
      <div class="support-content-body">
        <div id="reviewsList" class="reviews-list">
          <div class="loading-placeholder">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading reviews...</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Grievances Section -->
  <div id="grievancesSection" class="support-section">
    <!-- Grievances Content -->
    <div class="support-content-container">
      <div class="support-content-header">
        <h3 class="content-title">
          <i class="fas fa-clipboard-list"></i>
          Grievance Management
        </h3>
        <div class="support-filters">
          <select id="grievanceStatusFilter" class="support-filter">
            <option value="all">All Status</option>
            <option value="open">Open</option>
            <option value="in-progress">In Progress</option>
            <option value="resolved">Resolved</option>
            <option value="closed">Closed</option>
          </select>
          <select id="grievancePriorityFilter" class="support-filter">
            <option value="all">All Priority</option>
            <option value="urgent">Urgent</option>
            <option value="high">High</option>
            <option value="medium">Medium</option>
            <option value="low">Low</option>
          </select>
          <button id="createGrievanceBtn" class="support-quick-action">
            <i class="fas fa-plus"></i>
            New Grievance
          </button>
        </div>
      </div>
      
      <div class="support-content-body">
        <div id="grievancesList" class="grievances-list">
          <div class="loading-placeholder">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading grievances...</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Communications Section -->
  <div id="communicationsSection" class="support-section">
    <!-- Communications Content -->
    <div class="support-content-container">
      <div class="support-content-header">
        <h3 class="content-title">
          <i class="fas fa-comment-dots"></i>
          Member Communications
        </h3>
        <div class="support-filters">
          <select id="communicationStatusFilter" class="support-filter">
            <option value="all">All Conversations</option>
            <option value="active">Active</option>
            <option value="pending">Pending Response</option>
            <option value="resolved">Resolved</option>
          </select>
          <input type="search" id="memberSearchInput" class="support-search" placeholder="Search members...">
          <button id="broadcastMessageBtn" class="support-quick-action">
            <i class="fas fa-bullhorn"></i>
            Broadcast
          </button>
        </div>
      </div>
      
      <div class="support-content-body communications-layout">
        <div class="conversations-sidebar">
          <div id="conversationsList" class="conversations-list">
            <div class="loading-placeholder">
              <i class="fas fa-spinner fa-spin"></i>
              <p>Loading conversations...</p>
            </div>
          </div>
        </div>
        <div class="chat-main">
          <div id="chatContainer" class="chat-container">
            <div class="chat-placeholder">
              <i class="fas fa-comments"></i>
              <h3>Select a conversation</h3>
              <p>Choose a member conversation from the sidebar to start chatting</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div><!-- Close tab-inner-content -->
</div><!-- Close supportReviewsTab -->
<!-- Review Reply Modal -->
<div id="reviewReplyModal" class="support-modal">
  <div class="support-modal-content">
    <div class="support-modal-header">
      <h3><i class="fas fa-reply"></i> Reply to Review</h3>
      <button class="support-modal-close" id="closeReviewReplyModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="support-modal-body">
      <div id="reviewDetailsDisplay" class="review-details">
        <!-- Review details will be displayed here -->
      </div>
      <div class="form-group">
        <label for="adminReplyText">Your Reply:</label>
        <textarea id="adminReplyText" rows="4" placeholder="Write your professional reply to this review..."></textarea>
        <small>This reply will be visible to all users viewing this review.</small>
      </div>
    </div>
    <div class="support-modal-footer">
      <button id="cancelReviewReply" class="btn-secondary">Cancel</button>
      <button id="submitReviewReply" class="btn-primary">
        <i class="fas fa-paper-plane"></i> Send Reply
      </button>
    </div>
  </div>
</div>

<!-- Raise Grievance Modal -->
<div id="raiseGrievanceModal" class="support-modal">
  <div class="support-modal-content large">
    <div class="support-modal-header">
      <h3><i class="fas fa-exclamation-triangle"></i> Raise New Grievance</h3>
      <button class="support-modal-close" id="closeRaiseGrievanceModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="support-modal-body">
      <form id="grievanceForm">
        <div class="form-row">
          <div class="form-group">
            <label for="grievanceTitle">Title *</label>
            <input type="text" id="grievanceTitle" placeholder="Brief description of the issue" required>
          </div>
          <div class="form-group">
            <label for="grievancePriority">Priority *</label>
            <select id="grievancePriority" required>
              <option value="">Select Priority</option>
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
              <option value="urgent">Urgent</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="grievanceCategory">Category *</label>
            <select id="grievanceCategory" required>
              <option value="">Select Category</option>
              <option value="billing">Billing & Payments</option>
              <option value="technical">Technical Issues</option>
              <option value="member-complaint">Member Complaints</option>
              <option value="staff-issue">Staff Issues</option>
              <option value="equipment">Equipment Problems</option>
              <option value="facility">Facility Issues</option>
              <option value="policy">Policy Concerns</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="grievanceAssignee">Assign To</label>
            <select id="grievanceAssignee">
              <option value="">Auto-assign</option>
              <option value="admin">Admin Team</option>
              <option value="technical">Technical Team</option>
              <option value="billing">Billing Team</option>
              <option value="operations">Operations Team</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label for="grievanceDescription">Description *</label>
          <textarea id="grievanceDescription" rows="6" placeholder="Provide detailed description of the issue, steps to reproduce (if applicable), and any relevant context..." required></textarea>
        </div>
        <div class="form-group">
          <label for="grievanceAttachment">Attachments</label>
          <input type="file" id="grievanceAttachment" multiple accept="image/*,.pdf,.doc,.docx">
          <small>Attach relevant screenshots, documents, or evidence (Max 5MB per file)</small>
        </div>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="grievanceUrgent">
            <span class="checkmark"></span>
            Mark as urgent (requires immediate attention)
          </label>
        </div>
      </form>
    </div>
    <div class="support-modal-footer">
      <button id="cancelGrievance" class="btn-secondary">Cancel</button>
      <button id="submitGrievance" class="btn-primary">
        <i class="fas fa-paper-plane"></i> Submit Grievance
      </button>
    </div>
  </div>
</div>

<!-- Send Notification Modal -->
<div id="sendNotificationModal" class="support-modal">
  <div class="support-modal-content large">
    <div class="support-modal-header">
      <h3><i class="fas fa-bullhorn"></i> Send Notification</h3>
      <button class="support-modal-close" id="closeSendNotificationModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="support-modal-body">
      <form id="notificationForm">
        <div class="form-row">
          <div class="form-group">
            <label for="notificationTitle">Title *</label>
            <input type="text" id="notificationTitle" placeholder="Notification title" required>
          </div>
          <div class="form-group">
            <label for="notificationType">Type *</label>
            <select id="notificationType" required>
              <option value="">Select Type</option>
              <option value="announcement">Announcement</option>
              <option value="maintenance">Maintenance</option>
              <option value="emergency">Emergency</option>
              <option value="promotion">Promotion</option>
              <option value="policy">Policy Update</option>
              <option value="event">Event</option>
              <option value="system">System Update</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="notificationPriority">Priority *</label>
            <select id="notificationPriority" required>
              <option value="normal">Normal</option>
              <option value="high">High</option>
              <option value="urgent">Urgent</option>
            </select>
          </div>
          <div class="form-group">
            <label for="notificationAudience">Audience *</label>
            <select id="notificationAudience" required>
              <option value="all">All Members</option>
              <option value="active">Active Members Only</option>
              <option value="staff">Staff Only</option>
              <option value="admin">Admin Team</option>
              <option value="custom">Custom Selection</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label for="notificationMessage">Message *</label>
          <textarea id="notificationMessage" rows="6" placeholder="Enter your notification message..." required></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="notificationSchedule">Schedule</label>
            <select id="notificationSchedule">
              <option value="now">Send Now</option>
              <option value="scheduled">Schedule for Later</option>
            </select>
          </div>
          <div class="form-group" id="scheduleTimeGroup" style="display: none;">
            <label for="notificationTime">Schedule Time</label>
            <input type="datetime-local" id="notificationTime">
          </div>
        </div>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="notificationEmail">
            <span class="checkmark"></span>
            Also send via email
          </label>
        </div>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="notificationSMS">
            <span class="checkmark"></span>
            Also send via SMS (if enabled)
          </label>
        </div>
      </form>
    </div>
    <div class="support-modal-footer">
      <button id="cancelNotification" class="btn-secondary">Cancel</button>
      <button id="submitNotification" class="btn-primary">
        <i class="fas fa-paper-plane"></i> Send Notification
      </button>
    </div>
  </div>
</div>

<!-- Grievance Details Modal -->
<div id="grievanceDetailsModal" class="support-modal">
  <div class="support-modal-content large">
    <div class="support-modal-header">
      <h3><i class="fas fa-clipboard-list"></i> Grievance Details</h3>
      <button class="support-modal-close" id="closeGrievanceDetailsModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="support-modal-body">
      <div id="grievanceDetailsContent">
        <!-- Grievance details will be loaded here -->
      </div>
    </div>
    <div class="support-modal-footer">
      <button id="closeGrievanceDetails" class="btn-secondary">Close</button>
      <button id="updateGrievanceStatus" class="btn-primary">
        <i class="fas fa-edit"></i> Update Status
      </button>
    </div>
  </div>
</div>

<!-- Chat Window Modal -->
<div id="chatModal" class="support-modal fullscreen">
  <div class="support-modal-content fullscreen">
    <div class="support-modal-header">
      <h3 id="chatModalTitle"><i class="fas fa-comments"></i> Chat with Member</h3>
      <button class="support-modal-close" id="closeChatModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="support-modal-body no-padding">
      <div class="chat-window">
        <div class="chat-messages" id="chatMessages">
          <!-- Chat messages will be loaded here -->
        </div>
        <div class="chat-input-area">
          <div class="chat-input-container">
            <input type="text" id="chatMessageInput" placeholder="Type your message...">
            <button id="sendChatMessage" class="btn-primary">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div> <!-- End tab-inner-content -->

<!-- Equipment Tab -->
<div id="equipmentTab" class="tab-content" style="display:none;">
  <div class="tab-inner-content">
  <div class="page-header" style="margin-bottom: 30px;">
    <h1 class="page-title">
      <i class="fas fa-dumbbell"></i> Equipment Management
    </h1>
    <div class="page-actions">
      <button id="addEquipmentBtn" class="btn-primary">
        <i class="fas fa-plus"></i> Add Equipment
      </button>
      <button id="bulkImportBtn" class="btn-secondary">
        <i class="fas fa-upload"></i> Bulk Import
      </button>
    </div>
  </div>

  <!-- Equipment Statistics -->
  <div class="stats-cards">
    <div class="stat-card equipment-total loading" id="totalEquipmentStatCard">
      <div class="stat-card-header">
        <div class="stat-title">Total Equipment</div>
        <div class="stat-icon-dashboard">
          <i class="fas fa-dumbbell"></i>
        </div>
      </div>
      <div class="stat-value" id="totalEquipmentCount">0</div>
      <div class="stat-change neutral">
        <i class="fas fa-minus"></i>
        All items
      </div>
      <div class="stat-card-skeleton">
        <div class="skeleton-header">
          <div class="skeleton-title"></div>
          <div class="skeleton-icon"></div>
        </div>
        <div class="skeleton-value"></div>
        <div class="skeleton-change"></div>
      </div>
    </div>

    <div class="stat-card equipment-available loading" id="availableEquipmentStatCard">
      <div class="stat-card-header">
        <div class="stat-title">Available</div>
        <div class="stat-icon-dashboard">
          <i class="fas fa-check-circle"></i>
        </div>
      </div>
      <div class="stat-value" id="availableEquipmentCount">0</div>
      <div class="stat-change positive">
        <i class="fas fa-arrow-up"></i>
        0%
      </div>
      <div class="stat-card-skeleton">
        <div class="skeleton-header">
          <div class="skeleton-title"></div>
          <div class="skeleton-icon"></div>
        </div>
        <div class="skeleton-value"></div>
        <div class="skeleton-change"></div>
      </div>
    </div>

    <div class="stat-card equipment-maintenance loading" id="maintenanceEquipmentStatCard">
      <div class="stat-card-header">
        <div class="stat-title">Under Maintenance</div>
        <div class="stat-icon-dashboard">
          <i class="fas fa-tools"></i>
        </div>
      </div>
      <div class="stat-value" id="maintenanceEquipmentCount">0</div>
      <div class="stat-change neutral">
        <i class="fas fa-wrench"></i>
        In service
      </div>
      <div class="stat-card-skeleton">
        <div class="skeleton-header">
          <div class="skeleton-title"></div>
          <div class="skeleton-icon"></div>
        </div>
        <div class="skeleton-value"></div>
        <div class="skeleton-change"></div>
      </div>
    </div>

    <div class="stat-card equipment-out-of-order loading" id="outOfOrderEquipmentStatCard">
      <div class="stat-card-header">
        <div class="stat-title">Out of Order</div>
        <div class="stat-icon-dashboard">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
      </div>
      <div class="stat-value" id="outOfOrderEquipmentCount">0</div>
      <div class="stat-change negative">
        <i class="fas fa-arrow-down"></i>
        Needs attention
      </div>
      <div class="stat-card-skeleton">
        <div class="skeleton-header">
          <div class="skeleton-title"></div>
          <div class="skeleton-icon"></div>
        </div>
        <div class="skeleton-value"></div>
        <div class="skeleton-change"></div>
      </div>
    </div>
  </div>

  <!-- Equipment Filters and Search -->
  <div class="equipment-controls">
    <div class="equipment-search">
      <input type="text" id="equipmentSearchInput" placeholder="Search equipment by name, category, or brand...">
      <i class="fas fa-search"></i>
    </div>
    <div class="equipment-filters">
      <select id="equipmentCategoryFilter">
        <option value="">All Categories</option>
        <option value="cardio">Cardio</option>
        <option value="strength">Strength Training</option>
        <option value="functional">Functional Training</option>
        <option value="flexibility">Flexibility & Recovery</option>
        <option value="accessories">Accessories</option>
        <option value="other">Other</option>
      </select>
      <select id="equipmentStatusFilter">
        <option value="">All Status</option>
        <option value="available">Available</option>
        <option value="maintenance">Under Maintenance</option>
        <option value="out-of-order">Out of Order</option>
      </select>
      <select id="equipmentSortBy">
        <option value="name">Sort by Name</option>
        <option value="category">Sort by Category</option>
        <option value="quantity">Sort by Quantity</option>
        <option value="status">Sort by Status</option>
        <option value="date">Sort by Date Added</option>
      </select>
    </div>
  </div>

  <!-- Equipment Grid -->
  <div class="equipment-grid" id="equipmentGrid">
    <div class="equipment-loading">
      <i class="fas fa-spinner fa-spin"></i>
      <p>Loading equipment...</p>
    </div>
  </div>
  </div><!-- Close tab-inner-content -->
</div><!-- Close equipmentTab -->

<!-- Equipment Detail Modal -->
<div id="equipmentDetailModal" class="modal" style="display: none;">
  <div class="modal-content equipment-detail-modal">
    <div class="modal-header">
      <h3><i class="fas fa-dumbbell"></i> Equipment Details</h3>
      <button class="modal-close" id="closeEquipmentDetailModal">&times;</button>
    </div>
    <div class="modal-body">
      <div id="equipmentDetailContent">
        <!-- Dynamic content will be loaded here -->
      </div>
    </div>
  </div>
</div>

<!-- Add/Edit Equipment Modal -->
<div id="equipmentModal" class="modal" style="display: none;">
  <div class="modal-content equipment-form-modal">
    <div class="modal-header-style">
      <h3 class="modal-title-style" id="equipmentModalTitle"><i class="fas fa-plus"></i> Add Equipment</h3>
      <button class="modal-close" id="closeEquipmentModal">&times;</button>
    </div>
    <div class="modal-body">
      <form id="equipmentForm" enctype="multipart/form-data">
        <input type="hidden" id="equipmentId" name="equipmentId">
        
        <!-- Equipment Photos -->
        <div class="form-group">
          <label class="form-label">Equipment Photos</label>
          <div class="equipment-photo-upload">
            <div class="photo-upload-area" id="equipmentPhotoUpload">
              <div class="upload-placeholder">
                <i class="fas fa-camera"></i>
                <p>Click to upload photos or drag & drop</p>
                <small>Supports multiple images (JPG, PNG, WebP)</small>
              </div>
              <input type="file" id="equipmentPhotos" name="photos" accept="image/*" multiple style="display: none;">
            </div>
            <div class="photo-preview-grid" id="equipmentPhotoPreview">
              <!-- Photo previews will be shown here -->
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="equipmentName">Equipment Name *</label>
            <input type="text" id="equipmentName" name="name" required>
          </div>
          <div class="form-group">
            <label class="form-label" for="equipmentBrand">Brand</label>
            <input type="text" id="equipmentBrand" name="brand">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="equipmentCategory">Category *</label>
            <select id="equipmentCategory" name="category" required>
              <option value="">Select Category</option>
              <option value="cardio">Cardio</option>
              <option value="strength">Strength Training</option>
              <option value="functional">Functional Training</option>
              <option value="flexibility">Flexibility & Recovery</option>
              <option value="accessories">Accessories</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label" for="equipmentModel">Model</label>
            <input type="text" id="equipmentModel" name="model">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="equipmentQuantity">Quantity *</label>
            <input type="number" id="equipmentQuantity" name="quantity" min="1" required>
          </div>
          <div class="form-group">
            <label class="form-label" for="equipmentStatus">Status</label>
            <select id="equipmentStatus" name="status">
              <option value="available">Available</option>
              <option value="maintenance">Under Maintenance</option>
              <option value="out-of-order">Out of Order</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="equipmentPurchaseDate">Purchase Date</label>
            <input type="date" id="equipmentPurchaseDate" name="purchaseDate">
          </div>
          <div class="form-group">
            <label class="form-label" for="equipmentPrice">Purchase Price (₹)</label>
            <input type="number" id="equipmentPrice" name="price" min="0" step="0.01">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="equipmentWarranty">Warranty Period (months)</label>
            <input type="number" id="equipmentWarranty" name="warranty" min="0">
          </div>
          <div class="form-group">
            <label class="form-label" for="equipmentLocation">Location in Gym</label>
            <input type="text" id="equipmentLocation" name="location" placeholder="e.g., Ground Floor, Zone A">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="equipmentDescription">Description</label>
          <textarea id="equipmentDescription" name="description" rows="3" placeholder="Optional description about the equipment, usage instructions, or special notes..."></textarea>
        </div>

        <div class="form-group">
          <label class="form-label" for="equipmentSpecs">Technical Specifications</label>
          <textarea id="equipmentSpecs" name="specifications" rows="2" placeholder="Weight, dimensions, power requirements, etc. (optional)"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" id="cancelEquipmentBtn">Cancel</button>
          <button type="submit" class="btn btn-primary" id="saveEquipmentBtn">
            <i class="fas fa-save"></i> Save Equipment
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Equipment Photo Gallery Modal -->
<div id="equipmentPhotoGalleryModal" class="modal" style="display: none;">
  <div class="modal-content photo-gallery-modal">
    <div class="modal-header">
      <h3 id="photoGalleryTitle">Equipment Photos</h3>
      <button class="modal-close" id="closePhotoGalleryModal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="photo-gallery-container">
        <div class="main-photo">
          <img id="mainPhotoDisplay" src="" alt="Equipment">
          <div class="photo-navigation">
            <button id="prevPhoto"><i class="fas fa-chevron-left"></i></button>
            <button id="nextPhoto"><i class="fas fa-chevron-right"></i></button>
          </div>
        </div>
        <div class="photo-thumbnails" id="photoThumbnails">
          <!-- Thumbnails will be loaded here -->
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Admin Passkey Modal -->
<div id="adminPasskeyModal" class="admin-passkey-modal">
  <div class="admin-passkey-content">
    <div class="admin-passkey-header">
      <div class="admin-passkey-icon">
        <i class="fas fa-shield-alt"></i>
      </div>
      <h2 class="admin-passkey-title modal-title">Admin Security</h2>
      <p class="admin-passkey-subtitle passkey-instruction">Enter your 4-digit admin passkey to access payment management</p>
    </div>
    
    <form class="admin-passkey-form" id="adminPasskeyForm">
      <div class="passkey-input-container">
        <input type="password" class="passkey-digit" maxlength="1" data-index="0" autocomplete="off">
        <input type="password" class="passkey-digit" maxlength="1" data-index="1" autocomplete="off">
        <input type="password" class="passkey-digit" maxlength="1" data-index="2" autocomplete="off">
        <input type="password" class="passkey-digit" maxlength="1" data-index="3" autocomplete="off">
      </div>
      
      <!-- Mobile Keypad -->
      <div class="passkey-keypad" id="passkeyKeypad">
        <button type="button" class="keypad-btn" data-digit="1">1</button>
        <button type="button" class="keypad-btn" data-digit="2">2</button>
        <button type="button" class="keypad-btn" data-digit="3">3</button>
        <button type="button" class="keypad-btn" data-digit="4">4</button>
        <button type="button" class="keypad-btn" data-digit="5">5</button>
        <button type="button" class="keypad-btn" data-digit="6">6</button>
        <button type="button" class="keypad-btn" data-digit="7">7</button>
        <button type="button" class="keypad-btn" data-digit="8">8</button>
        <button type="button" class="keypad-btn" data-digit="9">9</button>
        <button type="button" class="keypad-btn clear" data-action="clear">
          <i class="fas fa-backspace"></i>
        </button>
        <button type="button" class="keypad-btn" data-digit="0">0</button>
        <button type="button" class="keypad-btn clear" data-action="clear-all">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="passkey-error" id="passkeyError">
        Invalid passkey. Please try again.
      </div>
      
      <div class="passkey-attempts" id="passkeyAttempts" style="display: none;">
        Attempts remaining: <span id="remainingAttempts">3</span>
      </div>
    </form>
    
    <div class="passkey-actions">
      <button type="button" class="passkey-btn secondary" id="cancelPasskey">Cancel</button>
      <button type="button" class="passkey-btn primary" id="verifyPasskey">Verify</button>
    </div>
  </div>
</div>

<!-- Delete Payment Confirmation Modal -->
<div id="deleteConfirmationModal" class="admin-passkey-modal" style="display: none;">
  <div class="admin-passkey-content">
    <div class="admin-passkey-header">
      <i class="fas fa-exclamation-triangle" style="color: #ef4444; font-size: 2rem; margin-bottom: 16px;"></i>
      <h2 class="admin-passkey-title modal-title">Confirm Deletion</h2>
    </div>
    
    <div style="padding: 20px 0; text-align: center;">
      <p style="font-size: 1.1rem; color: #64748b; margin-bottom: 24px;">
        Are you sure you want to delete this payment record?
      </p>
      <p style="font-size: 0.95rem; color: #ef4444; margin-bottom: 0;">
        <i class="fas fa-warning"></i> This action cannot be undone.
      </p>
    </div>
    
    <div class="passkey-actions">
      <button type="button" class="passkey-btn secondary" id="cancelDeletePayment">Cancel</button>
      <button type="button" class="passkey-btn" id="confirmDeletePayment" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white;">
        <i class="fas fa-trash"></i> Delete
      </button>
    </div>
  </div>
  </div> <!-- End tab-inner-content -->
<!-- Offers & Coupons Tab -->
 <div id="offersTab" class="tab-content" style="display:none;">
  <div class="tab-inner-content">
  <!-- Header Section - Consistent with other tabs -->
  <div class="page-header">
    <h1 class="page-title">
      <i class="fas fa-tags"></i>
      Offers & Coupons Management
    </h1>
    <div class="page-actions">
      <button id="offersCreateOfferBtn" class="btn-primary">
        <i class="fas fa-plus"></i>
        Create Custom Offer
      </button>
      <button id="offersGenerateCouponBtn" class="btn-secondary">
        <i class="fas fa-ticket-alt"></i>
        Generate Coupon
      </button>
    </div>
  </div>

  <!-- Offers Statistics -->
  <div class="offers-stats-grid">
    <div class="offers-stat-card active-offers">
      <div class="stat-info">
        <div class="stat-header">
          <h3 data-i18n="offers.active.count">Active Offers</h3>
          <div class="stat-icon">
            <i class="fas fa-tags"></i>
          </div>
        </div>
        <div class="stat-number" id="activeOffersCount">0</div>
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          <span data-i18n="offers.this.month">This Month</span>
        </div>
      </div>
    </div>
    <div class="offers-stat-card revenue">
      <div class="stat-info">
        <div class="stat-header">
          <h3 data-i18n="offers.revenue.generated">Revenue Generated</h3>
          <div class="stat-icon">
            <i class="fas fa-chart-line"></i>
          </div>
        </div>
        <div class="stat-number" id="revenueFromOffersCount">₹0</div>
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          <span data-i18n="offers.total.revenue">Total Revenue</span>
        </div>
      </div>
    </div>
    <div class="offers-stat-card coupons">
      <div class="stat-info">
        <div class="stat-header">
          <h3 data-i18n="offers.active.coupons">Active Coupons</h3>
          <div class="stat-icon">
            <i class="fas fa-ticket-alt"></i>
          </div>
        </div>
        <div class="stat-number" id="activeCouponsCount">0</div>
      </div>
    </div>
    <div class="offers-stat-card claims">
      <div class="stat-info">
        <div class="stat-header">
          <h3 data-i18n="offers.total.claims">Total Claims</h3>
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
        </div>
        <div class="stat-number" id="couponClaimsCount">0</div>
      </div>
    </div>
    <div class="offers-stat-card conversion">
      <div class="stat-info">
        <div class="stat-header">
          <h3 data-i18n="offers.conversion.rate">Conversion Rate</h3>
          <div class="stat-icon">
            <i class="fas fa-percentage"></i>
          </div>
        </div>
        <div class="stat-number" id="conversionRateCount">0%</div>
      </div>
    </div>
  </div>

  <!-- Tab Navigation -->
  <div class="support-nav-container">
    <div class="support-nav-tabs">
      <button class="support-tab-btn active" data-tab="templates">
        <i class="fas fa-layer-group"></i>
        <span>Offer Templates</span>
        <span class="tab-counter" id="templatesTabCounter">12</span>
      </button>
      <button class="support-tab-btn" data-tab="campaigns">
        <i class="fas fa-play-circle"></i>
        <span>Active Campaigns</span>
        <span class="tab-counter" id="campaignsTabCounter">0</span>
      </button>
      <button class="support-tab-btn" data-tab="coupons">
        <i class="fas fa-ticket-alt"></i>
        <span>Coupon Management</span>
        <span class="tab-counter" id="couponsTabCounter">0</span>
      </button>
      <button class="support-tab-btn" data-tab="analytics">
        <i class="fas fa-chart-bar"></i>
        <span>Analytics</span>
        <span class="tab-counter" id="analyticsTabCounter">0</span>
      </button>
    </div>
  </div>

  <!-- Offer Templates Section -->
<div id="templatesSection" class="support-section active">
  <div class="support-content-container">
    <div class="support-content-header">
      <h2 class="content-title"><i class="fas fa-layer-group"></i> Quick Offer Templates</h2>
      <p>Choose from pre-designed templates or create custom offers for your gym members</p>
    </div>
    
    <div class="templates-grid" id="templatesGrid">
      <!-- Templates will be dynamically loaded here -->
      <div class="loading-template">
        <i class="fas fa-spinner fa-spin"></i>
        <p>Loading offer templates...</p>
      </div>
    </div>
  </div>
</div>

  <!-- Active Campaigns Section -->
<div id="campaignsSection" class="support-section">
  <div class="support-content-container">
    <div class="support-content-header">
      <h2 class="content-title"><i class="fas fa-play-circle"></i> Active Marketing Campaigns</h2>
      <p>Monitor and manage your currently running offer campaigns</p>
    </div>
   <div class="support-content-body">
      <div class="campaigns-list" id="campaignsList">
      <!-- Campaigns will be dynamically loaded here -->
        <div class="loading-template">
         <i class="fas fa-spinner fa-spin"></i>
         <p>Loading active campaigns...</p>
        </div>
      </div>
    </div>
 </div>
</div>
  <!-- Coupon Management Section -->
  <div id="couponsSection" class="support-section">
  <div class="support-content-container">
    <div class="support-content-header">
      <h2 class="content-title"><i class="fas fa-ticket-alt"></i> <span data-i18n="offers.coupon.management.title">Coupon Management</span></h2>
      <div class="support-filters">
        <div class="filter-group">
          <label for="couponSearchInput" data-i18n="offers.search.coupons">Search Coupons:</label>
          <input type="text" id="couponSearchInput" class="filter-input" data-i18n-placeholder="offers.search.placeholder" placeholder="Search by code, type, or description...">
        </div>
        <div class="filter-group">
          <label for="couponStatusFilter" data-i18n="offers.coupon.status">Status:</label>
          <select id="couponStatusFilter" class="filter-select">
          <option value="all" data-i18n="offers.filter.all.status">All Status</option>
          <option value="active" data-i18n="offers.status.active">Active</option>
          <option value="expired" data-i18n="offers.status.expired">Expired</option>
          <option value="disabled" data-i18n="offers.status.disabled">Disabled</option>
        </select>
      </div>
    </div>
      <div class="section-actions">
        <button class="support-action-btn" id="generateCouponBtn">
          <i class="fas fa-plus"></i> <span data-i18n="offers.generate.coupon">Generate Coupon</span>
        </button>
        <button class="support-action-btn" id="exportCouponsBtn">
          <i class="fas fa-download"></i> <span data-i18n="offers.export.coupons">Export</span>
        </button>
      </div>
    </div>
    
    <div class="coupons-table-container support-table-container">
      <table class="coupons-table support-table" id="couponsTable">
        <thead>
          <tr>
            <th data-i18n="offers.table.code">Code</th>
            <th data-i18n="offers.table.type">Type</th>
            <th data-i18n="offers.table.discount">Discount</th>
            <th data-i18n="offers.table.usage">Usage</th>
            <th data-i18n="offers.table.expiry">Expires</th>
            <th data-i18n="offers.table.status">Status</th>
            <th data-i18n="offers.table.actions">Actions</th>
          </tr>
        </thead>
        <tbody id="couponsTableBody">
          <!-- Coupons will be loaded here -->
        </tbody>
      </table>
      
      <div class="empty-state" id="couponsEmptyState" style="display: none;">
        <i class="fas fa-ticket-alt"></i>
        <h3 data-i18n="offers.no.coupons">No Coupons Found</h3>
        <p data-i18n="offers.coupons.empty.message">Create your first coupon to offer discounts to your members</p>
        <button class="support-action-btn" id="createFirstCouponBtn">
          <i class="fas fa-plus"></i> <span data-i18n="offers.create.first.coupon">Create First Coupon</span>
        </button>
      </div>
    </div>
    
  </div>
  </div>
    <!-- Analytics Section -->
  <div id="analyticsSection" class="support-section" style="display: none;">
  <div class="support-content-container">
    <div class="support-content-header" style="margin-bottom: 24px;">
      <h2 class="content-title"><i class="fas fa-chart-bar"></i> Offers & Coupons Analytics</h2>
      <p>Track performance and engagement metrics for your campaigns</p>
    </div>
    
    <div class="analytics-content">
      <div class="analytics-charts" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 30px;">
        <div class="chart-container" style="background: #fff; padding: 24px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
          <h3 style="margin-bottom: 16px;"><i class="fas fa-chart-line"></i> Coupon Usage Trends</h3>
          <canvas id="usageTrendsChart" width="400" height="200"></canvas>
        </div>
        <div class="chart-container" style="background: #fff; padding: 24px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
          <h3 style="margin-bottom: 16px;"><i class="fas fa-pie-chart"></i> Offer Type Distribution</h3>
          <canvas id="offerTypeChart" width="400" height="200"></canvas>
        </div>
      </div>
      <div class="top-performers" style="background: #fff; padding: 24px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
        <h3 style="margin-bottom: 16px;"><i class="fas fa-trophy"></i> Top Performing Offers</h3>
        <div id="topOffersTable">
          <!-- Top offers will be loaded here -->
        </div>
      </div>
    </div>
  </div>
  </div>
  </div><!-- Close tab-inner-content -->
 </div><!-- Close offersTab -->

<!-- Offer Creation Modal -->
<div id="offerCreationModal" class="support-modal">
  <div class="support-modal-content large">
    <div class="support-modal-header">
      <h3><i class="fas fa-tags"></i> Create Custom Offer</h3>
      <button class="support-modal-close" id="closeOfferModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="support-modal-body">
      <form id="offerCreationForm">
        <div class="form-group">
          <label for="offerTitle">Offer Title:</label>
          <input type="text" id="offerTitle" name="title" required>
        </div>
        <div class="form-group">
          <label for="offerDescription">Description:</label>
          <textarea id="offerDescription" name="description" rows="3"></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="offerType">Discount Type:</label>
            <select id="offerType" name="discountType" required>
              <option value="percentage">Percentage (%)</option>
              <option value="fixed">Fixed Amount (₹)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="offerValue">Value:</label>
            <input type="number" id="offerValue" name="discountValue" required min="1">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="offerStartDate">Start Date:</label>
            <input type="datetime-local" id="offerStartDate" name="startDate" required>
          </div>
          <div class="form-group">
            <label for="offerEndDate">End Date:</label>
            <input type="datetime-local" id="offerEndDate" name="endDate" required>
          </div>
        </div>
        <div class="form-group">
          <label for="offerUsageLimit">Usage Limit (optional):</label>
          <input type="number" id="offerUsageLimit" name="usageLimit" min="1">
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="generateCouponCode" name="generateCoupon"> Generate Coupon Code
          </label>
        </div>
        <div class="form-group" id="couponCodeSection" style="display: none;">
          <label for="couponCode">Coupon Code:</label>
          <div class="input-with-button">
            <input type="text" id="couponCode" name="couponCode" readonly>
            <button type="button" id="regenerateCouponBtn">
              <i class="fas fa-sync-alt"></i>
            </button>
          </div>
        </div>
      </form>
    </div>
    <div class="support-modal-footer">
      <button type="button" id="cancelOfferBtn" class="btn-secondary">Cancel</button>
      <button type="submit" form="offerCreationForm" class="btn-primary">Create Offer</button>
    </div>
  </div>
</div>

<!-- Coupon Generation Modal -->
<div id="couponGenerationModal" class="support-modal">
  <div class="support-modal-content large">
    <div class="support-modal-header">
      <h3><i class="fas fa-ticket-alt"></i> Generate Coupon</h3>
      <button class="support-modal-close" id="closeCouponModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="support-modal-body">
      <form id="couponGenerationForm">
        <div class="form-group">
          <label for="couponTitle">Coupon Title:</label>
          <input type="text" id="couponTitle" name="title" required>
        </div>
        <div class="form-group">
          <label for="couponCodeInput">Coupon Code:</label>
          <div class="input-with-button">
            <input type="text" id="couponCodeInput" name="code" readonly required>
            <button type="button" id="generateRandomCouponBtn">
              <i class="fas fa-dice"></i>
            </button>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="couponType">Discount Type:</label>
            <select id="couponType" name="discountType" required>
              <option value="percentage">Percentage (%)</option>
              <option value="fixed">Fixed Amount (₹)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="couponValue">Value:</label>
            <input type="number" id="couponValue" name="discountValue" required min="1">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="couponMinPurchase">Minimum Purchase (₹):</label>
            <input type="number" id="couponMinPurchase" name="minPurchase" min="0" value="0">
          </div>
          <div class="form-group">
            <label for="couponUsageLimit">Usage Limit:</label>
            <input type="number" id="couponUsageLimit" name="usageLimit" min="1">
          </div>
        </div>
        <div class="form-group">
          <label for="couponExpiryDate">Expiry Date:</label>
          <input type="datetime-local" id="couponExpiryDate" name="expiryDate" required>
        </div>
      </form>
    </div>
    <div class="support-modal-footer">
      <button type="button" id="cancelCouponBtn" class="btn-secondary">Cancel</button>
      <button type="submit" form="couponGenerationForm" class="btn-primary">Generate Coupon</button>
    </div>
  </div>
</div>

<!-- Template Preview Modal -->
<div id="templatePreviewModal" class="support-modal">
  <div class="support-modal-content large">
    <div class="support-modal-header">
      <h3><i class="fas fa-eye"></i> Template Preview</h3>
      <button class="support-modal-close" id="closeTemplatePreviewModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="support-modal-body" id="templatePreviewContent">
      <!-- Preview content will be inserted here -->
    </div>
    <div class="support-modal-footer">
      <button id="customizeTemplateBtn" class="btn-secondary">
        <i class="fas fa-edit"></i> Customize
      </button>
      <button id="launchOfferBtn" class="btn-primary">
        <i class="fas fa-rocket"></i> Launch This Offer
      </button>
    </div>
  </div>
</div>

<!-- Coupon Detail Modal -->
<div id="couponDetailModal" class="offers-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2><i class="fas fa-ticket-alt"></i> Coupon Details</h2>
      <span class="modal-close" id="closeCouponDetailModal">&times;</span>
    </div>
    <div class="modal-body" id="couponDetailContent">
      <!-- Coupon details will be inserted here -->
    </div>
  </div>
</div>

<!-- Settings Tab -->
 <div id="settingsTab" class="tab-content" style="display:none;">
    <div class="tab-inner-content">
    <div class="page-header" style="margin-bottom: 30px;">
      <h1 class="page-title">
        <i class="fas fa-cog"></i> Settings
      </h1>
      <p style="color: var(--text-secondary); margin: 8px 0 0 0;">Customize your gym dashboard experience and manage preferences</p>
    </div>

    <div class="settings-container">
      <!-- Theme Settings -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="section-info-icon" onclick="showThemeInfo()" title="Theme & Appearance Information">
            <i class="fas fa-info"></i>
          </div>
          <div class="settings-header">
            <h3><i class="fas fa-palette"></i> Theme & Appearance</h3>
            <p>Customize the look and feel of your dashboard</p>
          </div>
          <div class="settings-content">
            <div class="theme-selector">
              <div class="theme-option" data-theme="light">
                <div class="theme-preview light-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-sidebar"></div>
                    <div class="preview-main"></div>
                  </div>
                </div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="dark">
                <div class="theme-preview dark-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-sidebar"></div>
                    <div class="preview-main"></div>
                  </div>
                </div>
                <span>Dark</span>
              </div>
              <div class="theme-option" data-theme="auto">
                <div class="theme-preview auto-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-sidebar"></div>
                    <div class="preview-main"></div>
                  </div>
                </div>
                <span>Auto</span>
              </div>
            </div>
            
            <div class="color-scheme-selector" style="margin-top: 20px;">
              <h4>Color Scheme</h4>
              <div class="color-options">
                <div class="color-option active" data-color="blue"><div class="color-circle" style="background: #1976d2;"></div></div>
                <div class="color-option" data-color="green"><div class="color-circle" style="background: #388e3c;"></div></div>
                <div class="color-option" data-color="purple"><div class="color-circle" style="background: #7b1fa2;"></div></div>
                <div class="color-option" data-color="orange"><div class="color-circle" style="background: #f57c00;"></div></div>
                <div class="color-option" data-color="grey"><div class="color-circle" style="background: #4f7c82;"></div></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      

      
      <!-- Enhanced Dashboard Customization Section -->
      <div class="settings-section">
        <div class="enhanced-settings-card enhanced-dashboard-section" id="customizeDashboardSection">
          <div class="section-info-icon" onclick="showCustomizeDashboardInfo()" title="Dashboard Customization Information">
            <i class="fas fa-info"></i>
          </div>
          
          <div class="enhanced-settings-header">
            <h3 class="enhanced-settings-title">
              <i class="fas fa-sliders-h"></i> Dashboard Customization
            </h3>
            <p class="enhanced-settings-description">
              Personalize your dashboard layout, visibility settings, and quick action preferences for an optimized workflow experience.
            </p>
          </div>

          <!-- Tab Visibility Controls -->
          <div class="enhanced-sub-section">
            <h4 class="enhanced-sub-section-title">
              <i class="fas fa-eye"></i> Tab Visibility
            </h4>
            
            <div class="enhanced-form-group">
              <div class="setting-info-enhanced">
                <div class="enhanced-form-label">
                  <i class="fas fa-dumbbell"></i> Equipment Management Tab
                </div>
                <div class="enhanced-form-description">
                  Control access to equipment tracking, maintenance logs, and gym inventory management features.
                </div>
              </div>
              <div class="enhanced-toggle-switch">
                <input type="checkbox" id="toggleEquipmentTab" checked>
                <span class="enhanced-toggle-slider"></span>
              </div>
            </div>

            <div class="enhanced-form-group">
              <div class="setting-info-enhanced">
                <div class="enhanced-form-label">
                  <i class="fas fa-credit-card"></i> Payment Management Tab
                </div>
                <div class="enhanced-form-description">
                  Enable payment processing, billing management, and financial reporting capabilities.
                </div>
              </div>
              <div class="enhanced-toggle-switch">
                <input type="checkbox" id="togglePaymentTab" checked>
                <span class="enhanced-toggle-slider"></span>
              </div>
            </div>
          </div>

          <!-- Quick Actions Layout -->
          <div class="enhanced-sub-section">
            <h4 class="enhanced-sub-section-title">
              <i class="fas fa-bolt"></i> Quick Actions Layout
            </h4>
            
            <div class="enhanced-layout-selector">
              <label class="enhanced-layout-option">
                <input type="radio" name="quickActionsLayoutSetting" value="default" checked>
                <div class="enhanced-layout-preview">
                  <i class="fas fa-th-large"></i>
                  <span>Default Grid</span>
                </div>
              </label>
              
              <label class="enhanced-layout-option">
                <input type="radio" name="quickActionsLayoutSetting" value="floating">
                <div class="enhanced-layout-preview">
                  <i class="fas fa-layer-group"></i>
                  <span>Floating Dock</span>
                </div>
              </label>
              
              <label class="enhanced-layout-option">
                <input type="radio" name="quickActionsLayoutSetting" value="circular">
                <div class="enhanced-layout-preview">
                  <i class="fas fa-circle-notch"></i>
                  <span>Circular Assistant</span>
                </div>
              </label>
            </div>
          </div>

          <!-- Quick Actions Management -->
          <div class="enhanced-sub-section">
            <h4 class="enhanced-sub-section-title">
              <i class="fas fa-palette"></i> Quick Actions Management
            </h4>
            
            <div class="enhanced-form-group">
              <div class="setting-info-enhanced">
                <div class="enhanced-form-label">
                  <i class="fas fa-cogs"></i> Customize Quick Actions
                </div>
                <div class="enhanced-form-description">
                  Configure which quick action buttons are visible and customize their arrangement for your workflow.
                </div>
              </div>
              <button id="openQuickActionsCustomizeFromSettings" class="btn btn-primary">
                <i class="fas fa-edit"></i> Customize Actions
              </button>
            </div>
          </div>

          <div class="alert alert-info">
            <i class="fas fa-lightbulb"></i>
            <div>
              <strong>Pro Tip:</strong> Hidden tabs will not be accessible until re-enabled. Quick actions can be reordered by dragging in the customization panel.
            </div>
          </div>
        </div>
      </div>

      <!-- Enhanced Security & Admin Management Section -->
      <div class="settings-section">
        <div class="enhanced-settings-card" id="securityAdminSection">
          <div class="section-info-icon" onclick="showSecurityInfo()" title="Security & Admin Information">
            <i class="fas fa-info"></i>
          </div>
          
          <div class="enhanced-settings-header">
            <h3 class="enhanced-settings-title">
              <i class="fas fa-shield-alt"></i> Security & Admin Management
            </h3>
            <p class="enhanced-settings-description">
              Comprehensive security controls, admin authentication, and privacy settings to protect your gym management system.
            </p>
          </div>

          <!-- Admin Passkey Security -->
          <div class="enhanced-sub-section">
            <h4 class="enhanced-sub-section-title">
              <i class="fas fa-key"></i> Admin Passkey Protection
            </h4>
            
            <div class="security-feature-grid">
              <div class="security-feature-card">
                <div class="security-feature-header">
                  <div class="security-feature-title">
                    <i class="fas fa-lock"></i> Payment Access Control
                  </div>
                  <span class="security-status-badge active" id="passkeyStatusBadge">Active</span>
                </div>
                <div class="security-feature-description">
                  Your 4-digit admin passkey secures access to payment management, financial reports, and sensitive billing operations.
                </div>
                <div class="security-feature-actions">
                  <button type="button" class="btn btn-primary" id="changePasskeyBtn">
                    <i class="fas fa-key"></i> Change Passkey
                  </button>
                  <button type="button" class="btn btn-secondary" id="generatePasskeyBtn">
                    <i class="fas fa-random"></i> Generate Random
                  </button>
                  <button type="button" class="btn btn-danger" id="disablePasskeyBtn">
                    <i class="fas fa-lock-open"></i> Disable
                  </button>
                </div>
              </div>
            </div>

            <!-- Change Passkey Form -->
            <div class="change-passkey-form" id="changePasskeyForm" style="display: none;">
              <div class="enhanced-sub-section">
                <h5>Update Admin Passkey</h5>
                <div class="form-section">
                  <label class="enhanced-form-label">Current Passkey</label>
                  <div class="passkey-input-row">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="current" data-index="0">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="current" data-index="1">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="current" data-index="2">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="current" data-index="3">
                  </div>
                </div>
                
                <div class="form-section">
                  <label class="enhanced-form-label">New Passkey</label>
                  <div class="passkey-input-row">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="new" data-index="0">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="new" data-index="1">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="new" data-index="2">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="new" data-index="3">
                  </div>
                </div>
                
                <div class="form-section">
                  <label class="enhanced-form-label">Confirm New Passkey</label>
                  <div class="passkey-input-row">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="confirm" data-index="0">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="confirm" data-index="1">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="confirm" data-index="2">
                    <input type="password" class="passkey-input-small" maxlength="1" data-group="confirm" data-index="3">
                  </div>
                </div>
                
                <div class="form-actions" style="display: flex; gap: 12px; margin-top: 20px;">
                  <button type="button" class="btn btn-secondary" id="cancelChangePasskey">Cancel</button>
                  <button type="button" class="btn btn-primary" id="saveNewPasskey">Save Passkey</button>
                </div>
                
                <div class="passkey-form-error" id="passkeyFormError" style="display: none;">
                  <i class="fas fa-exclamation-triangle"></i>
                  <span class="error-message"></span>
                </div>
              </div>
            </div>
          </div>

          <!-- Account Security -->
          <div class="enhanced-sub-section">
            <h4 class="enhanced-sub-section-title">
              <i class="fas fa-user-shield"></i> Account Security
            </h4>
            
            <div class="enhanced-setting-item">
              <div class="setting-info-enhanced">
                <div class="setting-label-enhanced">
                  <i class="fas fa-mobile-alt"></i> Two-Factor Authentication
                </div>
                <div class="setting-description-enhanced">
                  Add an extra layer of security to your account with SMS or authenticator app verification.
                </div>
              </div>
              <div class="setting-controls-enhanced">
                <div class="enhanced-toggle-switch">
                  <input type="checkbox" id="twoFactorAuth">
                  <span class="enhanced-toggle-slider"></span>
                </div>
                <button class="enhanced-action-btn" onclick="window.twoFactorManager.showBackupCodes(['ABC123', 'DEF456', 'GHI789'])" title="View backup codes">
                  <i class="fas fa-key"></i>
                </button>
              </div>
            </div>

            <div class="enhanced-setting-item">
              <div class="setting-info-enhanced">
                <div class="setting-label-enhanced">
                  <i class="fas fa-bell"></i> Login Notifications
                </div>
                <div class="setting-description-enhanced">
                  Get notified via email and app notifications when someone accesses your admin account.
                </div>
              </div>
              <div class="setting-controls-enhanced">
                <div class="enhanced-toggle-switch">
                  <input type="checkbox" id="loginNotifications" checked>
                  <span class="enhanced-toggle-slider"></span>
                </div>
                <button class="enhanced-action-btn" onclick="window.loginNotificationsManager.showNotificationPreferences()" title="Notification preferences">
                  <i class="fas fa-cog"></i>
                </button>
                <button class="enhanced-action-btn" onclick="window.loginNotificationsManager.showRecentLogins()" title="View recent logins">
                  <i class="fas fa-history"></i>
                </button>
              </div>
            </div>

            <div class="enhanced-setting-item">
              <div class="setting-info-enhanced">
                <div class="setting-label-enhanced">
                  <i class="fas fa-clock"></i> Session Timeout
                </div>
                <div class="setting-description-enhanced">
                  Automatically log out after a period of inactivity to protect your account.
                </div>
              </div>
              <div class="setting-controls-enhanced">
                <select class="enhanced-form-select" id="sessionTimeoutSelect" style="width: 150px;">
                  <option value="30">30 minutes</option>
                  <option value="60" selected>1 hour</option>
                  <option value="120">2 hours</option>
                  <option value="240">4 hours</option>
                  <option value="480">8 hours</option>
                  <option value="0">Never</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Privacy Controls -->
          <div class="enhanced-sub-section">
            <h4 class="enhanced-sub-section-title">
              <i class="fas fa-eye-slash"></i> Privacy Controls
            </h4>
            
            <div class="enhanced-setting-item">
              <div class="setting-info-enhanced">
                <div class="setting-label-enhanced">
                  <i class="fas fa-chart-line"></i> Analytics & Tracking
                </div>
                <div class="setting-description-enhanced">
                  Allow system analytics to help improve platform performance and user experience.
                </div>
              </div>
              <div class="setting-controls-enhanced">
                <div class="enhanced-toggle-switch">
                  <input type="checkbox" id="analyticsTracking" checked>
                  <span class="enhanced-toggle-slider"></span>
                </div>
              </div>
            </div>

            <div class="enhanced-setting-item">
              <div class="setting-info-enhanced">
                <div class="setting-label-enhanced">
                  <i class="fas fa-database"></i> Data Retention
                </div>
                <div class="setting-description-enhanced">
                  Control how long inactive member data and logs are retained in the system.
                </div>
              </div>
              <div class="setting-controls-enhanced">
                <select class="enhanced-form-select" id="dataRetentionSelect" style="width: 150px;">
                  <option value="30">30 days</option>
                  <option value="90">90 days</option>
                  <option value="180" selected>6 months</option>
                  <option value="365">1 year</option>
                  <option value="0">Never delete</option>
                </select>
              </div>
            </div>
          </div>

          <div class="alert alert-info">
            <i class="fas fa-shield-alt"></i>
            <div>
              <strong>Security Reminder:</strong> Regular security audits and strong authentication help protect your gym's sensitive data and member information.
            </div>
          </div>
        </div>
      </div>

    <!-- Subscription Management Section -->
    <div class="settings-section card" id="subscriptionManagementSection">
      <div class="section-info-icon" onclick="showSubscriptionInfo()" title="Subscription Management Information">
        <i class="fas fa-info"></i>
      </div>
      <h2 style="margin-bottom: 18px; color: var(--primary); display: flex; align-items: center; gap: 10px; font-size: 1.4rem;">
        <i class="fas fa-crown"></i> Subscription Management
      </h2>
      <p style="color: var(--text-secondary); margin-bottom: 24px; font-size: 0.95rem;">
        View your current subscription plan, payment history, and manage your gym's subscription
      </p>

      <!-- Current Subscription Status -->
      <div class="subscription-status-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 24px; border-radius: 12px; color: white; margin-bottom: 24px;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
          <div>
            <h3 style="margin: 0; font-size: 1.5rem; display: flex; align-items: center; gap: 8px;">
              <i class="fas fa-crown"></i> <span id="currentPlanName">Loading...</span>
            </h3>
            <p style="margin: 4px 0 0 0; opacity: 0.9; font-size: 1rem;" id="currentPlanDescription">Checking subscription status...</p>
          </div>
          <div class="subscription-badge" id="subscriptionStatus" style="background: rgba(255,255,255,0.2); padding: 8px 16px; border-radius: 20px; font-weight: 600;">
            Loading...
          </div>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-top: 20px;">
          <div style="background: rgba(255,255,255,0.1); padding: 16px; border-radius: 8px; text-align: center;">
            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 4px;" id="subscriptionAmount">₹--</div>
            <div style="font-size: 0.9rem; opacity: 0.8;">Monthly Cost</div>
          </div>
          <div style="background: rgba(255,255,255,0.1); padding: 16px; border-radius: 8px; text-align: center;">
            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 4px;" id="daysRemaining">--</div>
            <div style="font-size: 0.9rem; opacity: 0.8;">Days Remaining</div>
          </div>
          <div style="background: rgba(255,255,255,0.1); padding: 16px; border-radius: 8px; text-align: center;">
            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 4px;" id="nextPaymentDate">--</div>
            <div style="font-size: 0.9rem; opacity: 0.8;">Next Payment</div>
          </div>
        </div>
      </div>

      <!-- Subscription Actions -->
      <div class="subscription-actions" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
        <button id="renewSubscriptionBtn" class="subscription-action-btn" style="background: #4CAF50; color: white; border: none; padding: 16px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: 600; transition: all 0.3s ease;">
          <i class="fas fa-redo-alt"></i> Renew Subscription
        </button>
        <button id="changePlanBtn" class="subscription-action-btn" style="background: #2196F3; color: white; border: none; padding: 16px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: 600; transition: all 0.3s ease;">
          <i class="fas fa-exchange-alt"></i> Change Plan
        </button>
        <button id="viewPaymentHistoryBtn" class="subscription-action-btn" style="background: #FF9800; color: white; border: none; padding: 16px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: 600; transition: all 0.3s ease;">
          <i class="fas fa-history"></i> Payment History
        </button>
        <button id="downloadInvoiceBtn" class="subscription-action-btn" style="background: #9C27B0; color: white; border: none; padding: 16px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: 600; transition: all 0.3s ease;">
          <i class="fas fa-download"></i> Download Invoice
        </button>
      </div>

      <!-- Subscription Features -->
      <div class="subscription-features" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 24px;">
        <h4 style="margin: 0 0 16px 0; color: #333; display: flex; align-items: center; gap: 8px;">
          <i class="fas fa-check-circle" style="color: #4CAF50;"></i> Your Plan Features
        </h4>
        <div id="subscriptionFeaturesList" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px;">
          <!-- Features will be loaded dynamically -->
          <div style="display: flex; align-items: center; gap: 8px; padding: 8px; background: white; border-radius: 4px;">
            <i class="fas fa-spinner fa-spin" style="color: #666;"></i>
            <span style="color: #666;">Loading features...</span>
          </div>
        </div>
      </div>

      <!-- Usage Statistics -->
      <div class="usage-statistics" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 24px;">
        <h4 style="margin: 0 0 16px 0; color: #333; display: flex; align-items: center; gap: 8px;">
          <i class="fas fa-chart-bar" style="color: #2196F3;"></i> Usage Statistics (This Month)
        </h4>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
          <div style="background: white; padding: 16px; border-radius: 8px; text-align: center; border-left: 4px solid #4CAF50;">
            <div style="font-size: 1.5rem; font-weight: bold; color: #4CAF50; margin-bottom: 4px;" id="totalMembers">--</div>
            <div style="font-size: 0.9rem; color: #666;">Total Members</div>
          </div>
          <div style="background: white; padding: 16px; border-radius: 8px; text-align: center; border-left: 4px solid #2196F3;">
            <div style="font-size: 1.5rem; font-weight: bold; color: #2196F3; margin-bottom: 4px;" id="totalPayments">--</div>
            <div style="font-size: 0.9rem; color: #666;">Payments Processed</div>
          </div>
          <div style="background: white; padding: 16px; border-radius: 8px; text-align: center; border-left: 4px solid #FF9800;">
            <div style="font-size: 1.5rem; font-weight: bold; color: #FF9800; margin-bottom: 4px;" id="storageUsed">--</div>
            <div style="font-size: 0.9rem; color: #666;">Storage Used</div>
          </div>
        </div>
      </div>

      <!-- Emergency Actions -->
      <div class="emergency-actions" style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 16px; border-radius: 8px;">
        <h4 style="margin: 0 0 12px 0; color: #856404; display: flex; align-items: center; gap: 8px;">
          <i class="fas fa-exclamation-triangle"></i> Emergency Actions
        </h4>
        <p style="margin: 0 0 16px 0; color: #856404; font-size: 0.9rem;">
          Use these actions only if you're experiencing issues with your subscription.
        </p>
        <div style="display: flex; gap: 12px; flex-wrap: wrap;">
          <button id="contactSupportBtn" style="background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 0.9rem;">
            <i class="fas fa-life-ring"></i> Contact Support
          </button>
          <button id="reportIssueBtn" style="background: #6c757d; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 0.9rem;">
            <i class="fas fa-bug"></i> Report Issue
          </button>
        </div>
      </div>
    </div>

    <!-- Biometric Attendance Settings -->
    <div class="settings-section card" id="biometricAttendanceSection">
      <div class="section-info-icon" onclick="showBiometricInfo()" title="Biometric Attendance Information">
        <i class="fas fa-info"></i>
      </div>
      <h2 style="margin-bottom: 18px; color: var(--primary); display: flex; align-items: center; gap: 10px; font-size: 1.4rem;">
        <i class="fas fa-fingerprint"></i> Biometric Attendance
      </h2>
      <p style="color: var(--text-secondary); margin-bottom: 24px; font-size: 0.95rem;">
        Configure advanced biometric attendance methods for enhanced security and convenience
      </p>
      
      <!-- Fingerprint Attendance -->
      <div class="form-group" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; padding: 16px; background: var(--card-bg); border-radius: 8px; border: 1px solid var(--border-color);">
        <div style="flex: 1;">
          <label for="toggleFingerprintAttendance" style="font-weight: 500; font-size: 1rem; display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
            <i class="fas fa-fingerprint" style="color: #4CAF50;"></i>
            Fingerprint-Based Attendance
          </label>
          <small style="color: var(--text-secondary); font-size: 0.85rem;">
            Allow members and trainers to mark attendance using fingerprint scanning
          </small>
        </div>
        <label class="switch" style="margin-left: 16px;">
          <input type="checkbox" id="toggleFingerprintAttendance">
          <span class="slider round"></span>
        </label>
      </div>

      <!-- Face Recognition Attendance -->
      <div class="form-group" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; padding: 16px; background: var(--card-bg); border-radius: 8px; border: 1px solid var(--border-color);">
        <div style="flex: 1;">
          <label for="toggleFaceRecognitionAttendance" style="font-weight: 500; font-size: 1rem; display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
            <i class="fas fa-user-check" style="color: #2196F3;"></i>
            Face Recognition Attendance
          </label>
          <small style="color: var(--text-secondary); font-size: 0.85rem;">
            Enable facial recognition for contactless attendance marking
          </small>
        </div>
        <label class="switch" style="margin-left: 16px;">
          <input type="checkbox" id="toggleFaceRecognitionAttendance">
          <span class="slider round"></span>
        </label>
      </div>

      <!-- Biometric Settings -->
      <div id="biometricSettings" class="biometric-advanced-control" style="margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--border-color); display: none;">
        <h4 style="margin-bottom: 16px; color: var(--text-primary); font-size: 1.1rem;">
          <i class="fas fa-cog" style="margin-right: 8px;"></i>Biometric Configuration
        </h4>
        
        <!-- Auto-enrollment -->
        <div class="form-group biometric-advanced-control" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
          <div>
            <label for="autoEnrollBiometric" style="font-weight: 500; font-size: 0.95rem;">Auto-Enroll New Members</label>
            <small style="color: var(--text-secondary); display: block; font-size: 0.8rem;">Automatically prompt new members to register biometric data</small>
          </div>
          <label class="switch">
            <input type="checkbox" id="autoEnrollBiometric" checked>
            <span class="slider round"></span>
          </label>
        </div>

        <!-- Backup attendance method -->
        <div class="form-group" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
          <div>
            <label for="backupAttendanceMethod" style="font-weight: 500; font-size: 0.95rem;">Allow Manual Backup</label>
            <small style="color: var(--text-secondary); display: block; font-size: 0.8rem;">Enable manual attendance marking if biometric fails</small>
          </div>
          <label class="switch">
            <input type="checkbox" id="backupAttendanceMethod" checked>
            <span class="slider round"></span>
          </label>
        </div>

        <!-- Security level -->
        <div class="form-group" style="margin-bottom: 16px;">
          <label for="biometricSecurityLevel" style="font-weight: 500; font-size: 0.95rem; display: block; margin-bottom: 8px;">Security Level</label>
          <select id="biometricSecurityLevel" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-primary); color: var(--text-primary);">
            <option value="standard">Standard (Recommended)</option>
            <option value="high">High Security</option>
            <option value="maximum">Maximum Security</option>
          </select>
          <small style="color: var(--text-secondary); font-size: 0.8rem; margin-top: 4px; display: block;">Higher security may require multiple authentication attempts</small>
        </div>
      </div>

      <!-- Quick Actions -->
      <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--border-color);">
        <h4 style="margin-bottom: 16px; color: var(--text-primary); font-size: 1.1rem;">
          <i class="fas fa-bolt" style="margin-right: 8px;"></i>Quick Actions
        </h4>
        <div style="display: flex; gap: 12px; flex-wrap: wrap; justify-content: stretch; width: 100%;">
          <button id="setupBiometricDevices" class="btn btn-primary biometric-advanced-control" style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; font-size: 0.9rem; flex: 1 1 200px; min-width: 160px; justify-content: center;">
            <i class="fas fa-plus"></i>
            Setup Devices
          </button>
          <button id="testBiometricConnection" class="btn btn-secondary biometric-advanced-control" style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; font-size: 0.9rem; flex: 1 1 200px; min-width: 160px; justify-content: center;">
            <i class="fas fa-wifi"></i>
            Test Connection
          </button>
          <button id="enrollBiometricData" class="btn btn-primary biometric-advanced-control" style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; font-size: 0.9rem; flex: 1 1 200px; min-width: 160px; justify-content: center;">
            <i class="fas fa-user-plus"></i>
            Enroll Members
          </button>
          <button id="biometricReports" class="btn btn-primary biometric-advanced-control" style="display: flex; align-items: center; gap: 8px; padding: 10px 16px; font-size: 0.9rem; flex: 1 1 200px; min-width: 160px; justify-content: center;">
            <i class="fas fa-chart-bar"></i>
            View Reports
          </button>
        </div>
      </div>

      <div class="alert alert-info" style="margin-top: 20px; padding: 12px 16px; background: #e3f2fd; border-left: 4px solid #2196F3; border-radius: 6px;">
        <i class="fas fa-info-circle" style="margin-right: 8px; color: #2196F3;"></i>
        <strong>Note:</strong> Biometric attendance requires compatible hardware devices. Contact our support team for device recommendations and setup assistance.
      </div>
    </div>
      <!-- Notification Settings -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="section-info-icon" onclick="showNotificationInfo()" title="Notification Settings Information">
            <i class="fas fa-info"></i>
          </div>
          <div class="settings-header">
            <h3><i class="fas fa-bell"></i> Notifications</h3>
            <p>Control how and when you receive notifications</p>
          </div>
          <div class="settings-content">
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">New Member Alerts</div>
                <div class="setting-description">Get notified when new members join</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="newMemberNotif" checked aria-labelledby="newMemberNotifLabel">
                <label for="newMemberNotif" id="newMemberNotifLabel" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Payment Notifications</div>
                <div class="setting-description">Alerts for payment confirmations and due dates</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="paymentNotif" checked aria-labbelledby="paymentNotifLabel">
                <label for="paymentNotif" id="paymentNotifLabel" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Trainer Updates</div>
                <div class="setting-description">Notifications about trainer applications and updates</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="trainerNotif" checked aria-labelledby="trainerNotifLabel">
                <label for="trainerNotif" id="trainerNotifLabel" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Trial Booking Alerts</div>
                <div class="setting-description">Get notified when users book trial sessions</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="trialBookingNotif" checked aria-labelledby="trialBookingNotifLabel">
                <label for="trialBookingNotif" id="trialBookingNotifLabel" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Email Notifications</div>
                <div class="setting-description">Receive notifications via email</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="emailNotif">
                <label for="emailNotif" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Membership Expiry Alerts</div>
                <div class="setting-description">Get notified when memberships are about to expire</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="membershipExpiryNotif" checked aria-labelledby="membershipExpiryNotifLabel">
                <label for="membershipExpiryNotif" id="membershipExpiryNotifLabel" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Admin Updates</div>
                <div class="setting-description">Notifications for admin-level system updates</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="adminUpdateNotif" checked aria-labelledby="adminUpdateNotifLabel">
                <label for="adminUpdateNotif" id="adminUpdateNotifLabel" class="toggle-label"></label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Services Management -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="section-info-icon" onclick="showServicesInfo()" title="Services & Features Information">
            <i class="fas fa-info"></i>
          </div>
          <div class="settings-header">
            <h3><i class="fas fa-cogs"></i> Services & Features</h3>
            <p>Enable or disable gym services</p>
          </div>
          <div class="settings-content">
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Online Booking</div>
                <div class="setting-description">Allow members to book sessions online</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="onlineBooking" checked>
                <label for="onlineBooking" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Personal Training</div>
                <div class="setting-description">Offer personal training services</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="personalTraining" checked>
                <label for="personalTraining" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Group Classes</div>
                <div class="setting-description">Provide group fitness classes</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="groupClasses" checked>
                <label for="groupClasses" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Equipment Reservation</div>
                <div class="setting-description">Allow equipment booking in advance</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="equipmentReservation">
                <label for="equipmentReservation" class="toggle-label"></label>
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <div class="setting-label">Member Check-in</div>
                <div class="setting-description">Digital check-in system for members</div>
              </div>
              <div class="toggle-switch">
                <input type="checkbox" id="memberCheckin" checked>
                <label for="memberCheckin" class="toggle-label"></label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Operating Hours -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="section-info-icon" onclick="showOperatingHoursInfo()" title="Operating Hours Information">
            <i class="fas fa-info"></i>
          </div>
          <div class="settings-header">
            <h3><i class="fas fa-clock"></i> Operating Hours</h3>
            <p>Set your gym's operating schedule</p>
          </div>
          <div class="settings-content">
            <div class="operating-hours-grid">
              <div class="day-hours">
                <label>Monday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="monClosed">
                    <label for="monClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Tuesday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="tueClosed">
                    <label for="tueClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Wednesday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="wedClosed">
                    <label for="wedClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Thursday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="thuClosed">
                    <label for="thuClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Friday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="friClosed">
                    <label for="friClosed" class="toggle-label">Closed</label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Saturday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="satClosed">
                    <label for="satClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
              <div class="day-hours">
                <label>Sunday</label>
                <div class="hours-input">
                  <input type="time" value="06:00">
                  <span>to</span>
                  <input type="time" value="22:00">
                  <div class="toggle-switch">
                    <input type="checkbox" id="sunClosed">
                    <label for="sunClosed" class="toggle-label"></label>
                  </div>
                  <span>Closed</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>



      <!-- Data Management -->
      <div class="settings-section">
        <div class="settings-card">
          <div class="section-info-icon" onclick="showDataManagementInfo()" title="Data Management Information">
            <i class="fas fa-info"></i>
          </div>
          <div class="settings-header">
            <h3><i class="fas fa-database"></i> Data Management</h3>
            <p>Backup and export your gym data</p>
          </div>
          <div class="settings-content">
            <div class="data-action">
              <div class="action-info">
                <h4>Export Member Data</h4>
                <p>Download a CSV file with all member information</p>
              </div>
              <button class="action-btn secondary">
                <i class="fas fa-download"></i>
                Export CSV
              </button>
            </div>
            
            <div class="data-action">
              <div class="action-info">
                <h4>Backup Database</h4>
                <p>Create a complete backup of your gym database</p>
              </div>
              <button class="action-btn secondary">
                <i class="fas fa-save"></i>
                Create Backup
              </button>
            </div>
            
            <div class="data-action">
              <div class="action-info">
                <h4>Clear Cache</h4>
                <p>Clear temporary data to improve performance</p>
              </div>
              <button class="action-btn secondary">
                <i class="fas fa-trash"></i>
                Clear Cache
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div><!-- close tab-inner-content -->
  </div><!-- Close settingsTab -->
 
<!-- Attendance Tab -->
 <div id="attendanceTab" class="tab-content" style="display:none;">
  <div class="tab-inner-content">
    
    <!-- Page Header - Matching Other Tabs -->
    <div class="page-header">
      <h1 class="page-title">
        <i class="fas fa-calendar-check"></i>
        Attendance Management
      </h1>
    </div>
    
    <!-- Stats Cards Section - Matching Offers Tab Style -->
    <div class="attendance-stats-grid" id="attendanceStatsGrid">
      <div class="attendance-stat-card total-members">
        <div class="stat-info">
          <div class="stat-header">
            <h3>Total <span class="currentTabLabel">Members</span></h3>
            <div class="stat-icon"><i class="fas fa-users"></i></div>
          </div>
          <div class="stat-number" id="totalCount">0</div>
        </div>
      </div>
      
      <div class="attendance-stat-card present-count">
        <div class="stat-info">
          <div class="stat-header">
            <h3>Present Today</h3>
            <div class="stat-icon"><i class="fas fa-user-check"></i></div>
          </div>
          <div class="stat-number" id="presentCount">0</div>
        </div>
      </div>
      
      <div class="attendance-stat-card absent-count">
        <div class="stat-info">
          <div class="stat-header">
            <h3>Absent Today</h3>
            <div class="stat-icon"><i class="fas fa-user-times"></i></div>
          </div>
          <div class="stat-number" id="absentCount">0</div>
        </div>
      </div>
      
      <div class="attendance-stat-card pending-count">
        <div class="stat-info">
          <div class="stat-header">
            <h3>Pending</h3>
            <div class="stat-icon"><i class="fas fa-clock"></i></div>
          </div>
          <div class="stat-number" id="pendingCount">0</div>
        </div>
      </div>
    </div>

    <!-- Control Panel - Redesigned -->
    <div class="attendance-control-panel">

      <!-- Tab Navigation - Matching Offers Tab Style -->
      <div class="attendance-tabs-container">
        <div class="attendance-tabs">
          <button class="attendance-tab-btn active" data-tab="members">
            <i class="fas fa-users"></i>
            Members
            <span class="tab-count" id="membersCount">0</span>
          </button>
          <button class="attendance-tab-btn" data-tab="trainers">
            <i class="fas fa-user-tie"></i>
            Trainers
            <span class="tab-count" id="trainersCount">0</span>
          </button>
        </div>
      </div>

      <!-- Filters Section - Matching Offers Tab Style -->
      <div class="attendance-filters">
        <div class="filter-group">
          <label>Search</label>
          <div class="search-box">
            <input type="text" id="attendanceSearch" class="filter-input" placeholder="Search by name or ID...">
            <i class="fas fa-search"></i>
          </div>
        </div>
        
        <div class="filter-group">
          <label>Date</label>
          <div class="date-navigation">
            <button class="date-nav-btn" id="prevDay" title="Previous Day">
              <i class="fas fa-chevron-left"></i>
            </button>
            <input type="date" id="attendanceDate" class="date-input" />
            <button class="date-nav-btn" id="nextDay" title="Next Day">
              <i class="fas fa-chevron-right"></i>
            </button>
            <button class="today-btn" id="todayBtn">
              <i class="fas fa-calendar-day"></i>
              Today
            </button>
          </div>
        </div>
        
        <div class="filter-group">
          <label>Filter Status</label>
          <select class="filter-select" id="attendanceFilter">
            <option value="all">All</option>
            <option value="present">Present</option>
            <option value="absent">Absent</option>
            <option value="pending">Pending</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label>Quick Actions</label>
          <div class="bulk-actions">
            <button class="bulk-btn bulk-biometric" id="quickBiometricBtn">
              <i class="fas fa-fingerprint"></i>
              Quick Verify
            </button>
            <button class="bulk-btn bulk-present" id="bulkPresentBtn">
              <i class="fas fa-check-circle"></i>
              Mark All Present
            </button>
            <button class="bulk-btn bulk-absent" id="bulkAbsentBtn">
              <i class="fas fa-times-circle"></i>
              Mark All Absent
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Attendance Table Container -->
    <div class="attendance-table-container">
      <div class="attendance-table-header">
        <div class="column-header"><i class="fas fa-image"></i></div>
        <div class="column-header"><i class="fas fa-user"></i> Name</div>
        <div class="column-header"><i class="fas fa-id-card"></i> ID</div>
        <div class="column-header"><i class="fas fa-info-circle"></i> Status</div>
        <div class="column-header"><i class="fas fa-clock"></i> Check-in</div>
        <div class="column-header"><i class="fas fa-tasks"></i> Actions</div>
      </div>
      
      <div class="attendance-table-body" id="attendanceTableBody">
        <!-- Attendance rows will be populated by JavaScript -->
        <div class="loading-row">
          <div class="spinner"></div>
          Loading attendance data...
        </div>
      </div>
    </div>
  </div><!-- Close inner container -->
 </div><!-- Close attendanceTab -->
 </div> <!-- close main-container -->
  <!-- Renew Subscription Modal -->
  <div class="modal" id="renewSubscriptionModal" style="display: none;">
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header-style">
        <h3 class="modal-title-style">
          <i class="fas fa-redo-alt"></i> Renew Subscription
        </h3>
        <button class="modal-close" id="closeRenewSubscriptionModal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="current-plan-info" style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 20px;">
          <h4 style="margin: 0 0 8px 0; color: #333;">Current Plan</h4>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span id="currentPlanNameRenew" style="font-weight: 600; color: #2196F3;">Loading...</span>
            <span id="currentPlanAmountRenew" style="font-weight: 600; color: #4CAF50;">₹--/month</span>
          </div>
          <div style="margin-top: 8px; font-size: 0.9rem; color: #666;">
            Expires on: <span id="currentExpiryDateRenew">--</span>
          </div>
        </div>
        
        <div class="renewal-options">
          <h4 style="margin: 0 0 16px 0; color: #333;">Renewal Duration</h4>
          <div class="renewal-plans" style="display: grid; gap: 12px;">
            <label class="renewal-option" style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
              <div>
                <input type="radio" name="renewalPlan" value="1month" style="margin-right: 12px;">
                <span style="font-weight: 600;">1 Month</span>
                <div style="font-size: 0.8rem; color: #666; margin-left: 24px;">Renew for 1 month</div>
              </div>
              <span style="font-weight: 600; color: #4CAF50;">₹999</span>
            </label>
            <label class="renewal-option" style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
              <div>
                <input type="radio" name="renewalPlan" value="3month" style="margin-right: 12px;">
                <span style="font-weight: 600;">3 Months</span>
                <div style="font-size: 0.8rem; color: #666; margin-left: 24px;">Save 15% - Best Value!</div>
              </div>
              <span style="font-weight: 600; color: #4CAF50;">₹1,699</span>
            </label>
            <label class="renewal-option" style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
              <div>
                <input type="radio" name="renewalPlan" value="6month" style="margin-right: 12px;">
                <span style="font-weight: 600;">6 Months</span>
                <div style="font-size: 0.8rem; color: #666; margin-left: 24px;">Save 25% - Maximum Savings!</div>
              </div>
              <span style="font-weight: 600; color: #4CAF50;">₹3,299</span>
            </label>
          </div>
        </div>

        <div class="payment-method-selection" style="margin-top: 24px;">
          <h4 style="margin: 0 0 16px 0; color: #333;">Payment Method</h4>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px;">
            <label style="display: flex; flex-direction: column; align-items: center; padding: 16px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
              <input type="radio" name="paymentMethod" value="razorpay" style="margin-bottom: 8px;">
              <i class="fab fa-cc-visa" style="font-size: 24px; color: #1976d2; margin-bottom: 4px;"></i>
              <span style="font-size: 0.8rem;">Razorpay</span>
            </label>
            <label style="display: flex; flex-direction: column; align-items: center; padding: 16px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
              <input type="radio" name="paymentMethod" value="stripe" style="margin-bottom: 8px;">
              <i class="fab fa-stripe" style="font-size: 24px; color: #635bff; margin-bottom: 4px;"></i>
              <span style="font-size: 0.8rem;">Stripe</span>
            </label>
            <label style="display: flex; flex-direction: column; align-items: center; padding: 16px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
              <input type="radio" name="paymentMethod" value="paypal" style="margin-bottom: 8px;">
              <i class="fab fa-paypal" style="font-size: 24px; color: #0070ba; margin-bottom: 4px;"></i>
              <span style="font-size: 0.8rem;">PayPal</span>
            </label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelRenewalBtn">Cancel</button>
        <button type="button" class="btn btn-primary" id="proceedRenewalBtn">
          <i class="fas fa-credit-card"></i> Proceed to Payment
        </button>
      </div>
    </div>
  </div>

  <!-- Change Plan Modal -->
  <div class="modal" id="changePlanModal" style="display: none;">
    <div class="modal-content" style="max-width: 700px;">
      <div class="modal-header-style">
        <h3 class="modal-title-style">
          <i class="fas fa-exchange-alt"></i> Change Subscription Plan
        </h3>
        <button class="modal-close" id="closeChangePlanModal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="plan-comparison" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
          <!-- Monthly Plan -->
          <div class="plan-card" data-plan="1month" style="border: 2px solid #e0e0e0; border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
            <div style="background: #2196F3; color: white; padding: 8px; border-radius: 6px; margin-bottom: 16px;">
              <h4 style="margin: 0;">Monthly</h4>
            </div>
            <div style="font-size: 2rem; font-weight: bold; color: #333; margin-bottom: 8px;">₹999</div>
            <div style="color: #666; margin-bottom: 16px;">per month</div>
            <ul style="list-style: none; padding: 0; margin: 0; text-align: left;">
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> All Basic Features</li>
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> Member Management</li>
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> Payment Tracking</li>
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> Basic Support</li>
            </ul>
          </div>
          
          <!-- Quarterly Plan -->
          <div class="plan-card popular" data-plan="3month" style="border: 2px solid #4CAF50; border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s ease; position: relative;">
            <div style="position: absolute; top: -8px; left: 50%; transform: translateX(-50%); background: #4CAF50; color: white; padding: 4px 12px; border-radius: 4px; font-size: 0.8rem; font-weight: 600;">POPULAR</div>
            <div style="background: #4CAF50; color: white; padding: 8px; border-radius: 6px; margin-bottom: 16px;">
              <h4 style="margin: 0;">Quarterly</h4>
            </div>
            <div style="font-size: 2rem; font-weight: bold; color: #333; margin-bottom: 8px;">₹1,699</div>
            <div style="color: #666; margin-bottom: 4px;">₹566/month</div>
            <div style="color: #4CAF50; font-weight: 600; margin-bottom: 16px; font-size: 0.9rem;">Save 15%</div>
            <ul style="list-style: none; padding: 0; margin: 0; text-align: left;">
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> All Monthly Features</li>
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> Advanced Analytics</li>
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> Priority Support</li>
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> Custom Reports</li>
            </ul>
          </div>
          
          <!-- Half-Yearly Plan -->
          <div class="plan-card" data-plan="6month" style="border: 2px solid #e0e0e0; border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
            <div style="background: #FF9800; color: white; padding: 8px; border-radius: 6px; margin-bottom: 16px;">
              <h4 style="margin: 0;">Half-Yearly</h4>
            </div>
            <div style="font-size: 2rem; font-weight: bold; color: #333; margin-bottom: 8px;">₹3,299</div>
            <div style="color: #666; margin-bottom: 4px;">₹549/month</div>
            <div style="color: #FF9800; font-weight: 600; margin-bottom: 16px; font-size: 0.9rem;">Save 25%</div>
            <ul style="list-style: none; padding: 0; margin: 0; text-align: left;">
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> All Quarterly Features</li>
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> Premium Support</li>
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> White-label Option</li>
              <li style="padding: 4px 0; display: flex; align-items: center; gap: 8px;"><i class="fas fa-check" style="color: #4CAF50;"></i> API Access</li>
            </ul>
          </div>
        </div>
        
        <div id="planChangeNote" style="margin-top: 20px; padding: 16px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; display: none;">
          <p style="margin: 0; color: #856404; font-size: 0.9rem;">
            <i class="fas fa-info-circle"></i> 
            <strong>Note:</strong> Plan changes will take effect immediately. Any remaining balance from your current plan will be adjusted.
          </p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelChangePlanBtn">Cancel</button>
        <button type="button" class="btn btn-primary" id="confirmChangePlanBtn" disabled>
          <i class="fas fa-exchange-alt"></i> Change Plan
        </button>
      </div>
    </div>
  </div>

  <!-- Payment History Modal -->
  <div class="modal" id="paymentHistoryModal" style="display: none;">
    <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
      <div class="modal-header-style">
        <h3 class="modal-title-style">
          <i class="fas fa-history"></i> Payment History
        </h3>
        <button class="modal-close" id="closePaymentHistoryModal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="payment-history-filters" style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
          <select id="paymentHistoryYear" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <option value="">All Years</option>
          </select>
          <select id="paymentHistoryMonth" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <option value="">All Months</option>
            <option value="0">January</option>
            <option value="1">February</option>
            <option value="2">March</option>
            <option value="3">April</option>
            <option value="4">May</option>
            <option value="5">June</option>
            <option value="6">July</option>
            <option value="7">August</option>
            <option value="8">September</option>
            <option value="9">October</option>
            <option value="10">November</option>
            <option value="11">December</option>
          </select>
          <select id="paymentHistoryStatus" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <option value="">All Status</option>
            <option value="success">Success</option>
            <option value="pending">Pending</option>
            <option value="failed">Failed</option>
          </select>
        </div>
        
        <div class="payment-history-table-container" style="overflow-x: auto;">
          <table id="paymentHistoryTable" style="width: 100%; border-collapse: collapse;">
            <thead>
              <tr style="background: #f8f9fa;">
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Date</th>
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Amount</th>
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Plan</th>
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Method</th>
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Status</th>
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Transaction ID</th>
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Actions</th>
              </tr>
            </thead>
            <tbody id="paymentHistoryTableBody">
              <tr>
                <td colspan="7" style="padding: 40px; text-align: center; color: #666;">
                  <i class="fas fa-spinner fa-spin"></i> Loading payment history...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="exportPaymentHistoryBtn">
          <i class="fas fa-download"></i> Export CSV
        </button>
        <button type="button" class="btn btn-primary" id="closePaymentHistoryBtn">Close</button>
      </div>
    </div>
  </div>

  <!-- Add Payment Modal -->
  <div class="add-payment-modal" id="addPaymentModal" style="display: none;">
    <div class="add-payment-modal-content">
      <div class="add-payment-modal-header">
        <h3 class="add-payment-modal-title">
          <i class="fas fa-plus-circle"></i> Add Payment
        </h3>
        <button class="modal-close-btn" id="closeAddPaymentModal">&times;</button>
      </div>
      <div class="add-payment-modal-body">
        <form id="addPaymentForm">
          <div class="payment-form-grid">
            <div class="payment-form-group">
              <label class="payment-form-label" for="paymentType">Payment Type</label>
              <select class="payment-form-select" id="paymentType" name="type" required>
                <option value="">Select Type</option>
                <option value="received">Amount Received</option>
                <option value="paid">Amount Paid</option>
                <option value="due">Payment Due</option>
                <option value="pending">Payment Pending</option>
              </select>
            </div>

            <div class="payment-form-group">
              <label class="payment-form-label" for="paymentAmount">Amount (₹)</label>
              <input type="number" class="payment-form-input" id="paymentAmount" name="amount" min="0" step="0.01" required>
            </div>

            <div class="payment-form-group full-width">
              <label class="payment-form-label" for="paymentCategory">Category</label>
              <div class="payment-category-grid fa-theme-grid" id="paymentCategoryGrid">
                <div class="payment-category-item" data-category="rent">
                  <div class="category-icon"><i class="fas fa-building"></i></div>
                  <span class="category-label">Rent</span>
                </div>
                <div class="payment-category-item" data-category="utilities">
                  <div class="category-icon"><i class="fas fa-bolt"></i></div>
                  <span class="category-label">Utilities</span>
                </div>
                <div class="payment-category-item" data-category="staff_salary">
                  <div class="category-icon"><i class="fas fa-users"></i></div>
                  <span class="category-label">Staff Salary</span>
                </div>
                <div class="payment-category-item" data-category="equipment_purchase">
                  <div class="category-icon"><i class="fas fa-dumbbell"></i></div>
                  <span class="category-label">Equipment Purchase</span>
                </div>
                <div class="payment-category-item" data-category="equipment_maintenance">
                  <div class="category-icon"><i class="fas fa-tools"></i></div>
                  <span class="category-label">Equipment Maintenance</span>
                </div>
                <div class="payment-category-item" data-category="supplies">
                  <div class="category-icon"><i class="fas fa-box"></i></div>
                  <span class="category-label">Supplies</span>
                </div>
                <div class="payment-category-item" data-category="marketing">
                  <div class="category-icon"><i class="fas fa-bullhorn"></i></div>
                  <span class="category-label">Marketing</span>
                </div>
                <div class="payment-category-item" data-category="insurance">
                  <div class="category-icon"><i class="fas fa-shield-alt"></i></div>
                  <span class="category-label">Insurance</span>
                </div>
                <div class="payment-category-item" data-category="taxes">
                  <div class="category-icon"><i class="fas fa-file-invoice-dollar"></i></div>
                  <span class="category-label">Taxes</span>
                </div>
                <div class="payment-category-item" data-category="vendor_payment">
                  <div class="category-icon"><i class="fas fa-handshake"></i></div>
                  <span class="category-label">Vendor Payment</span>
                </div>
                <div class="payment-category-item" data-category="license_fees">
                  <div class="category-icon"><i class="fas fa-scroll"></i></div>
                  <span class="category-label">License Fees</span>
                </div>
                <div class="payment-category-item" data-category="miscellaneous">
                  <div class="category-icon"><i class="fas fa-ellipsis-h"></i></div>
                  <span class="category-label">Miscellaneous</span>
                </div>
                <div class="payment-category-item" data-category="membership">
                  <div class="category-icon"><i class="fas fa-id-card"></i></div>
                  <span class="category-label">Membership</span>
                </div>
                <div class="payment-category-item" data-category="personal_training">
                  <div class="category-icon"><i class="fas fa-user-tie"></i></div>
                  <span class="category-label">Personal Training</span>
                </div>
              </div>
              <input type="hidden" id="paymentCategory" name="category" required>
              <div class="category-error" id="categoryError" style="display: none; color: #ef4444; font-size: 0.875rem; margin-top: 4px;">Please select a payment category</div>
            </div>

            <div class="payment-form-group">
              <label class="payment-form-label" for="paymentMethod">Payment Method</label>
              <select class="payment-form-select" id="paymentMethod" name="paymentMethod" required>
                <option value="cash">Cash</option>
                <option value="card">Card</option>
                <option value="upi">UPI</option>
                <option value="bank_transfer">Bank Transfer</option>
                <option value="cheque">Cheque</option>
              </select>
            </div>

            <div class="payment-form-group">
              <label class="payment-form-label" for="paymentDueDate">Due Date</label>
              <input type="date" class="payment-form-input" id="paymentDueDate" name="dueDate">
            </div>

            <div class="payment-form-group full-width">
              <label class="payment-form-label" for="paymentDescription">Description</label>
              <input type="text" class="payment-form-input" id="paymentDescription" name="description" placeholder="Enter payment description" required>
            </div>

            <div class="payment-form-group">
              <label class="payment-form-label" for="memberName">Person Name (if applicable)</label>
              <input type="text" class="payment-form-input" id="memberName" name="memberName" placeholder="Enter person name" style="display: block;">
              <select class="payment-form-input" id="memberSelect" name="memberId" style="display: none;">
                <option value="">Select Member</option>
              </select>
              <input type="hidden" id="selectedMemberId" name="memberId">
            </div>

            <div class="payment-form-group">
              <div class="payment-form-checkbox">
                <input type="checkbox" id="isRecurring" name="isRecurring">
                <label for="isRecurring">This is a recurring payment</label>
              </div>
            </div>
          </div>

          <div class="recurring-details" id="recurringDetails">
            <div class="payment-form-grid">
              <div class="payment-form-group">
                <label class="payment-form-label" for="recurringFrequency">Frequency</label>
                <select class="payment-form-select" id="recurringFrequency" name="frequency">
                  <option value="monthly">Monthly</option>
                  <option value="quarterly">Quarterly</option>
                  <option value="yearly">Yearly</option>
                </select>
              </div>

              <div class="payment-form-group">
                <label class="payment-form-label" for="nextDueDate">Next Due Date</label>
                <input type="date" class="payment-form-input" id="nextDueDate" name="nextDueDate">
              </div>
            </div>
          </div>

          <div class="payment-form-group full-width">
            <label class="payment-form-label" for="paymentNotes">Notes</label>
            <textarea class="payment-form-textarea" id="paymentNotes" name="notes" placeholder="Additional notes (optional)"></textarea>
          </div>
        </form>
      </div>
      <div class="add-payment-modal-footer">
        <button type="button" class="payment-form-btn secondary" id="cancelPaymentBtn">Cancel</button>
        <button type="submit" class="payment-form-btn primary" form="addPaymentForm">Add Payment</button>
      </div>
    </div>
  </div>

  <!-- 7-Day Allowance Modal -->
  <div class="modal" id="sevenDayAllowanceModal" style="display:none;">
    <div class="modal-content" style="max-width:600px;">
      <span class="modal-close" id="closeSevenDayAllowanceModal">&times;</span>
      <h2 style="text-align:center;color:#ff9800;margin-bottom:1.5rem;">⏰ Grant 7-Day Allowance</h2>
      
      <!-- Member Info Display -->
      <div id="allowanceMemberInfo" style="background:#fff3cd;padding:1rem;border-radius:8px;margin-bottom:1.5rem;border-left:4px solid #ff9800;">
        <h4 style="margin:0 0 0.5rem 0;color:#856404;">Member Details</h4>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.5rem;font-size:0.9rem;">
          <div><strong>Name:</strong> <span id="allowanceMemberName"></span></div>
          <div><strong>ID:</strong> <span id="allowanceMembershipId"></span></div>
          <div><strong>Current Plan:</strong> <span id="allowanceCurrentPlan"></span></div>
          <div><strong>Expires:</strong> <span id="allowanceExpiryDate"></span></div>
        </div>
      </div>

      <!-- Warning Notice -->
      <div style="background:#fff3cd;border:1px solid #ffeaa7;border-radius:8px;padding:1rem;margin-bottom:1.5rem;">
        <div style="display:flex;align-items:center;color:#856404;">
          <i class="fas fa-exclamation-triangle" style="font-size:1.2rem;margin-right:8px;"></i>
          <strong>7-Day Allowance Notice</strong>
        </div>
        <p style="margin:0.5rem 0 0 0;font-size:0.9rem;color:#856404;">
          The member will be allowed gym access for 7 days while their payment remains pending. After 7 days, access will be restricted until payment is completed.
        </p>
      </div>

      <form id="sevenDayAllowanceForm">
        <input type="hidden" id="allowanceMemberId" name="memberId">
        
        <div class="form-group">
          <label for="allowancePlanSelected">New Plan</label>
          <select id="allowancePlanSelected" name="planSelected" required>
            <option value="">Select Plan</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="allowanceMonthlyPlan">Duration</label>
          <select id="allowanceMonthlyPlan" name="monthlyPlan" required>
            <option value="">Select Duration</option>
            <option value="1 Month">1 Month</option>
            <option value="3 Months">3 Months</option>
            <option value="6 Months">6 Months</option>
            <option value="12 Months">12 Months</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="allowancePaymentAmount">Payment Amount</label>
          <input type="number" id="allowancePaymentAmount" name="paymentAmount" min="0" required readonly style="background:#f5f5f5;">
          <small style="color:#666;font-size:0.85em;">Amount calculated automatically based on plan and duration</small>
          <div id="allowanceDiscountInfo" style="margin-top: 8px; padding: 8px; border-radius: 4px; font-size: 0.9em; display: none;">
            <i class="fas fa-tag"></i> <span id="allowanceDiscountText">No discount applied</span>
          </div>
        </div>
        
        <div class="form-group">
          <label for="allowanceActivityPreference">Activity Preference</label>
          <input type="text" id="allowanceActivityPreference" name="activityPreference" placeholder="e.g. Yoga, Cardio, Zumba" required>
        </div>
        
        <div style="display:flex;gap:1rem;justify-content:center;margin-top:1.5rem;">
          <button type="button" id="cancelSevenDayAllowance" class="btn btn-secondary">Cancel</button>
          <button type="submit" class="btn" style="background:#ff9800;color:white;border:none;">⏰ Grant 7-Day Allowance</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Payment History Modal -->
  <div id="paymentHistoryModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 900px; max-height: 90vh;">
      <div class="modal-header-style">
        <h3 class="modal-title-style">
          <i class="fas fa-file-alt"></i> Complete Payment History
        </h3>
        <button class="modal-close" id="closePaymentHistoryModal">&times;</button>
      </div>
      <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
        <div id="paymentHistoryContainer">
          <div class="payment-loading">
            <i class="fas fa-spinner fa-spin"></i> Loading payment history...
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mark as Paid Modal -->
  <div class="modal" id="markAsPaidModal" style="display:none;">
    <div class="modal-content" style="max-width:500px;">
      <span class="modal-close" id="closeMarkAsPaidModal">&times;</span>
      <h2 style="text-align:center;color:#28a745;margin-bottom:1.5rem;">✅ Mark Payment as Paid</h2>
      
      <!-- Member Info Display -->
      <div id="paidMemberInfo" style="background:#d4edda;padding:1rem;border-radius:8px;margin-bottom:1.5rem;border-left:4px solid #28a745;">
        <h4 style="margin:0 0 0.5rem 0;color:#155724;">Member Details</h4>
        <div style="font-size:0.9rem;">
          <div><strong>Name:</strong> <span id="paidMemberName"></span></div>
          <div><strong>ID:</strong> <span id="paidMembershipId"></span></div>
          <div><strong>Pending Amount:</strong> ₹<span id="paidPendingAmount"></span></div>
        </div>
      </div>

      <form id="markAsPaidForm">
        <input type="hidden" id="paidMemberId" name="memberId">
        <input type="hidden" id="paidSource" name="source">
        
        <div style="background:#fff3cd;border:#ffeaa7 1px solid;border-radius:8px;padding:1rem;margin-bottom:1.5rem;text-align:center;">
          <p style="margin:0;color:#856404;font-weight:500;">
            <i class="fas fa-info-circle" style="margin-right:8px;"></i>
            The full pending amount will be marked as paid with today's date.
          </p>
        </div>
        
        <div style="display:flex;gap:1rem;justify-content:center;margin-top:1.5rem;">
          <button type="button" id="cancelMarkAsPaid" class="btn btn-secondary">Cancel</button>
          <button type="submit" class="btn btn-success">✅ Mark as Paid</button>
        </div>
      </form>
    </div>
  </div>

<!-- Subscription Renewal Modal -->
<div id="subscriptionRenewalModal" class="modal" style="display: none;">
  <div class="modal-content" style="max-width: 600px;">
    <div class="modal-header-style">
      <h3 class="modal-title-style">
        <i class="fas fa-redo-alt"></i> Renew Subscription
      </h3>
      <button class="modal-close" id="closeRenewalModal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="renewal-info-card" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 24px; border-left: 4px solid #4CAF50;">
        <h4 style="margin: 0 0 12px 0; color: #333;">Current Subscription Details</h4>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
          <div>
            <span style="color: #666; font-size: 0.9rem;">Plan:</span>
            <div style="font-weight: 600; color: #333;" id="currentRenewalPlan">Monthly Plan</div>
          </div>
          <div>
            <span style="color: #666; font-size: 0.9rem;">Expires On:</span>
            <div style="font-weight: 600; color: #dc3545;" id="currentExpiryDate">--</div>
          </div>
        </div>
      </div>

      <form id="renewalForm">
        <div class="form-group" style="margin-bottom: 20px;">
          <label class="form-label" for="renewalPlan">Select Renewal Plan:</label>
          <select id="renewalPlan" class="form-control" required>
            <option value="">Choose a plan</option>
            <option value="1month" data-amount="999">Monthly - ₹999</option>
            <option value="3month" data-amount="1699">Quarterly - ₹1,699 (Save 43%)</option>
            <option value="6month" data-amount="3299">Half-Yearly - ₹3,299 (Save 45%)</option>
            <option value="12month" data-amount="5999">Annual - ₹5,999 (Save 50%)</option>
          </select>
        </div>

        <div class="renewal-summary" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 8px; color: white; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <h4 style="margin: 0; font-size: 1.2rem;">Renewal Summary</h4>
              <p style="margin: 4px 0 0 0; opacity: 0.9;" id="renewalSummaryText">Select a plan to see pricing</p>
            </div>
            <div style="text-align: right;">
              <div style="font-size: 2rem; font-weight: bold;" id="renewalAmount">₹--</div>
              <div style="font-size: 0.9rem; opacity: 0.8;" id="renewalSavings"></div>
            </div>
          </div>
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
          <label class="form-label" for="paymentMethod">Payment Method:</label>
          <select id="paymentMethod" class="form-control" required>
            <option value="">Select payment method</option>
            <option value="razorpay">Razorpay (Credit/Debit Card, UPI, Net Banking)</option>
            <option value="bank_transfer">Bank Transfer</option>
            <option value="cash">Cash Payment</option>
          </select>
        </div>

        <div class="form-actions" style="display: flex; gap: 12px; justify-content: flex-end;">
          <button type="button" class="btn btn-secondary" id="cancelRenewal">Cancel</button>
          <button type="submit" class="btn btn-primary" id="confirmRenewal">
            <i class="fas fa-credit-card"></i> Proceed to Payment
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Plan Change Modal -->
<div id="planChangeModal" class="modal" style="display: none;">
  <div class="modal-content" style="max-width: 700px;">
    <div class="modal-header-style">
      <h3 class="modal-title-style">
        <i class="fas fa-exchange-alt"></i> Change Subscription Plan
      </h3>
      <button class="modal-close" id="closePlanChangeModal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="current-plan-info" style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 16px; border-radius: 8px; margin-bottom: 24px;">
        <h4 style="margin: 0 0 8px 0; color: #856404;">Current Plan</h4>
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <span id="currentPlanInfo">Monthly Plan - ₹999</span>
          <span style="color: #856404; font-size: 0.9rem;" id="currentPlanExpiry">Expires: --</span>
        </div>
      </div>

      <div class="plans-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-bottom: 24px;">
        <div class="plan-card" data-plan="1month" data-amount="999" style="border: 2px solid #e0e0e0; border-radius: 8px; padding: 16px; cursor: pointer; text-align: center; transition: all 0.3s ease;">
          <h4 style="margin: 0 0 8px 0; color: #333;">Monthly</h4>
          <div style="font-size: 1.5rem; font-weight: bold; color: #1976d2; margin-bottom: 4px;">₹999</div>
          <div style="font-size: 0.8rem; color: #666;">per month</div>
        </div>
        <div class="plan-card" data-plan="3month" data-amount="1699" style="border: 2px solid #e0e0e0; border-radius: 8px; padding: 16px; cursor: pointer; text-align: center; transition: all 0.3s ease;">
          <h4 style="margin: 0 0 8px 0; color: #333;">Quarterly</h4>
          <div style="font-size: 1.5rem; font-weight: bold; color: #1976d2; margin-bottom: 4px;">₹1,699</div>
          <div style="font-size: 0.8rem; color: #666;">₹566/month</div>
          <div style="background: #4CAF50; color: white; padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; margin-top: 4px; display: inline-block;">Save 43%</div>
        </div>
        <div class="plan-card" data-plan="6month" data-amount="3299" style="border: 2px solid #e0e0e0; border-radius: 8px; padding: 16px; cursor: pointer; text-align: center; transition: all 0.3s ease;">
          <h4 style="margin: 0 0 8px 0; color: #333;">Half-Yearly</h4>
          <div style="font-size: 1.5rem; font-weight: bold; color: #1976d2; margin-bottom: 4px;">₹3,299</div>
          <div style="font-size: 0.8rem; color: #666;">₹550/month</div>
          <div style="background: #4CAF50; color: white; padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; margin-top: 4px; display: inline-block;">Save 45%</div>
        </div>
        <div class="plan-card" data-plan="12month" data-amount="5999" style="border: 2px solid #e0e0e0; border-radius: 8px; padding: 16px; cursor: pointer; text-align: center; transition: all 0.3s ease;">
          <h4 style="margin: 0 0 8px 0; color: #333;">Annual</h4>
          <div style="font-size: 1.5rem; font-weight: bold; color: #1976d2; margin-bottom: 4px;">₹5,999</div>
          <div style="font-size: 0.8rem; color: #666;">₹500/month</div>
          <div style="background: #4CAF50; color: white; padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; margin-top: 4px; display: inline-block;">Save 50%</div>
        </div>
      </div>

      <div class="plan-change-summary" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; display: none;" id="planChangeSummary">
        <h4 style="margin: 0 0 12px 0; color: #333;">Plan Change Summary</h4>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
          <div>
            <span style="color: #666; font-size: 0.9rem;">New Plan:</span>
            <div style="font-weight: 600; color: #333;" id="selectedPlanName">--</div>
          </div>
          <div>
            <span style="color: #666; font-size: 0.9rem;">Amount:</span>
            <div style="font-weight: 600; color: #1976d2;" id="selectedPlanAmount">₹--</div>
          </div>
        </div>
        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #ddd;">
          <span style="color: #666; font-size: 0.9rem;">Note:</span>
          <div style="font-size: 0.9rem; color: #333;" id="planChangeNote">Your new plan will be active immediately after payment confirmation.</div>
        </div>
      </div>

      <div class="form-actions" style="display: flex; gap: 12px; justify-content: flex-end;">
        <button type="button" class="btn btn-secondary" id="cancelPlanChange">Cancel</button>
        <button type="button" class="btn btn-primary" id="confirmPlanChange" style="display: none;">
          <i class="fas fa-exchange-alt"></i> Change Plan
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Payment History Modal -->
<div id="paymentHistoryModal" class="modal" style="display: none;">
  <div class="modal-content" style="max-width: 800px; max-height: 90vh;">
    <div class="modal-header-style">
      <h3 class="modal-title-style">
        <i class="fas fa-history"></i> Payment History
      </h3>
      <button class="modal-close" id="closePaymentHistoryModal">&times;</button>
    </div>
    <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
      <div class="payment-summary" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
        <div style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); color: white; padding: 16px; border-radius: 8px; text-align: center;">
          <div style="font-size: 1.5rem; font-weight: bold;" id="totalPaid">₹0</div>
          <div style="font-size: 0.9rem; opacity: 0.9;">Total Paid</div>
        </div>
        <div style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); color: white; padding: 16px; border-radius: 8px; text-align: center;">
          <div style="font-size: 1.5rem; font-weight: bold;" id="totalTransactions">0</div>
          <div style="font-size: 0.9rem; opacity: 0.9;">Transactions</div>
        </div>
        <div style="background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); color: white; padding: 16px; border-radius: 8px; text-align: center;">
          <div style="font-size: 1.5rem; font-weight: bold;" id="lastPaymentAmount">₹0</div>
          <div style="font-size: 0.9rem; opacity: 0.9;">Last Payment</div>
        </div>
      </div>

      <div class="payment-filter" style="margin-bottom: 20px;">
        <select id="paymentFilter" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; margin-right: 12px;">
          <option value="all">All Payments</option>
          <option value="success">Successful</option>
          <option value="failed">Failed</option>
          <option value="pending">Pending</option>
        </select>
        <input type="date" id="paymentDateFilter" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px;">
      </div>

      <div class="payment-history-list" id="paymentHistoryList">
        <div style="text-align: center; padding: 40px; color: #666;">
          <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 16px;"></i>
          <div>Loading payment history...</div>
        </div>
      </div>
    </div>
  </div>
</div>
  </div> <!-- End tab-inner-content -->
</div> <!-- End attendanceTab -->
    </div><!-- Close main-content -->
 
   <!-- 7-Day Allowance System -->
   <script src="modules/seven-day-allowance.js"></script>
   <!-- QR Code Generator System -->
   <script src="utils/qr-code-generator.js"></script>
   
  
   <!-- Enhanced Security Info Modal Functions -->
   <script>
   function showChangePasswordModal() {
     const modal = document.createElement('div');
     modal.className = 'modal';
     modal.style.display = 'flex';
     modal.innerHTML = `
       <div class="modal-content security-modal-content" style="max-width: 500px;">
         <div class="modal-header-style">
           <h3 class="modal-title-style">
             <i class="fas fa-lock"></i> Change Password
           </h3>
           <button class="modal-close" onclick="this.closest('.modal').remove()">&times;</button>
         </div>
         <div class="modal-body">
           <form id="changePasswordForm">
             <div class="form-group" style="margin-bottom: 16px;">
               <label for="currentPassword" style="display: block; margin-bottom: 4px; font-weight: 500;">Current Password</label>
               <input type="password" id="currentPassword" required style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px;">
             </div>
             <div class="form-group" style="margin-bottom: 16px;">
               <label for="newPassword" style="display: block; margin-bottom: 4px; font-weight: 500;">New Password</label>
               <input type="password" id="newPassword" required style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px;">
             </div>
             <div class="form-group" style="margin-bottom: 16px;">
               <label for="confirmPassword" style="display: block; margin-bottom: 4px; font-weight: 500;">Confirm New Password</label>
               <input type="password" id="confirmPassword" required style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px;">
             </div>
           </form>
         </div>
         <div class="modal-footer" style="padding: 16px 24px; border-top: 1px solid #eee; text-align: right;">
           <button class="btn btn-secondary" onclick="this.closest('.modal').remove()" style="margin-right: 8px;">
             Cancel
           </button>
           <button class="btn btn-primary" onclick="handlePasswordChange()">
             Change Password
           </button>
         </div>
       </div>
     `;
     document.body.appendChild(modal);
   }

   function handlePasswordChange() {
     // Add password change logic here
     alert('Password change functionality will be implemented');
   }

   // Helper function to create consistent info modals
   function createInfoModal(title, icon, tips) {
     const modal = document.createElement('div');
     modal.className = 'modal';
     modal.style.display = 'flex';
     modal.innerHTML = `
       <div class="modal-content security-modal-content" style="max-width: 600px;">
         <div class="modal-header-style">
           <h3 class="modal-title-style">
             <i class="fas fa-${icon}"></i> ${title}
           </h3>
           <button class="modal-close" onclick="this.closest('.modal').remove()">&times;</button>
         </div>
         <div class="modal-body">
           <div class="security-tips">
             ${tips.map(tip => `
               <div class="security-tip">
                 <i class="fas fa-check-circle"></i>
                 <span>${tip}</span>
               </div>
             `).join('')}
           </div>
         </div>
         <div class="modal-footer" style="padding: 16px 24px; border-top: 1px solid #eee; text-align: right;">
           <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">
             Close
           </button>
         </div>
       </div>
     `;
     document.body.appendChild(modal);
   }

   // Theme & Appearance Info Modal
   function showThemeInfo() {
     createInfoModal('Theme & Appearance Tips', 'palette', [
       'Light theme is ideal for bright environments and better readability',
       'Dark theme reduces eye strain in low-light conditions',
       'Auto theme automatically switches based on system settings',
       'Color schemes help organize and categorize different sections',
       'Choose colors that match your gym\'s branding'
     ]);
   }

   // Enhanced Security & Admin Management Info Modal
   function showSecurityInfo() {
     createInfoModal('Security & Admin Management Tips', 'shield-alt', [
       'Use a unique 4-digit admin passkey that\'s easy to remember but hard to guess',
       'Enable two-factor authentication for enhanced account security',
       'Change your passkey regularly and never share with unauthorized personnel',
       'Monitor login notifications to detect unauthorized access attempts',
       'Use strong session timeout settings to protect your account',
       'Admin passkey protects sensitive payment and financial data',
       'Review and manage privacy settings to control data usage',
       'Regular security audits help maintain optimal protection'
     ]);
   }

   // Customize Dashboard Info Modal
   function showCustomizeDashboardInfo() {
     createInfoModal('Dashboard Customization Tips', 'sliders-h', [
       'Hide tabs you don\'t use to simplify your dashboard interface',
       'Equipment tab provides detailed equipment management features',
       'Payment tab requires admin security verification for access',
       'Choose from multiple quick actions layout styles for optimal workflow',
       'Customization settings are saved automatically across sessions',
       'You can always re-enable hidden tabs from this settings page',
       'Drag and drop quick actions to reorder them according to your preferences'
     ]);
   }

   // Subscription Info Modal
   function showSubscriptionInfo() {
     createInfoModal('Subscription Management Tips', 'crown', [
       'Monitor your subscription status to avoid service interruptions',
       'Upgrade plans provide additional features and member capacity',
       'Download invoices for accounting and tax purposes',
       'Payment history helps track your gym management expenses',
       'Contact support for plan changes or billing questions'
     ]);
   }

   // Biometric Info Modal
   function showBiometricInfo() {
     createInfoModal('Biometric Attendance Tips', 'fingerprint', [
       'Fingerprint attendance provides secure and contactless check-ins',
       'Face recognition offers hands-free attendance tracking',
       'Requires compatible biometric hardware devices',
       'Backup methods ensure attendance tracking even if biometric fails',
       'Higher security levels provide more accurate member identification'
     ]);
   }

   // Notification Info Modal
   function showNotificationInfo() {
     createInfoModal('Notification Settings Tips', 'bell', [
       'Email notifications help you stay updated even when away',
       'SMS alerts provide instant updates for urgent matters',
       'Push notifications appear directly on your device',
       'Customize frequency to avoid notification overload',
       'Admin updates keep you informed about system changes'
     ]);
   }

   // Services Info Modal
   function showServicesInfo() {
     createInfoModal('Services & Features Tips', 'cogs', [
       'Personal training services can be managed and scheduled',
       'Equipment maintenance tracking helps prevent breakdowns',
       'Member check-in system provides automated attendance tracking',
       'Disable unused services to simplify your gym management',
       'Service settings affect member experience and available features'
     ]);
   }

   // Operating Hours Info Modal
   function showOperatingHoursInfo() {
     createInfoModal('Operating Hours Tips', 'clock', [
       'Set accurate hours to inform members about gym availability',
       'Different hours for each day accommodate varying schedules',
       'Holiday schedules can be set for special occasions',
       '24/7 option is available for gyms with round-the-clock access',
       'Operating hours appear on member portals and mobile apps'
     ]);
   }

   // Data Management Info Modal
   function showDataManagementInfo() {
     createInfoModal('Data Management Tips', 'database', [
       'Regular backups protect your gym data from loss',
       'Export member data for external analysis or reports',
       'Payment reports help with financial planning and taxes',
       'Attendance exports provide insights into gym usage patterns',
       'Store backups securely and test restoration procedures'
     ]);
   }
   </script>
</body>
</html>
       